(function(){function Ya(){return b.buyAmountStepPosRight}function qh(a){b.buyAmountStepPosRight=a}function yb(a){return"Hotkey: "+(9>a?a+1:9==a?0:"-")}function rh(a){return Ya()?yb(a+zb):yb(a)}function sh(a){return Ya()?yb(a):yb(a+Za)}function Y(a,b){return{rel:a,step:b}}function Xc(){return"Main"==Z?"U"+F:"Reset"==Z?"Reset":"Main"}function Yc(a){var d=Xc();d in b.buyAmountValue||(b.buyAmountValue[d]=Y(0,1));b.buyAmountValue[d].rel=a}function Zc(a){var d=Xc();d in b.buyAmountValue||(b.buyAmountValue[d]=
Y(0,1));b.buyAmountValue[d].step=a}function k(){var a=Xc();return a in b.buyAmountValue?b.buyAmountValue[a]:Y(0,1)}function $c(a){return 1<=a?Y(0,a):0==a?Y(1,1):Y(a,1)}function xe(a){Z=a;b.tutorial.lastClickEvent="clickTab"+Z;Ab();b.tutorial.lastClickEvent=""}function th(a){return F==a}function va(a){F=a;b.tutorial.lastClickEvent="clickUpgradeTab"+F;Ab();b.tutorial.lastClickEvent=""}function J(a,d,c,e){"undefined"===typeof d&&(d=uh);"undefined"===typeof c&&(c=vh);"undefined"===typeof e&&(e=b.numberNotation);
a=new g(a);var f=g.abs(a);if(f.gte(1E3)){var u=!1;if("sci"!=e){f=Math.floor(f.e/3)-1;u=3*(f+1);if("engineering"==e)return a.e-=u,a.toFixed(c)+"E"+u;if(f>=wh)u=!0;else return a.e-=u,a.toFixed(c)+(4>f?"":" ")+ye[f]}if(u||"sci"==e)return a.toExponential(c)}return a.toFixed(d)}function ad(){return Math.min(xh,1+(b.boost.daily.daysInRow-1)*yh)}function bd(){return ze("dailyBoost")}function $a(a,d,c){if(0==b.boost.daily.daysInRow%Ae)b.boost.daily.isDailyBoostGenerated||(b.boost.daily.generatedDailyBoost=
Bb,b.boost.daily.generatedDailyValue=Math.min(zh,b.boost.daily.daysInRow/Ae-1+Ah),b.boost.daily.isDailyBoostGenerated=!0);else{if(!b.boost.daily.isDailyBoostGenerated||a)b.boost.daily.generatedDailyBoost=Math.floor(Math.random()*Bh);if(!b.boost.daily.isDailyBoostGenerated||d)b.boost.daily.generatedDailyValue=Math.random()*(wa[b.boost.daily.generatedDailyBoost].valueMax-wa[b.boost.daily.generatedDailyBoost].valueMin)+wa[b.boost.daily.generatedDailyBoost].valueMin;if(!b.boost.daily.isDailyBoostGenerated||
c)b.boost.daily.generatedDailyTime=Math.floor(24*Math.random())+1;b.boost.daily.isDailyBoostGenerated=!0}}function Ch(){Cb=!0}function Dh(){Cb=!1}function Eh(){Cb=!1;b.boost.daily.isDailyBoostGenerated&&(b.boost.daily.generatedDailyBoost==Bb?b.premium.premiumMoney+=b.boost.daily.generatedDailyValue:(bd()&&(b.boost.timers.dailyBoost=0,Be("dailyBoost")),A="dailyBoost",b.boost.daily.selectedDailyBoost=b.boost.daily.generatedDailyBoost,b.boost.daily.selectedDailyValue=b.boost.daily.generatedDailyValue*
ad(),L.dailyBoost.rewardTime=3600*b.boost.daily.generatedDailyTime,Ce()),b.boost.daily.isDailyBoostGenerated=!1,aa(!0));C("upgrade")}function De(a){return a==Bb?'<img src="imgs/'+Ee()+'/premium.svg" class="premium-crystal"/>':wa[a].title}function Fh(){return De(b.boost.daily.generatedDailyBoost)}function Gh(){return De(b.boost.daily.selectedDailyBoost)}function Fe(){return b.boost.daily.daysInRow}function Hh(){var a=new Date,a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);b.boost={bounceMult:1,
gravityMult:1,energyMult:1,densityMult:1,bubbleProbInc:0,bubbleCapMult:1,idleMult:1,idleTimeInc:0,timers:{},daily:{nextDay:{d:a.getDate(),m:a.getMonth(),y:a.getFullYear()},daysInRow:0,isDailyBoostGenerated:!1,generatedDailyBoost:0,generatedDailyValue:0,generatedDailyTime:0,selectedDailyBoost:0,selectedDailyValue:0}};for(var d in L)L.hasOwnProperty(d)&&(b.boost.timers[d]=0)}function ze(a){return 0<b.boost.timers[a]}function Be(a){0==b.boost.timers[a]&&L[a].rewardEnd&&L[a].rewardEnd()}function Ge(a){A=
a;cd=!0}function Ih(){return cd}function Jh(){return ba?"Watch ads to get valuable boosts":"Visit a website and click any game to get the reward"}function Kh(){return A?(ba?"Watch an ad and ":"Visit a website and click any game to ")+L[A].dlgText():""}function Lh(){return ba?"Watch an ad":"Visit a website"}function Mh(a){cd=!1;a?ca()?(I.adsAvailable&&M.mtx.showIncentivizedAd(),x("Started","Boosts",A)):(da&&da.openAdUrl(),x("AIStarted_"+da.getAdlId(),"Boosts",A)):x("DialogCancel","Boosts",A)}function Ce(){A&&
(0==b.boost.timers[A]&&L[A].reward(),0<L[A].rewardTime&&(b.boost.timers[A]+=L[A].rewardTime),A="")}function Nh(){b.achievementsLevel=[];b.achievementsMult=[];b.achievementStatsDC=[];for(var a=0;a<He;a++)b.achievementsLevel[a]=0,b.achievementsMult[a]=V[a].mult?1:0,b.achievementStatsDC[a]=new g(0);Db=!1}function Eb(a,d,c){"undefined"===typeof d&&(d="");"undefined"===typeof c&&(c=!1);Oh();Ie||(Ie=!0,!(ba=-1!=window.location.search.indexOf("kongregate=1"))||ca()||Fa||(Fa=!0,dd("Starting KongregateAPI...",
"",Ph,Qh),Fb=!0));Ga=ab=!1;Ha=0;b.buyAmountValue={};Nh();b.achievementsSingleTaken={};b.reset={resetCnt:0,freeRefundCnt:0,active:0,inactive:0,inactiveTotal:0,bonusMult:.2};Je();bb();Hh();b.premium={premiumMoney:0,isSpecPackBought:{},boughtPackList:{},premiumEnergyMult:1,premiumBounceMult:1,premiumGravityMult:1,premiumIdleMult:1,premiumIdleMultTime:1,premiumEnergyGeneratorInc:0};na=!1;b.tutorial={enabled:!0,activeId:-1,finishedIds:[],lastClickEvent:""};Rh();Ke(!0);Le(!0);Me();Ne();Oe();if(a||"ok"!=
ed(d,!1,c))if(b.lastUpdateTime=(new Date).getTime(),a)try{window.localStorage.removeItem("IdleBouncerStV"),b.eventParams&&delete b.eventParams}catch(e){}else Ia=fd();else d||(gd=!0,Gb=new g(b.energyDC),Pe=b.lastUpdateTime);R();bb();hd();Qe();id();jd();ba||da||(da=Sh(Th));S=[];null==cb&&(cb=document.getElementById("canvas"),oa=cb.getContext("2d"),Hb=document.getElementById("canvas-bottom"),kd=Hb.getContext("2d"),cb.width=xa,cb.height=pa,Hb.width=xa,Hb.height=pa);Ja();ld();ga("set","appName","Idle Bouncer");
ga("set","appVersion","1.3.1.1");a=document.referrer;try{window.parent!=window&&(a=window.parent.document.referrer)&&ga("set","referrer",a)}catch(e){}ga("send","pageview");x("Version","Game","1.3.1.1");setTimeout(function(){ba?x("Site","Game","kongregate.com "+(ca()?"API":"no API")):x("Site","Game","other")},2E4);/^(https?:\/\/)?[^/]*kongregate\.com(\/.*)?$/i.test(a)?x("SiteHost","Game","kongregate.com"):x("SiteHost","Game","other");Re()}function Uh(a){b.numberNotation=a;x("NumNotation","Settings",
a)}function Vh(){aa(!1,!0);window.location.href="index.html?rnd="+Math.random()+(ba?"&kongregate=1":"")}function Se(a){var b=Math.floor(a/3600).toString(),c=Math.floor(a%3600/60).toString();a=(a%60).toString();1==a.length&&(a="0"+a);1==c.length&&(c="0"+c);1==b.length&&(b="0"+b);return b+":"+c+":"+a}function Ib(a){var b;100>a?b="second":6E3>a?(a/=60,b="minute"):18E4>a?(a/=3600,b="hour"):864E3>a?(a/=86400,b="day"):3024E3>a?(a/=604800,b="week"):31536E3>a?(a/=2592E3,b="month"):(a/=31536E3,b="year");return a.toFixed(1)+
" "+b+"s"}function md(a){var b=Math.floor(a/86400),c=Math.floor(a)%60,e=Math.floor(a/60)%60;a=Math.floor(a/3600)%24;var f="";0<b&&(f+=b+" day",1<b&&(f+="s"),f+=" ");10>a&&(f+="0");f+=a+":";10>e&&(f+="0");f+=e+":";10>c&&(f+="0");return f+=c.toString()}function Te(a,b,c){var e=a[b],f=e.length;if(c<f)return new g(e[c]);a=a[b+"Fnc"];if(null!==a)return a(c);if(0==f)return new g(0);if(1==f)return new g(e[0]);a=e[f-2];e=e[f-1];return a.isZero()?new g(e):e.mul(g.pow(e.div(a),c-f+1))}function ea(a,b){"object"!==
typeof b&&(b=$c(b));return 0<b.rel&&1>b.rel?a*b.rel:a}function Jb(a,b){"object"!==typeof b&&(b=$c(b));return 0<b.rel&&1>b.rel?g.mul(a,b.rel):new g(a)}function N(a,b,c,e,f,u,h){"object"!==typeof c&&(c=$c(c));var l=c.rel;c=c.step;b>Ue&&(c=1,-1==l&&(l=0));0<l||-1==l?(a=1==l||-1==l?new g(a):g.mul(a,l),f=Math.floor(nd(a,f,u,h))):f=c;if(-1!=l&&0<e&&f>e)return e;0==l?b=f:(l=-1==l?c:f<c?c:f,1==c?b=l:(l=Math.floor((b+l)/c)*c,b=l>b?l-b:0));return 0==e?b:Math.min(e,b)}function E(a,b,c){if(1==b)return g.mul(a,
c);var e=a.toString()+";"+b.toString()+";"+c.toString();if(e in db)return db[e];1E5<od&&(db=[],od=0);db[e]=g.mul(a,g.sub(1,g.pow(b,c))).div(g.sub(1,b));od++;return db[e]}function nd(a,b,c,e){if(1==c)return g.div(a,b).toNumber();e=e||Math.log(c);var f=a.toString()+";"+b.toString()+";"+c.toString();if(f in eb)return eb[f];1E5<pd&&(eb=[],pd=0);eb[f]=g.ln(g.sub(1,g.mul(a,g.sub(1,c)).div(b))).div(e).toNumber();pd++;return eb[f]}function Wh(){fb=!0}function Xh(){fb=!1}function Yh(){return fb}function qd(a){return K[a].finishTime?
(K[a].finishTime-(new Date).getTime())/1E3:!1}function Ve(a){var d=qd(a);return!K[a].hide&&!b.premium.isSpecPackBought[a]&&(!1===d||0<d)}function Zh(){for(var a in K)if(K.hasOwnProperty(a)&&K[a].buyOnce&&Ve(a))return!0;return!1}function We(a){fb=!1;var b=[a];ca()&&M.mtx.purchaseItems(b,$h);x("BuyStart","Premium",a,K[a].price)}function Xe(a){Kb=!0;na=a}function ai(){Kb=!1}function bi(){return Kb}function Ye(){return!1!==na&&b.premium.premiumMoney>=ka[na].price}function Ze(){var a=na;if(b.premium.premiumMoney>=
ka[a].price){b.premium.premiumMoney-=ka[a].price;if(ka[a].onBuyFnc)ka[a].onBuyFnc();aa(!0);x("BuyItem","Premium",ka[a].name,ka[a].price)}na=!1;C("upgrade")}function rd(){return Math.max(0,35-b.premium.premiumEnergyGeneratorInc)}function $e(){return Math.floor(rd()/5)}function Je(){b.reset.energyExtLevel=5<=b.achievementsLevel[O.achEnergyStorage]?1:0;b.reset.energyExtUpgPrice=ci;b.reset.energyExtCapacityMult=.1;b.reset.gravityLevel=0;b.reset.gravityUpgPrice=di;b.reset.gravityMult=1;b.reset.densityLevel=
0;b.reset.densityUpgPrice=ei;b.reset.densityMult=1;b.reset.bounceLevel=0;b.reset.bounceUpgPrice=fi;b.reset.bounceMult=1;b.reset.bubbleProbLevel=0;b.reset.bubbleProbUpgPrice=gi;b.reset.bubbleProb=.01;b.reset.bubbleCapLevel=0;b.reset.bubbleCapUpgPrice=hi;b.reset.bubbleCapMult=1;b.reset.removeSpikes=!1;b.reset.idleMultLevel=0;b.reset.idleMultUpgPrice=af;b.reset.idleMult=1;b.reset.idleMultTimeLevel=0;b.reset.idleMultTimeUpgPrice=bf;b.reset.idleMultTime=1;b.reset.energyGeneratorLevel=0;b.reset.energyGeneratorUpgPrice=
sd}function Lb(){return 1<=b.reset.inactive}function cf(){b.reset.active+=b.reset.inactive;b.statistics.metaEnergy+=b.reset.inactive;b.reset.inactiveTotal+=b.reset.inactive;b.reset.inactive=0;b.reset.resetCnt++;b.statistics.reset++;bb()}function df(){return b.reset.bonusMult+b.events.eventMetaBonusInc}function bb(){b.reset.totalMult=1+b.reset.active*df()}function ii(){return g.max(0,g.pow(10,b.reset.inactiveTotal+ef).mul(ff).sub(b.statistics.energyDC))}function fa(a){b.reset.active-=a;bb()}function ji(){return Mb}
function ki(){Lb()&&(Mb=!0)}function li(){Mb=!1}function Nb(){return 1<Ob()||b.reset.bounceLevel||b.reset.densityLevel||b.reset.gravityLevel||b.reset.bubbleProbLevel||b.reset.bubbleCapLevel||b.reset.removeSpikes||b.reset.idleMultLevel||b.reset.idleMultTimeLevel||b.reset.energyGeneratorLevel}function gf(){if(Nb()){b.statistics.resetRefund++;0<b.reset.freeRefundCnt&&b.reset.freeRefundCnt--;var a=Ob()-1,d=b.reset.bounceLevel,c=b.reset.densityLevel,e=b.reset.gravityLevel,f=b.reset.bubbleProbLevel,g=b.reset.bubbleCapLevel,
h=b.reset.removeSpikes,l=b.reset.idleMultLevel,q=b.reset.idleMultTimeLevel,m=b.reset.energyGeneratorLevel;b.reset.gravityMult=1;Je();R();P();0<a&&(b.reset.active+=Pb(a));0<d&&(b.reset.active+=Qb(d));0<c&&(b.reset.active+=Rb(c));0<e&&(b.reset.active+=Sb(e));0<f&&(b.reset.active+=Tb(f));0<g&&(b.reset.active+=Ub(g));h&&(b.reset.active+=Vb);0<l&&(b.reset.active+=Wb(l));0<q&&(b.reset.active+=Xb(q));0<m&&(b.reset.active+=Yb(m));bb()}}function Ob(){return b.reset.energyExtLevel}function Zb(a){return N(b.reset.active,
Ob(),a,0,b.reset.energyExtUpgPrice,$b,mi)}function Pb(a){a=Zb(a);return 1>=a?b.reset.energyExtUpgPrice:E(b.reset.energyExtUpgPrice,$b,a).toNumber()}function hf(a){return 0<Zb(a)&&ea(b.reset.active,a)>=Pb(a)}function ac(a){return N(b.reset.active,b.reset.bounceLevel,a,0,b.reset.bounceUpgPrice,bc,ni)}function Qb(a){a=ac(a);return 1>=a?b.reset.bounceUpgPrice:E(b.reset.bounceUpgPrice,bc,a).toNumber()}function jf(a){return 0<ac(a)&&ea(b.reset.active,a)>=Qb(a)}function cc(a){return N(b.reset.active,b.reset.densityLevel,
a,0,b.reset.densityUpgPrice,dc,oi)}function Rb(a){a=cc(a);return 1>=a?b.reset.densityUpgPrice:E(b.reset.densityUpgPrice,dc,a).toNumber()}function kf(a){return 0<cc(a)&&ea(b.reset.active,a)>=Rb(a)}function ec(a){return N(b.reset.active,b.reset.gravityLevel,a,0,b.reset.gravityUpgPrice,fc,pi)}function Sb(a){a=ec(a);return 1>=a?b.reset.gravityUpgPrice:E(b.reset.gravityUpgPrice,fc,a).toNumber()}function lf(a){return 0<ec(a)&&ea(b.reset.active,a)>=Sb(a)}function gc(a){return N(b.reset.active,b.reset.bubbleProbLevel,
a,0,b.reset.bubbleProbUpgPrice,hc,qi)}function Tb(a){a=gc(a);return 1>=a?b.reset.bubbleProbUpgPrice:E(b.reset.bubbleProbUpgPrice,hc,a).toNumber()}function mf(a){return 0<gc(a)&&ea(b.reset.active,a)>=Tb(a)}function ic(a){return N(b.reset.active,b.reset.bubbleCapLevel,a,0,b.reset.bubbleCapUpgPrice,jc,ri)}function Ub(a){a=ic(a);return 1>=a?b.reset.bubbleCapUpgPrice:E(b.reset.bubbleCapUpgPrice,jc,a).toNumber()}function nf(a){return 0<ic(a)&&ea(b.reset.active,a)>=Ub(a)}function si(){return Vb}function gb(){return b.reset.removeSpikes}
function of(){return!gb()&&b.reset.active>=Vb}function kc(a){return N(b.reset.active,b.reset.idleMultLevel,a,0,b.reset.idleMultUpgPrice,lc,ti)}function Wb(a){a=kc(a);return 1>=a?b.reset.idleMultUpgPrice:E(b.reset.idleMultUpgPrice,lc,a).toNumber()}function pf(a){return 0<kc(a)&&ea(b.reset.active,a)>=Wb(a)}function mc(a){return N(b.reset.active,b.reset.idleMultTimeLevel,a,0,b.reset.idleMultTimeUpgPrice,nc,ui)}function Xb(a){a=mc(a);return 1>=a?b.reset.idleMultTimeUpgPrice:E(b.reset.idleMultTimeUpgPrice,
nc,a).toNumber()}function qf(a){return 0<mc(a)&&ea(b.reset.active,a)>=Xb(a)}function rf(){return b.tubeImprLevelMax>=oc}function qa(){return b.reset.energyGeneratorLevel}function sf(){return Math.max(0,b.tubeImprLevelMax-oc+1)}function vi(){return Math.max(b.tubeImprLevelMax+2,oc+1)}function tf(){return new g(b.reset.totalMult*b.premium.premiumEnergyMult*b.events.eventEnergyMult*b.boost.energyMult)}function uf(a){if(0==a)return new g(0);var d=b.premium.premiumEnergyGeneratorInc;return a<=vf?g.pow(wi,
a+d).mul(tf()):hb(d%6+6*(a-vf+1+Math.floor(d/6))).mul(10).mul(tf())}function td(){return uf(qa())}function ib(a){var d=sf()-qa();return 0<d?N(b.reset.active,qa(),a,d,b.reset.energyGeneratorUpgPrice,pc,xi):0}function Yb(a){a=ib(a);return 1>=a?b.reset.energyGeneratorUpgPrice:E(b.reset.energyGeneratorUpgPrice,pc,a).toNumber()}function wf(a){return 0<ib(a)&&rf()&&ea(b.reset.active,a)>=Yb(a)}function xf(a){var d=yf(a);if(25==a.saveVer)return d;var c=b,e;0==a.saveVer&&(c=d,c.saveVer=1,c.showBounceEnergy=
!0,c.isAnyTubeImproved=!1,c.ballStyle="ball");1==a.saveVer&&(c!=d&&(c=d),c.saveVer=2,c.statistics.resetRefund=0,c.buyAmountValue={});2==a.saveVer&&(c!=d&&(c=d),c.saveVer=3,c.tubeInfo="percent",c.coloredUpgrades=!1,c.showUpgradeCntInTab=!0);3==a.saveVer&&(c!=d&&(c=d),c.saveVer=4,c.reset.removeSpikes=!1);4==a.saveVer&&(c!=d&&(c=d),c.saveVer=5,c.gameId="IdleBouncer",c.kongUserId="",c.idleEnergyDC=new g(0),c.idleEnergyTimer=-ud,c.idleEnergyBonusDC=new g(0),c.idleEnergyTransferSpeedDC=new g(0),c.reset.idleMultLevel=
0,c.reset.idleMultUpgPrice=af,c.reset.idleMult=1,c.reset.idleMultTimeLevel=0,c.reset.idleMultTimeUpgPrice=bf,c.reset.idleMultTime=1,c.premium.premiumIdleMult=1,c.premium.premiumIdleMultTime=1,e=c.premium.isSpecPackBought,c.premium.isSpecPackBought={},e&&(c.premium.isSpecPackBought.packspec=!0));if(5==a.saveVer){c!=d&&(c=d);c.saveVer=6;5<=c.achievementsLevel[O.achEnergyStorage]&&(0==c.reset.energyExtLevel?c.reset.energyExtLevel=1:c.reset.active++);e=10*Math.max(0,c.statistics.resetRefund-1);var f=
Math.max(0,c.statistics.resetRefund-1-c.statistics.reset);c.reset.freeRefundCnt=Math.max(0,1+c.statistics.reset-c.statistics.resetRefund);c.premium.premiumMoney+=e-f}6==a.saveVer&&(c!=d&&(c=d),c.saveVer=7,c.events={eventEnergyMult:1,eventBounceMult:1,eventGravityMult:1,eventIdleMult:1,eventIdleMultTime:1,eventMetaBonusInc:0,eventItems:[]},c.boost.gravityMult=1);7==a.saveVer&&(c!=d&&(c=d),c.saveVer=8,c.virtTubeIdMax=0,c.premium.isSpecPackBought.packidle&&(c.premium.isSpecPackBought.packidlen=!0));
if(8==a.saveVer){c!=d&&(c=d);c.saveVer=9;c.reset.freeRefundCnt++;c.tubeImprLevelMax=c.tubes[0].improvementLevel;for(e=1;6>e;e++)c.tubes[e].active&&c.tubes[e].improvementLevel>c.tubeImprLevelMax&&(c.tubeImprLevelMax=c.tubes[e].improvementLevel);c.statistics.improvementMax=0==c.tubeImprLevelMax?0:c.tubeImprLevelMax+1;c.reset.energyGeneratorLevel=0;c.reset.energyGeneratorUpgPrice=sd;c.reset.energyGeneratorValueDC=new g(0);c.premium.premiumEnergyGeneratorInc=0;c.theme="default";c.events.stvAchLevels||
(c.events.stvAchLevels=[0,0,0,0])}9==a.saveVer&&(c!=d&&(c=d),c.saveVer=10,c.reset.freeRefundCnt++,e=c.reset.energyGeneratorLevel,0<e&&(c.reset.active+=1==e?1:E(1,1.1,e).toNumber(),c.reset.energyGeneratorLevel=0,c.reset.energyGeneratorUpgPrice=sd,c.reset.energyGeneratorValueDC=new g(0)));10==a.saveVer&&(c!=d&&(c=d),c.saveVer=11,e=new Date,c.boost={bounceMult:1,gravityMult:1,energyMult:1,densityMult:1,bubbleProbInc:0,bubbleCapMult:1,idleMult:1,idleTimeInc:0,timers:{},daily:{nextDay:{d:e.getDate(),m:e.getMonth(),
y:e.getFullYear()},daysInRow:0,isDailyBoostGenerated:!1,generatedDailyBoost:0,generatedDailyValue:0,generatedDailyTime:0,selectedDailyBoost:0,selectedDailyValue:0}},c.boost.timers.dailyBoost=0,c.statistics.daysInRowMax=0,c.events.eventBoughtItems=[]);if(11==a.saveVer){c!=d&&(c=d);c.saveVer=12;delete c.reset.energyGeneratorValueDC;c.tubeImprovesMax=[];c.abilitiesFreeRefundCnt=1+c.tubeImprLevelMax;c.isAnyAbilityBought=!1;c.abilities=[];for(e=0;6>e;e++){c.tubeImprovesMax[e]=c.tubes[e].improvementLevel;
c.balls[e].heightTotalDC=new g(0);c.balls[e].tmpDropHeight=0;c.abilities[e]={points:c.tubeImprovesMax[e],levels:{},queueSizeMax:1,queue:[],currentAbility:0,autoJumpKoef:0,energyMultDC:new g(1)};for(var u in w)w.hasOwnProperty(u)&&(c.abilities[e].levels[u]={lvlMax:0,lvl:0,ptsPrice:w[u].ptsPrice,heightDC:new g(0),effectMultDC:w[u].initEffectMultDC?new g(w[u].initEffectMultDC):new g(0)});delete c.tubes[e].improveButtonVisible;c.tubes[e].improvePriceDC=hb(e+6*(c.tubes[e].improvementLevel+1)).mul(10)}u=
c.reset.densityLevel;e=c.reset.gravityLevel;var f=c.reset.idleMultLevel,h=c.reset.energyGeneratorLevel;c.reset.freeRefundCnt++;if(0<h){c.reset.active+=E(.5,1.01,h).toNumber();4<h&&(h=4+Math.floor((h-4)/6));var l=nd(c.reset.active,1,1.07);h>l&&(h=l);c.reset.active-=E(1,1.07,h).toNumber();c.reset.energyGeneratorUpgPrice=Math.pow(1.07,h);c.reset.energyGeneratorLevel=h}0<f&&(c.reset.active+=E(2,1.2,f).toNumber(),c.reset.active-=E(2,1.18,f).toNumber(),c.reset.idleMultUpgPrice=2*Math.pow(1.18,f));0<u&&
(c.reset.active+=E(4,1.3,u).toNumber(),c.reset.active-=E(4,1.27,u).toNumber(),c.reset.densityUpgPrice=4*Math.pow(1.27,u));0<e&&(c.reset.active+=E(5,1.3,e).toNumber(),c.reset.active-=E(5,1.27,e).toNumber(),c.reset.gravityUpgPrice=5*Math.pow(1.27,e));0<c.tubeImprLevelMax&&(--c.reset.inactiveTotal,vd=!0)}12==a.saveVer&&(c!=d&&(c=d),c.saveVer=13,c.showAbilityEffects=!0);if(13==a.saveVer)for(c!=d&&(c=d),c.saveVer=14,c.firstStartTime=(new Date).getTime(),c.abilitiesFreeRefundCnt++,e=0;6>e;e++){if(8<c.tubeImprovesMax[e]){h=
c.tubes[e].improvementLevel;u=e+6*h;f=hb(u).mul(10);if(3<e||0<h)f=qc[e][h]?f.mul(qc[e][h]):f.mul(13500).mul(g.exp(.23*(u-12)));c.tubes[e].amplifierUpgPriceDC=f.mul(g.pow(1.15,c.tubes[e].amplifierLevel-1))}c.abilities[e].currentAbility=Math.max(0,Math.min(c.abilities[e].queue.length-1,c.abilities[e].currentAbility))}if(14==a.saveVer){c!=d&&(c=d);c.saveVer++;0<c.tubeImprLevelMax&&(c.reset.inactiveTotal--,c.abilitiesFreeRefundCnt++);for(e=0;6>e;e++)c.abilities[e].preventWeakBubbleKoef=0,c.abilities[e].levels.preventWeakBubble=
{lvlMax:0,lvl:0,ptsPrice:w.preventWeakBubble.ptsPrice,heightDC:new g(0),effectMultDC:new g(0)};c.bgStyle="off"}if(15==a.saveVer)for(c!=d&&(c=d),c.saveVer++,e=0;6>e;e++)c.abilities[e].levels.preventWeakBubble.ptsPrice=2,0<c.abilities[e].levels.preventWeakBubble.lvlMax&&(c.abilities[e].points+=c.abilities[e].levels.preventWeakBubble.lvlMax);16==a.saveVer&&(c!=d&&(c=d),c.saveVer++);17==a.saveVer&&(c!=d&&(c=d),c.saveVer++,c.buyAmountValue={});18==a.saveVer&&(c!=d&&(c=d),c.saveVer++,c.buyAmountStepPosRight=
!0);19==a.saveVer&&(c!=d&&(c=d),c.saveVer++);20==a.saveVer&&(c!=d&&(c=d),c.saveVer++,c.achievementsSingleTaken={},c.statistics.metaEnergy=c.reset.active);21==a.saveVer&&(c!=d&&(c=d),c.saveVer++,c.musicEnabled=!0,c.sfxEnabled=!0);22==a.saveVer&&(c!=d&&(c=d),c.saveVer++,c.musicVolume=.3,c.sfxVolume=1);23==a.saveVer&&(c!=d&&(c=d),c.saveVer++,c.fullscreen=!1,c.keepWindowSize=!1,c.windowWidth=0,c.windowHeight=0,c.windowMaximized=!1);24==a.saveVer&&(c!=d&&(c=d),c.saveVer++,Ia=fd());return c}function wd(a){a=
Ka.compressToBase64(a);for(var b=0,c=a.length-1;0<=c;c--)b+=a.charCodeAt(c)+7;return a+"$"+b.toString(36)}function zf(a){if(!a)return"";if("{"==a[0])return a;var b=a.indexOf("$");if(-1==b)return decodeURIComponent(unescape(window.atob(a)));var c=a.substr(0,b);a=a.substr(b+1);a=parseInt(a,36);for(b=c.length-1;0<=b;b--)a-=c.charCodeAt(b)+7;if(0==a)return Ka.decompressFromBase64(c);throw Error("wrong checksum");}function ed(a,d,c){"undefined"===typeof a&&(a="");"undefined"===typeof d&&(d=!1);"undefined"===
typeof c&&(c=!1);try{var e=""!=a,f=e?zf(a):zf(window.localStorage.IdleBouncer);if(f){var f=JSON.parse(f),g=I.userId,h=I.userName;if(e&&!c&&(f.gameId&&"IdleBouncer"!=f.gameId||f.kongUserId&&f.kongUserId!=g||!f.kongUserId&&f.kongUser&&f.kongUser!=h))return"error";d?c&&(jb=xf(f)):b=xf(f);return"ok"}return"empty"}catch(l){return xd((e?c?"Cloud":"Import":"Load")+(d?" check":"")+" error"+(l.message?" ("+l.message+")":""),!1),"error"}}function aa(a,d){a&&(yd=rc=0);var c=(new Date).getTime();if(d||c>=yd&&
c>=rc){yd=c+2E3;rc=c+6E4;c=wd(JSON.stringify(b));sc=!0;try{window.localStorage.IdleBouncer=c,d&&c!=window.localStorage.IdleBouncer&&(sc=!1)}catch(e){sc=!1}}}function yi(a){a in G||(G[a]={audio:new Audio,loaded:!1,playing:!1},G[a].audio.onloadeddata=function(){G[a].loaded=!0},G[a].audio.onended=function(){G[a].playing=!1},G[a].audio.src=(kb[a].isSFX?"sfx/":"snd/")+kb[a].file)}function Oh(){for(var a in kb)kb.hasOwnProperty(a)&&yi(a)}function C(a){var d=kb[a].isSFX;G[a].loaded&&(d&&b.sfxEnabled||!d&&
b.musicEnabled)&&(G[a].audio.currentTime=0,G[a].audio.volume=d?b.sfxVolume:b.musicVolume,G[a].audio.play(),G[a].playing=!0)}function zi(){if(Af)return!0;for(var a=0;a<Bf;a++)if(!G["music"+a].loaded)return!1;return Af=!0}function Rh(){tc={energyDC:{name:"Total energy collected",showRank:!0,bigNumLoDigits:2},metaEnergy:{name:"Total meta-energy activated",bigNumLoDigits:2},bounce:{name:"Total bounces",bigNumLoDigits:0},bubble:{name:"Total bubbles spawned",bigNumLoDigits:0},bubbleClicked:{name:"Total bubbles clicked",
bigNumLoDigits:0},reset:{name:"Total resets",showRank:!1,bigNumLoDigits:0},resetRefund:{name:"Total reset refunds",showRank:!1,bigNumLoDigits:0},improvementMax:{name:"Maximal tube improvement level",showRank:!1,bigNumLoDigits:0},time:{name:"Total active game time",showRank:!1,bigNumLoDigits:0},daysInRowMax:{name:"Maximal days played in a row",showRank:!1,bigNumLoDigits:0}};b.statistics={};for(var a in tc)tc.hasOwnProperty(a)&&(b.statistics[a]=Cf(a)?new g(0):0)}function Df(a){b.theme!=a&&(b.theme=
a,Ja())}function lb(){return b.theme}function T(){return Ef[lb()]}function Ai(){return"default"!=lb()}function Bi(){return T().file}function Ee(){return T().imgDir}function zd(){return b.tutorial.enabled}function La(){return zd()&&-1!=b.tutorial.activeId}function Ci(){return La()&&!Ma().hidePanel}function Ma(){return La()?Na[b.tutorial.activeId]:null}function Ff(){var a=Ma();return null!=a&&a.activeTabName&&Z!=a.activeTabName}function Di(){var a=Ma();return null==a?"":Ff()?"Click on the "+a.activeTabName+
" tab.":a.text}function Ei(){var a=Ma();return null==a?!1:a.continueButton&&!Ff()}function Gf(a){return La()&&Na[b.tutorial.activeId].name==a}function Fi(a){return Gf(a)&&Na[b.tutorial.activeId].highlightElements}function Gi(){var a=Ma();return null!=a&&a.highlightElements}function Hi(){Hf()}function If(a){b.tutorial.enabled=!1;a?x("ClickSkip","Tutorial","SkipOnStep"+b.tutorial.activeId,b.tutorial.activeId):x("Finish","Tutorial","FullTutorial")}function Hf(a){var d;"undefined"===typeof a?(d=Ma(),
a=b.tutorial.activeId):d=Na[a];null!=d&&(d.activateOnce&&(b.tutorial.finishedIds[a]=d.name),b.tutorial.activeId=-1,a==Jf-1?If(!1):Ab())}function Kf(a){var d=Na[a];if(La())d.finishFnc()&&(x("FinishStep","Tutorial",d.name,a),Hf(a));else if(d.activateFnc())return b.tutorial.activeId=a,!0;return!1}function Ab(){if(zd())if(La())Kf(b.tutorial.activeId);else for(var a=0;a<Jf&&(a in b.tutorial.finishedIds||!Kf(a));a++);}function Lf(a){if(Fb){var b=!0;null!=uc&&(b=uc(a||!1));b&&(Fb=!1,Ad="",Oa=0,uc=null)}}
function Ii(){0<Oa&&(new Date).getTime()>=Oa&&Lf(!0);return Fb}function Ji(){return Mf}function Ki(){return Ad}function Li(){return 0==Oa?"":Math.ceil((Oa-(new Date).getTime())/1E3)}function dd(a,b,c,e){Mf=a;Ad=b||"";Oa=c?(new Date).getTime()+c:0;uc=e||null}function Ja(){kd.clearRect(0,0,xa,pa);for(var a=kd,d,c=0;6>c;c++)if(b.tubes[c].active){d=D[c];var e=a,f=d.x,g=d.y,h=d.width;d=d.height;e.fillStyle="#fff";e.strokeStyle=T().tubeRectColor;e.strokeRect(Math.floor(f),Math.floor(g),Math.floor(h),Math.floor(d))}}
function ld(){oa.clearRect(0,0,xa,pa);var a=oa;if(Gf("start")){var d="Click here to drop a ball.; Each bounce gives you energy.;  Spend it to upgrade;   the tube amplifier and height,;    the ball size and bounce.;     Sell tubes to get meta-energy;      and use it to change the world!".split(";"),c={x:50,y:Pa,font:"bold 14px Arial",isFillText:!0,fillStrokeStyle:T().tutorialTextColorRGBA.slice(),hAlign:"start",vAlign:"top",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,shadowBlur:0},e;for(e in d)d.hasOwnProperty(e)&&
(c.text=d[e],vc(a,c),c.y+=14);a.fillStyle="#f00";a.strokeStyle="#f00";a.lineWidth=2;a.beginPath();a.moveTo(49,11+Pa);a.lineTo(20,60+Pa);a.stroke();a.beginPath();a.moveTo(20,50+Pa);a.lineTo(20,60+Pa);a.lineTo(29,55+Pa);a.fill();a.lineWidth=1}for(var a=oa,f,g=0;6>g;g++)e=b.balls[g],e.active&&(f=W[g].x,d=W[g].y-e.y*ra-.5,c=Math.max(1,e.r*ra),wc[xc()].drawFnc(a,g,f,d,c,b.tubes[g].improvementLevel,Bd[g]),mb[g]&&(0>e.v?(f=T().bounceTextColorRGBA.slice(),f[3]=Math.max(0,Math.min(1,1-e.y/e.height)),a.fillStyle=
"rgba("+f.join(",")+")",a.fillRect(D[g].x,d+c,D[g].width,1)):mb[g]=!1));var a=oa,h;for(h in S)if(S.hasOwnProperty(h))switch(d=S[h],S[h].type){case "text":vc(a,d);break;case "img":a.globalAlpha=d.opacity;1==d.scale?a.drawImage(d.img,d.x,d.y):a.drawImage(d.img,d.x,d.y,d.img.width*d.scale,d.img.height*d.scale);a.globalAlpha=1;break;case "rect":c="rgba("+d.color.join(",")+")",d.isStroke?(a.strokeStyle=c,a.strokeRect(d.x,d.y,d.width,d.height)):(a.fillStyle=c,a.fillRect(d.x,d.y,d.width,d.height))}h=oa;
d=Cd();if(0<d)for(c=0;6>c;c++)b.tubes[c].active&&("percent"==Nf()?(a=Math.floor(1E3*Dd(c).div(d).toNumber())/10,Of(h,W[c].x,W[c].y,12,a+"%")):Of(h,W[c].x,W[c].y,9,J(Dd(c),1,0)));h=oa;for(a=0;6>a;a++)ya(a)&&(d=h,c=a,e=Math.min(1,Ed(c).div(Fd(c)).toNumber()),e=Math.floor(D[c].width*e),g=D[c].x+Math.floor((D[c].width-e)/2),c=D[c].bottom-1-Pf,d.fillStyle=T().abilityProgressColor,d.fillRect(g,c,e,yc));h=oa;Gd&&la&&(a=Math.floor(m.size),h.globalAlpha=m.opacity,za?h.drawImage(nb,100*(1+Math.floor(Mi*(1-
m.opacity))),0,zc,zc,Math.floor(m.posX),Math.floor(m.posY),a,a):Qa||h.drawImage(nb,0,0,zc,zc,Math.floor(m.posX),Math.floor(m.posY),a,a),za||(a={x:Math.floor(m.centerX),y:Math.floor(m.centerY),font:"bold "+Math.floor(m.fontSize)+"px Arial",isFillText:!0,fillStrokeStyle:T().qteTextColorRGBA.slice(),hAlign:"center",vAlign:"middle",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,shadowBlur:0},a.text=J(m.valueDC,1,1),vc(h,a)),h.globalAlpha=1)}function vc(a,b){a.font=b.font;a.textBaseline=b.vAlign;a.textAlign=
b.hAlign;a.shadowColor=b.shadowColor;a.shadowOffsetX=b.shadowOffsX;a.shadowOffsetY=b.shadowOffsY;a.shadowBlur=b.shadowBlur;var c="rgba("+b.fillStrokeStyle.join(",")+")";b.isFillText?(a.fillStyle=c,a.fillText(b.text,Math.floor(b.x),Math.floor(b.y))):(a.strokeStyle=c,a.strokeText(b.text,Math.floor(b.x),Math.floor(b.y)))}function Nf(){return b.tubeInfo}function Ni(a){b.tubeInfo=a}function Of(a,b,c,e,f){b={x:b,y:c+Oi,font:"bold "+e+"px Arial",isFillText:!0,fillStrokeStyle:T().bounceTextColorRGBA.slice(),
hAlign:"center",vAlign:"top",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,shadowBlur:0};b.text=f;vc(a,b)}function Pi(){return 0}function sa(a,d){d&&(b.lastUpdateTime=(new Date).getTime()-1E3*a)}function Qi(){}function Ri(){}function Qf(){return ob[Ac].page+"?rnd="+Math.random()+(ba?"&kongregate=1":"")+""}function fd(){return Si&&0<(ob[Ac].finishTime-(new Date).getTime())/1E3}function Ti(){aa(!1,!0);window.location.href=Qf()}function Ui(){return ob[Ac].title}function pb(a){return b.events.eventItems[a]?
!0:!1}function Rf(a,d){pb(a)||(b.events.eventItems[a]=!0,b.events.eventBoughtItems[a]=d?!0:!1,Ra[a].addFnc(),aa(!0))}function Sf(a){for(var b=0,c=0;c<Hd;c++)Ra[c].eventCode==a&&pb(c)&&b++;return b}function Th(a){if("started"==a)x("AIAdOpened_"+da.getAdlId(),"Boosts",A);else if("finished"==a)x("AIAdCompleted_"+da.getAdlId(),"Boosts",A),Ce(),aa(!0);else if("cancelled"==a||"error"==a)x("AIAdAbandoned_"+da.getAdlId(),"Boosts",A),A=""}function Bc(){return!Id()&&!Jd()&&!1===Aa&&Tf()}function Uf(){return(new Date).getTime()>
Kd&&Bc()}function Jd(){return"started"==Ba}function Vi(){return"ok"==Ba}function Wi(){return"error"==Ba}function Vf(a,b){Ba=a?"ok":"error";a||xd("Cloud save error ("+b+")",!1)}function Xi(){if(Uf()){Ba="";var a;a=Ka.compressToBase64("e8g"+I.userId+"u8t");var d=Ka.compressToBase64("uie"+I.userId+"s75"),c=wd(JSON.stringify(b));!1===Aa?(Aa="save",Vf&&(qb=Vf),Cc(Wf+"save.php",Xf,"game="+encodeURIComponent("IdleBouncer")+"&user="+encodeURIComponent(a)+"&pass="+encodeURIComponent(d)+"&data="+encodeURIComponent(c)),
a=!0):a=!1;a&&(Kd=(new Date).getTime()+Yi,Ba="started",Id()||(X=""))}}function Zi(){return Bc()}function Id(){return"started"==X}function Dc(){return"ok"==X}function $i(){return"error"==X}function aj(){return"empty"==X}function Yf(a,b){X=a?"ok":"error";if(a){var c=ed(b,!0,!0);"ok"==c?Ec=b:(Ec="",jb={},X="empty"==c?"empty":"error")}else Ec="",jb={},"user not found"==b||"no data"==b?X="empty":xd("Cloud load error ("+b+")",!1)}function bj(){return Fc}function cj(){Fc=!0;if(Bc()){X="";var a;a=Ka.compressToBase64("e8g"+
I.userId+"u8t");var b=Ka.compressToBase64("uie"+I.userId+"s75");!1===Aa?(Aa="load",Yf&&(qb=Yf),Cc(Wf+"load.php",Xf,"game="+encodeURIComponent("IdleBouncer")+"&user="+encodeURIComponent(a)+"&pass="+encodeURIComponent(b)),a=!0):a=!1;a&&(X="started",Jd()||(Ba=""))}}function dj(){Fc=!1}function ej(){var a;if(Dc()){a=new Date(jb.lastUpdateTime);var b=a.getMonth(),c="0"+a.getHours(),e="0"+a.getMinutes(),f="0"+a.getSeconds();a=fj[b]+" "+a.getDate()+", "+a.getFullYear()+" "+c.substr(-2)+":"+e.substr(-2)+
":"+f.substr(-2)}else a="n/a";return a}function gj(){return Dc()?jb.energyDC:"n/a"}function Cf(a){var b=a.length;return 1<b&&"D"===a[b-2]&&"C"===a[b-1]}function yf(a){if(Array.isArray(a)||"object"==typeof a)for(var b in a)if(a.hasOwnProperty(b))if(Cf(b))if(Array.isArray(a[b]))for(var c in a[b])a[b].hasOwnProperty(c)&&(a[b][c]=new g(a[b][c]));else a[b]=new g(a[b]);else a[b]=yf(a[b]);return a}function hj(a,b){ab||(ab=!0,Ga=!1,Ha=a,b.get(ij).then(function(a){Ga=!0;Ld=a.data;a=(new Date).getTime()/1E3;
a=Math.max(.1,a-Ld);a<jj||(Ha=Math.max(.1,Ha-a))},function(a){Ga=!0;Ld=0}))}function x(a,b,c,e,f){b||(b="Event");e&&(e=parseInt(e,10),e=isNaN(e)?0:e);window.ga?(a={eventCategory:b,eventAction:a},c&&(a.eventLabel=c),e&&(a.eventValue=e),f&&(a.nonInteraction=f),ga("send","event",a)):window._gaq&&_gaq.push(["_trackEvent",b,a,c,e,f])}function xd(a,b){ga("send","exception",{exDescription:a,exFatal:b})}function kj(a){if("ShiftLeft"==a.code||"ShiftRight"==a.code)Ca=!0}function lj(a){if("ShiftLeft"==a.code||
"ShiftRight"==a.code)Ca=!1}function mj(a){var d=/Digit(\d+)/.exec(a.code),c="-"==a.key;if(d||c)d=c?10:0==d[1]?9:d[1]-1,Ca?0<=d&&6>d&&(Zf()?v=d:"Main"==Z&&("Main"==F?$f(d):"BallBounce"==F?ag(d):"BallSize"==F?bg(d):"TubeHeight"==F&&cg(d))):0<=d&&d<dg&&(Ya()?d<zb?Yc(Gc[d].value):Zc(rb[d-zb]):d<Za?Zc(rb[d]):Yc(Gc[d-Za].value));else if("Main"==Z)switch(a.code){case "Backquote":Md(Y(1,k().step));break;case "KeyQ":case "KeyA":va("Main");break;case "KeyW":case "KeyZ":va("BallBounce");break;case "KeyE":va("BallSize");
break;case "KeyR":va("TubeHeight");break;case "KeyT":b.isAnyTubeImproved&&va("Abilities")}}function Qh(){return Fa?(dd("Starting KongregateAPI... FAILED",'<div class="text-center">May be your ad blocker or security preferences prevent the game connecting to Kongregate servers.<br/>Try disabling your ad blocker or adding exceptions for kongregate.com and then refresh game page.<br/>Chrome has begun blocking Flash by default, please <a href="https://helpx.adobe.com/flash-player/kb/enabling-flash-player-chrome.html" target="_blank">enable flash</a> and try again.</div>',
nj,oj),!1):!0}function oj(){Fa=!1;return!0}function pj(){return ba}function ca(){if(!ba)return!1;if(M)return!0;try{if(window.parent.kongregate)return M=window.parent.kongregate,Fa&&(Fa=!1,dd("Starting KongregateAPI... SUCCESS","",qj)),eg(),M.services.addEventListener("login",rj),!0}catch(a){}return!1}function rj(a){eg()}function eg(){I.isGuest=M.services.isGuest();I.userId=M.services.getUserId();I.userName=M.services.getUsername();I.token=M.services.getGameAuthToken();I.isGuest||jd()}function Tf(){return ca()&&
!I.isGuest}function sj(){ca()&&M.services.showRegistrationBox()}function fg(a){a=new g(a);var b=1<a.e?Math.log(a.e)/tj:0;return Math.max(0,a.e<b?a.e:Math.floor(b))}function gg(a){var b=1<a?Math.log(a)/uj:0;return Math.max(0,a<b?Math.floor(a):Math.floor(b))}function $h(a){a.success&&(jd(),x("BuyConfirm","Premium"))}function jd(){ca()&&M.mtx.requestUserItemList(null,vj)}function vj(a){if(a.success){for(var d=!1,c=0;c<a.data.length;c++){var e=a.data[c],f="k"+e.id;if(e.identifier in K&&!(f in b.premium.boughtPackList)){d=
b.premium.boughtPackList[f]=e.identifier;if(d in K){b.premium.premiumMoney+=K[d].premiumMoney;if(K[d].onBuyFnc)K[d].onBuyFnc();K[d].buyOnce&&(b.premium.isSpecPackBought[d]=!0);b.kongUserId=I.userId;b.kongUser=I.userName;C("upgrade")}var d=!0,g=wj*K[e.identifier].price;x("BuySuccess","Premium",e.identifier,K[e.identifier].price);var h=g,l={id:f,affiliation:"Kongregate"};h&&(l.revenue=h);ga("ecommerce:addTransaction",l);h=e.identifier;e={id:f,name:e.identifier};h&&(e.sku=h);e.category="premium packs";
g&&(e.price=g);e.quantity=1;ga("ecommerce:addItem",e);ga("ecommerce:send")}}d&&aa(!0)}}function xj(a,b,c){c&&!Nd&&c.version&&"1.3.1.1"<c.version&&(Od=Nd=!0);Pd=!1}function Re(){setTimeout(function(){Nd||(Pd||(Pd=!0,hg(yj+zj,xj)),Re())},3E5)}function Le(a){a&&(b.abilitiesFreeRefundCnt=1);b.isAnyAbilityBought=!1;b.abilities=[];for(a=0;6>a;a++){b.abilities[a]={points:b.tubeImprovesMax[a],levels:{},queueSizeMax:1,queue:[],currentAbility:0,autoJumpKoef:0,energyMultDC:new g(1),preventWeakBubbleKoef:0};
for(var d in w)w.hasOwnProperty(d)&&(b.abilities[a].levels[d]={lvlMax:0,lvl:0,ptsPrice:w[d].ptsPrice,heightDC:new g(0),effectMultDC:w[d].initEffectMultDC?new g(w[d].initEffectMultDC):new g(0)});var c=a;b.abilities[c].energyMultDC=new g(1);Qd(c)}}function Qd(a){b.abilities[a].autoJumpKoef=0;b.balls[a].tmpDropHeight=0}function ig(a){return b.abilities[a].points}function jg(){0<b.abilitiesFreeRefundCnt&&(b.abilitiesFreeRefundCnt+=-1);Le(!1)}function Rd(){return b.isAnyAbilityBought}function ya(a){return 0<
b.abilities[a].queue.length}function Aj(a){return ya(a)?w[b.abilities[a].queue[b.abilities[a].currentAbility]].name:""}function Fd(a){return ya(a)?b.abilities[a].levels[b.abilities[a].queue[b.abilities[a].currentAbility]].heightDC:new g(0)}function Bj(a){v=a}function Cj(){v=-1}function Dj(){return v}function Zf(){return-1!=v}function kg(a,d){var c=w[d].levelMax;return 0<c&&c==b.abilities[a].levels[d].lvlMax}function Sa(a,d,c){return kg(a,d)?0:N(b.abilities[a].points,b.abilities[a].levels[d].lvl,c,
0==w[d].levelMax?0:w[d].levelMax-b.abilities[a].levels[d].lvlMax,b.abilities[a].levels[d].ptsPrice,w[d].ptsPriceRate)}function Sd(a,d,c){c=Sa(a,d,c);return 1>=c?b.abilities[a].levels[d].ptsPrice:E(b.abilities[a].levels[d].ptsPrice,w[d].ptsPriceRate,c).toNumber()}function lg(a,d,c){return 0<Sa(a,d,c)&&ea(b.abilities[a].points,c)>=Sd(a,d,c)}function mg(a,d,c){var e=b.abilities[a].levels[d];if(e.lvl!=c&&(c>e.lvlMax?c=e.lvlMax:1>c&&(c=1),e.lvl=c,e.heightDC=w[d].heightDCFnc(c),e.effectMultDC=w[d].effectMultDCFnc(c),
w[d].passiveAbility))w[d].onActivateFnc(a,e.effectMultDC)}function ng(a,d){b.abilities[a].queue.splice(d,1);b.abilities[a].currentAbility>=d&&0<b.abilities[a].currentAbility&&b.abilities[a].currentAbility--}function Td(a){var d=b.balls[a],d=d.height-d.r;Hc[a]=1<d?Fd(a).sub(Ed(a)).toNumber()*Math.sqrt(8/(b.gravity*d)):0}function og(a){if(ya(a)){var d=b.balls[a];if(1<d.height-d.r)return Hc[a]}return 0}function Ej(a,b){a.onload=function(){Ud[b]=!0;for(var a=0;6>a;a++)if(!Ud[a])return;Vd=!0;Wd=!1}}function pg(a){var d=
b.tubes[a].amplifierUpgPriceDC,c=b.tubes[a].improvementLevel,e=d.mul(10),f=5,u=1;if(0<c){var c=d.mul(g.pow(1.15,10999)),h=e.mul(g.pow(100,b.tubes[a].ballSizeMax-5));c.lt(h)&&(f=Math.max(f,b.tubes[a].ballSizeMax-Math.floor(g.ln(c.div(e)).toNumber()/qg)),u=f/5,u*=u*u)}d=d.mul(b.achievementsMult[O.achBouncer]);b.balls[a]={active:b.tubes[a].active,height:f,y:f,r:f,v:0,heightTotalDC:new g(0),tmpDropHeight:0,sizeUpgPriceDC:e,weight:u,bounceCnt:10,bounceKoefDC:Xd(10),bounceUpgPriceDC:d};Hc[a]=0;mb[a]=!1}
function Yd(){return b.reset.bounceMult*b.boost.bounceMult*b.premium.premiumBounceMult*b.events.eventBounceMult}function Xd(a){return g.pow(.01,g.div(1,g.mul(a,Yd())))}function P(){for(var a=0;6>a;a++)b.balls[a].bounceKoefDC=Xd(b.balls[a].bounceCnt)}function rg(a,d){b.balls[a].height=d;b.balls[a].y=d;b.balls[a].v=0;Zd(a);Td(a);mb[a]=!1}function Zd(a){if(b.balls[a].height<b.balls[a].r)b.balls[a].height=b.balls[a].r;else{var d=b.tubes[a].height-b.balls[a].r;b.balls[a].height>d&&(b.balls[a].height=d)}b.balls[a].y>
b.balls[a].height?(b.balls[a].y=b.balls[a].height,b.balls[a].v=0):b.balls[a].y<b.balls[a].r&&(b.balls[a].y=b.balls[a].r,b.balls[a].v=0)}function xc(){return b.ballStyle}function Fj(a){b.ballStyle=a;id()}function id(){Bd=wc[xc()].colors;sg=wc[xc()].textColors}function p(a,b,c,e,f,g){a.fillStyle=f||"#ff0";a.strokeStyle=g||T().circleStrokeColor;a.beginPath();a.arc(b,c,e,0,2*Math.PI,!0);a.fill();a.stroke()}function tg(a,d){var c=b.balls[a];return 1<d?g.log(1/d,c.bounceKoefDC).trunc().toNumber():0}function Ic(a,
d){return b.tubes[a].amplifierDC.mul(b.gravity/Jc).mul(d).div(100).mul(b.balls[a].weight).mul(b.reset.densityMult).mul(b.reset.totalMult).mul(b.premium.premiumEnergyMult*b.events.eventEnergyMult*b.boost.energyMult*b.boost.densityMult)}function Ta(){for(var a=0;6>a;a++)rg(a,b.tubes[a].height)}function ug(){for(var a=0;6>a;a++)if(0!=b.balls[a].v||1<b.balls[a].height-b.balls[a].r)return!0;return!1}function Ed(a){return b.balls[a].heightTotalDC}function $d(a){return b.tubes[a].ballSizeMax}function vg(a){return $d(a)<=
b.balls[a].r}function wg(a){return $d(a)-b.balls[a].r}function Kc(a,d){return N(b.energyDC,b.balls[a].r,d,wg(a),b.balls[a].sizeUpgPriceDC,100,qg)}function ae(a,d){var c=Kc(a,d);return 1>=c?new g(b.balls[a].sizeUpgPriceDC):E(b.balls[a].sizeUpgPriceDC,100,c)}function xg(a,d){if(!b.tubes[a].active)return!1;var c=Kc(a,d);return!vg(a)&&0<c&&wg(a)>=c&&Jb(b.energyDC,d).gte(ae(a,d))}function be(a,d,c){"undefined"===typeof c&&(c=1);var e=0<c&&1!=c;e&&(b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.mul(c));
if(0==c||xg(a,d)){var f=Kc(a,d);0<c&&Q(ae(a,d).neg());b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.mul(g.pow(100,f));d=1+f/b.balls[a].r;b.balls[a].weight=b.balls[a].weight*d*d*d;b.balls[a].r+=f;Zd(a)}e&&(b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.div(c))}function bg(a){B();be(a,k());C("upgrade")}function Lc(a,d){return N(b.energyDC,b.balls[a].bounceCnt,d,0,b.balls[a].bounceUpgPriceDC,1.03,Gj)}function ce(a,d){var c=Lc(a,d);return 1>=c?new g(b.balls[a].bounceUpgPriceDC):E(b.balls[a].bounceUpgPriceDC,
1.03,c)}function yg(a,d){return b.tubes[a].active?0<Lc(a,d)&&Jb(b.energyDC,d).gte(ce(a,d)):!1}function de(a,d,c){"undefined"===typeof c&&(c=1);var e=0<c&&1!=c;e&&(b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(c));if(0==c||yg(a,d)){var f=Lc(a,d);0<c&&Q(ce(a,d).neg());b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(g.pow(1.03,f));b.balls[a].bounceCnt+=f;b.balls[a].bounceKoefDC=Xd(b.balls[a].bounceCnt)}e&&(b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.div(c))}function ag(a){B();
de(a,k());C("upgrade")}function Ne(){za=Qa=la=!1;m={posX:0,posY:0,size:sb,fontSize:Mc,opacity:0,valueDC:new g(0)};Gd||ee||(ee=!0,nb=new Image,nb.onload=function(){Gd=!0;ee=!1},nb.src="imgs/bubble-anim.png")}function zg(a,b){var c=Math.floor(m.size/2);m.posX=a-c;m.posY=b-c;m.centerX=a;m.centerY=b}function R(){b.gravity=Jc*b.reset.gravityMult*b.premium.premiumGravityMult*b.events.eventGravityMult*b.boost.gravityMult}function Me(){b.energyDC=new g(0);b.energyMaxDC=new g(100);b.energyLevelDC=new g(0);
b.energyUpgPrice=b.achievementsMult[O.achEnergyStorage];b.energyExtRemain=0}function Q(a){a=new g(a);b.energyMaxDC.isFinite()||(b.energyMaxDC=new g(100));b.energyDC.isFinite()||(b.energyDC=new g(b.energyMaxDC));a.isFinite()||(a=new g(b.energyMaxDC));if(a.gt(0)){var d=a;ha()&&(b.idleEnergyDC=b.idleEnergyDC.add(d))}var d=b.energyDC.add(a),c=new g(0);if(d.gt(b.energyMaxDC)&&(c=d.sub(b.energyMaxDC),d=new g(b.energyMaxDC),0<b.reset.energyExtLevel)){var c=c.add(b.energyExtRemain),e=b.energyUpgPrice/b.reset.energyExtCapacityMult,
f=1+e,u=c.div(f).trunc();b.energyMaxDC=b.energyMaxDC.add(u);d=new g(b.energyMaxDC);6>b.energyMaxDC.e?(b.energyExtRemain=c.sub(u.mul(f)).toNumber(),b.energyExtRemain>=e&&(b.energyMaxDC=b.energyMaxDC.add(1),d=d.add(b.energyExtRemain-e),b.energyExtRemain=0)):b.energyExtRemain=0}a.gt(0)&&(b.statistics.energyDC=b.statistics.energyDC.add(d).sub(b.energyDC));b.energyDC=new g(d);a.lt(0)&&(b.achievementStatsDC[O.achEnergyStorage]=b.achievementStatsDC[O.achEnergyStorage].sub(a));b.statistics.energyDC.gt(0)&&
(a=g.log10(g.div(b.statistics.energyDC,ff)).toNumber()-b.reset.inactiveTotal,0<a&&(b.reset.inactive=a))}function Nc(a){var d=new g(0);if("object"===typeof a&&a.step){var c=a.rel,e=a.step;b.energyLevelDC.gt(Ue)&&(e=1,-1==c&&(c=0));if(1==c)d=b.energyDC.div(b.energyUpgPrice).trunc(),d.mul(b.energyUpgPrice).gt(b.energyDC)&&(d=d.mul(.999999).trunc());else if(0<c)d=b.energyDC.mul(c).div(b.energyUpgPrice).trunc();else if(0==c)return new g(e);a=b.energyLevelDC;d=-1==c?new g(e):d;c=e;1==c?a=new g(d):(d=g.add(a,
d).div(c).trunc().mul(c),a=d.gt(a)?g.sub(d,a):new g(0));return a}return new g(a)}function fe(a){return g.max(1,Nc(a)).mul(b.energyUpgPrice)}function ge(a){a=Nc(a);var d=fe(a);return a.gt(0)&&d.gt(0)&&b.energyDC.gte(d)}function Ag(a){if(ge(a)){var d=Nc(a);b.energyLevelDC=b.energyLevelDC.add(d);b.energyMaxDC=b.energyMaxDC.add(d);Q(fe(a).neg())}}function Md(a){B();Ag(a);C("upgrade")}function Dd(a){var d=new g(0);if(b.tubes[a].active){var c=b.balls[a].height-b.balls[a].r;1<c&&(d=Ic(a,c).div(Math.sqrt(8*
c/b.gravity)))}return d}function Cd(){for(var a=new g(td()),b=0;6>b;b++)a=a.add(Dd(b));return a}function he(){ie=!0}function Oe(){b.idleEnergyDC=new g(0);b.idleEnergyBonusDC=new g(0);b.idleEnergyTransferSpeedDC=new g(0);B()}function ta(){Ua()||Oe()}function B(){ha()&&(b.idleEnergyBonusDC=b.idleEnergyDC.mul(je()),b.idleEnergyTransferSpeedDC=b.idleEnergyBonusDC.div(Hj),b.idleEnergyDC=new g(0));b.idleEnergyTimer=-ud}function Va(){return b.reset.idleMult*b.premium.premiumIdleMult*b.events.eventIdleMult*
b.boost.idleMult}function ke(){return(b.reset.idleMultTime+b.boost.idleTimeInc)*b.premium.premiumIdleMultTime*b.events.eventIdleMultTime}function Ua(){return 1<Va()}function le(){return Ua()&&0>b.idleEnergyTimer?-b.idleEnergyTimer:1E300}function Bg(){var a=le();return 0<a&&a<=Ij}function ha(){return Ua()&&0<=b.idleEnergyTimer}function Jj(){return g.pow(Va(),ke()).sub(1)}function je(){return ha()?g.pow(Va(),Math.min(ke(),(ha()?b.idleEnergyTimer:0)/3600)).sub(1):new g(0)}function Ke(a){if(a)for(b.tubeInfo=
"percent",b.tubeImprLevelMax=0,b.tubeImprovesMax=[],a=0;6>a;a++)b.tubeImprovesMax[a]=0;ua=0;b.tubes=[];W=[];D=[];tb=[];ub=[];for(a=0;6>a;a++)Cg(a,0==a,0);hd();me(2E3);b.balls=[];for(a=0;6>a;a++)pg(a);b.balls[0].active=!0;id();if(!Vd&&!Wd)for(Wd=!0,a=0;6>a;a++)Oc[a]=new Image,Ud[a]=!1,Ej(Oc[a],a),Oc[a].src="imgs/classicballs/ball"+(a+1)+".png"}function hb(a){return 0==a?new g(1):g.pow(10,6>a?5+(10+5*(a-2))*(a-1)/2:Math.floor(55+(50+.2*(a-6))*(a-5)/2))}function Cg(a,d,c){var e=a+6*c,f=hb(e),u=f.mul(10),
h=36+10*e,l=new g(u);if(3<a||0<c)l=qc[a][c]?l.mul(qc[a][c]):l.mul(2E4).mul(g.exp(.5*Math.pow(e-12,.808)));var q=50+10*e,m=new g(l);if(0<c){for(var k=h,n=1;6>n;n++)k+=36+10*(e+n);e=Math.floor((pa-13-53)/(Dg/k));k=l.mul(g.pow(1.15,10999));n=m.mul(g.pow(1.1,e-q));k.lt(n)&&(q=Math.max(q,e-Math.floor(g.ln(k.div(m)).toNumber()/Eg)))}b.tubes[a]={active:d,improvementLevel:c,improvePriceDC:hb(a+6*(c+1)).mul(10),width:h,ballSizeMax:h/2-3,height:q,heightUpgPriceDC:m,amplifierLevel:1,amplifierDC:new g(f),amplifierUpgPriceDC:new g(l),
amplifierIncDC:new g(f)};tb[a]=new g(u);ub[a]=!1}function Qe(){for(var a=ua=0;6>a;a++)ua<b.tubes[a].improvementLevel&&(ua=b.tubes[a].improvementLevel)}function me(a){if(a>Da){0==Da&&(vb[1]={multDC:new g(b.tubes[0].amplifierDC),incDC:new g(b.tubes[0].amplifierIncDC)},Da=1);for(var d,c=new g(vb[Da].multDC),e=new g(vb[Da].incDC),f=Da+1;f<=a;f++){c=c.add(e);if(0==f%ia[0].level)for(var u=Fg;0<=u;u--)if(d=ia[u],0==f%d.level){c=c.mul(d.mult);e=e.mul(d.mult);break}vb[f]={multDC:new g(c),incDC:new g(e)}}Da=
a}return vb[a]}function hd(){var a,d=!1,c=0;for(a=0;6>a;a++)c+=b.tubes[a].width,0<b.tubes[a].improvementLevel&&(d=!0);ra=d?Dg/c:1;Wa=Math.floor((pa-13-53)/ra);for(a=0;6>a;a++)d=Wa-b.tubes[a].height,0>d?Pc(a,d):Gg(a)}function Gg(a){D[a]={width:b.tubes[a].width*ra,height:b.tubes[a].height*ra};D[a].x=0==a?1:D[a-1].right+6;D[a].bottom=pa-13;D[a].y=D[a].bottom-D[a].height;D[a].right=D[a].x+D[a].width;W[a]={x:D[a].x+D[a].width/2,y:D[a].bottom}}function Kj(a){return tb[a]}function Qc(a){return tb[a].lte(b.energyDC)}
function ne(a){var d=b.tubes[a];!d.active&&Qc(a)&&(d.active=!0,b.balls[a].active=!0,Q(tb[a].neg()),Ja(),x("Buy","Game","Tube"+a))}function Rc(a){return b.tubes[a].improvePriceDC}function wb(a){return Rc(a).lte(b.energyDC)}function Sc(a){return 0<b.tubes[a].improvementLevel&&10>ua-b.tubes[a].improvementLevel}function oe(a,d){if(d&&Sc(a)||wb(a)){var c;d||Q(Rc(a).neg());var e=b.tubes[a].improvementLevel+(d?-1:1);Cg(a,!0,e);pg(a);b.abilities[a].energyMultDC=new g(1);Qd(a);hd();Ja();b.isAnyTubeImproved||
(pe=b.isAnyTubeImproved=!0);e>b.tubeImprLevelMax&&(b.abilitiesFreeRefundCnt+=e-b.tubeImprLevelMax,b.tubeImprLevelMax=e,b.statistics.improvementMax=e+1);e>b.tubeImprovesMax[a]&&(b.abilities[a].points+=e-b.tubeImprovesMax[a],b.tubeImprovesMax[a]=e);if(e>ua){ua=e;var f;for(c=0;6>c;c++)for(f=!0;f&&c!=a&&10<ua-b.tubes[c].improvementLevel;)b.tubes[c].active?wb(c)?oe(c,!1):f=!1:Qc(c)?ne(c):f=!1}else d&&Qe();c=a+6*e;b.virtTubeIdMax<c&&(b.virtTubeIdMax=c,0==a&&x("Improve","Game","VirtualTube"+c))}}function Lj(a){b.showAmplifierLevelAsMult=
a}function Hg(a){return b.tubes[a].amplifierLevel}function Xa(a,d){return N(b.energyDC,Hg(a),d,0,b.tubes[a].amplifierUpgPriceDC,1.15,Mj)}function qe(a,d){var c=Xa(a,d);return 1>=c?new g(b.tubes[a].amplifierUpgPriceDC):E(b.tubes[a].amplifierUpgPriceDC,1.15,c)}function Ig(a,d){return b.tubes[a].active?0<Xa(a,d)&&Jb(b.energyDC,d).gte(qe(a,d)):!1}function Nj(){return ia[0].level}function Oj(a){return b.tubes[a].amplifierLevel%ia[0].level}function Pj(a){var d=ia[0].mult;a=Math.ceil((b.tubes[a].amplifierLevel+
1)/ia[0].level)*ia[0].level;for(var c=Fg;0<c;c--)if(0==a%ia[c].level){d=ia[c].mult;break}return d}function re(a,d){var c=new g(b.tubes[a].amplifierDC),e=new g(b.tubes[a].amplifierIncDC);if(0<d)var f=b.tubes[a].amplifierLevel,u=f+d,f=me(f),u=me(u),c=c.div(f.multDC).mul(u.multDC),e=e.div(f.incDC).mul(u.incDC);return{amplDC:c,incDC:e}}function Tc(a,d,c){"undefined"===typeof c&&(c=1);var e=0<c&&1!=c;e&&(b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.mul(c));if(0==c||Ig(a,d)){d=Xa(a,d);
0<c&&Q(qe(a,d).neg());b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.mul(g.pow(1.15,d));var f=re(a,d);b.tubes[a].amplifierDC=f.amplDC;b.tubes[a].amplifierIncDC=f.incDC;b.tubes[a].amplifierLevel+=d}e&&(b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.div(c))}function $f(a){B();Tc(a,k());C("upgrade")}function Uc(a,d){return N(b.energyDC,b.tubes[a].height,d,Wa-b.tubes[a].height,b.tubes[a].heightUpgPriceDC,1.1,Eg)}function se(a,d){var c=Uc(a,d);return 1>=c?new g(b.tubes[a].heightUpgPriceDC):
E(b.tubes[a].heightUpgPriceDC,1.1,c)}function Jg(a){return Wa<=b.tubes[a].height}function Kg(a,d){if(!b.tubes[a].active)return!1;var c=Uc(a,d);return!Jg(a)&&0<c&&Wa-b.tubes[a].height>=c&&Jb(b.energyDC,d).gte(se(a,d))}function Pc(a,d,c){"undefined"===typeof c&&(c=1);var e=0<c&&1!=c;e&&(b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.mul(c));if(0==c||0>d||Kg(a,d))d=0>d?d:Uc(a,d),0<c&&0<d&&Q(se(a,d).neg()),b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.mul(g.pow(1.1,d)),b.tubes[a].height+=
d,Gg(a),Ja();e&&(b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.div(c))}function cg(a){B();Pc(a,k());C("upgrade")}function Qj(){return!1}function Rj(){var a=this;a.adsUrl="https://r.almostidle.com/";a.storageClientId="AiAdsClientId";a.clientId=0;a.adId=0;a.adlId=0;a.getAdIntervalMsec=1E4;a.checkStatusIntervalMsec=1E3;a.adStatus="";a.cbStatusChanged=null;a.getAdlId=function(){return a.adlId};a.isAdAvailable=function(){return 0<a.adId};a.getAdId=function(){var b=function(b,d,f){if(f){if(0==
a.clientId||a.clientId!=f.cid)a.clientId=f.cid,window.localStorage[a.storageClientId]=a.clientId;a.adId=f.aid;a.adlId=f.adlid}else a.adId=0;0==a.adId&&setTimeout(a.getAdId,a.getAdIntervalMsec)};a.isAdAvailable()||hg(a.adsUrl+"get.php?cid="+a.clientId,b)};a.checkAdStatus=function(){var b=function(b,d,f){a.adStatus!=f&&(a.adStatus=f,null!=a.cbStatusChanged&&a.cbStatusChanged(f));"init"==f||"started"==f?setTimeout(a.checkAdStatus,a.checkStatusIntervalMsec):(a.adId=0,a.getAdId())};a.isAdAvailable()&&
Cc(a.adsUrl+"info.php?aid="+a.adId,b)};a.init=function(b){a.cbStatusChanged=b;b=window.localStorage[a.storageClientId];"undefined"!==b&&(a.clientId=b);a.getAdId()};a.getAdUrl=function(){return a.isAdAvailable()?a.adsUrl+"open.php?aid="+a.adId:""};a.openAdUrl=function(){var b=a.getAdUrl();b&&(window.open(b,"_blank"),a.checkAdStatus())}}function Sh(a){var b=new Rj;b.init(a);return b}function Xf(a,b,c){b=!1;var e=a.toString()+" "+c;if(200==a&&c)if(0==c.indexOf("error"))e=c.substr(6);else if("load"==
Aa||"ok"==c)b=!0;Aa=!1;qb&&(qb(b,b?c:e),qb=null)}function Sj(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}return"undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:!1}function Cc(a,b,c){var e=Sj();e.onreadystatechange=function(){4==e.readyState&&b(e.status,e.getAllResponseHeaders(),e.responseText)};a+=(-1==a.indexOf("?")?"?":"&")+"rnd="+Math.random();c?(e.open("POST",a),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),
e.send(c)):(e.open("GET",a),e.send(null))}function hg(a,b,c){Cc(a,function(a,c,g){var h;try{h=JSON.parse(g)}catch(l){h={}}b(a,c,h)},c)}window.location.search&&window.location.search.replace("?","").split("&").reduce(function(a,b){var c=b.split("=");a[decodeURIComponent(c[0])]=decodeURIComponent(c[1]);return a},{});var H=angular.module("game",["ngAnimate","ngSanitize","ui.bootstrap.m"]),g=new Decimal.clone({precision:10,toExpPos:10,toExpNeg:-7,modulo:Decimal.ROUND_DOWN});H.controller("AbilitiesController",
function(){this.isAnyAbilityBought=Rd;this.isAnyAbilityActive=ya;this.getAbilityPoints=ig;this.getActiveAbilityName=Aj;this.getTotalDropHeightDC=Ed;this.getActiveAbilityHeightMaxDC=Fd;this.getActiveAbilityEstTime=og;this.getActiveAbilityEstTimeStr=function(a){return Ib(og(a))};this.showTubeAbilityDlg=Bj;this.hideTubeAbilityDlg=Cj;this.isTubeAbilityDlgVisible=Zf;this.abilityList=w;this.getAbilityName=function(a){return w[a].name};this.getAbilityLevelMax=function(a){return 0==w[a].levelMax?"":" (max "+
w[a].levelMax+")"};this.getSelectedTubeId=Dj;this.isSelectedTubeFirst=function(){return 0==v};this.isSelectedTubeLast=function(){return 5==v};this.getCurrentAbilityPoints=function(){return ig(v)};this.getCurrentAbilityDescr=function(a){var c=v;return w[a].descFnc(0<b.abilities[c].levels[a].lvl?b.abilities[c].levels[a].effectMultDC:w[a].effectMultDCFnc(1))};this.getCurrentAbilityLevel=function(a){return b.abilities[v].levels[a].lvl};this.getCurrentAbilityLevelMax=function(a){return b.abilities[v].levels[a].lvlMax};
this.getCurrentAbilityHeightDC=function(a){return b.abilities[v].levels[a].heightDC};this.abilExampleVisible=!1;this.setAbilityExampleVisible=function(a){this.abilExampleVisible=a};this.isAbilityExampleVisible=function(){return this.abilExampleVisible};this.abilDescVisible={};for(var a in w)w.hasOwnProperty(a)&&(this.abilDescVisible[a]=!1);this.toggleAbilityDescrVisible=function(a){this.abilDescVisible[a]=!this.abilDescVisible[a]};this.isAbilityDescrVisible=function(a){return this.abilDescVisible[a]};
this.getCurrentVisualAbilityEffectMultDC=function(a){return w[a].visualiseEffectFnc(b.abilities[v].levels[a].effectMultDC)};this.getCurrentAbilityLevelUpgradeInc=function(a){return Sa(v,a,k())};this.getCurrentVisualAbilityEffectMultUpgradeIncDC=function(a){var c;c=v;var e=k();c=(e=Sa(c,a,e))?w[a].effectMultDCFnc(b.abilities[c].levels[a].lvlMax+e).sub(b.abilities[c].levels[a].effectMultDC):new g(0);a=w[a].visualiseEffectFnc(c);return c.lt(0)?a:"+"+a};this.getCurrentAbilityHeightUpgradeIncDC=function(a){var c=
v,e=k();return(e=Sa(c,a,e))?w[a].heightDCFnc(b.abilities[c].levels[a].lvlMax+e).sub(b.abilities[c].levels[a].heightDC):new g(0)};this.getCurrentAbilityUpgradePrice=function(a){return Sd(v,a,k())};this.isCurrentAbilityCanBeBought=function(a){return b.tubeImprovesMax[v]>=w[a].imprLvlMin};this.isCurrentAbilityHidden=function(a){return b.tubeImprovesMax[v]<=w[a].imprLvlMin-2};this.isCurrentAbilityUpgradeable=function(a){return lg(v,a,k())};this.upgradeCurrentAbility=function(a){B();var c=v,e=k();lg(c,
a,e)&&(e=Sa(c,a,e),b.abilities[c].points-=Sd(c,a,e),b.abilities[c].levels[a].lvlMax+=e,mg(c,a,b.abilities[c].levels[a].lvlMax),b.abilities[c].levels[a].ptsPrice*=Math.pow(w[a].ptsPriceRate,e),b.isAnyAbilityBought=!0,x("Tube","Upgrade",a+c,b.abilities[c].levels[a].lvlMax));C("upgrade")};this.isCurrentAbilityAvailable=function(a){return 0<b.abilities[v].levels[a].lvl};this.isCurrentAbilityLevelMax=function(a){var c=v;return 0==b.abilities[c].levels[a].lvlMax||b.abilities[c].levels[a].lvl==b.abilities[c].levels[a].lvlMax};
this.isCurrentAbilityLevelCap=function(a){return kg(v,a)};this.isAbilityLevelChangeable=function(a){return w[a].allowChangeLevel};this.setCurrentAbilityLevel=function(a,b){mg(v,a,b)};this.isCurrentAbilityActive=function(a){return-1!=b.abilities[v].queue.indexOf(a)};this.isCurrentAbilityActiveByQueueIdx=function(a){return a==b.abilities[v].currentAbility};this.addCurrentAbilityToQueue=function(a){B();var c=v;b.abilities[c].queue[Math.min(b.abilities[c].queueSizeMax-1,b.abilities[c].queue.length)]=
a};this.removeCurrentAbilityFromQueue=function(a){B();ng(v,a)};this.changeCurrentAbilityPosInQueue=function(a,c){B();var e=v,f=b.abilities[e].queue[a],g=b.abilities[e].currentAbility;g==a&&(g+=c);ng(e,a);b.abilities[e].queue.splice(a+c,0,f);b.abilities[e].currentAbility=g};this.getQueue=function(){return b.abilities[v].queue};this.getCurrentQueueSize=function(){return b.abilities[v].queue.length};this.getCurrentQueueSizeMax=function(){return b.abilities[v].queueSizeMax}});H.controller("AchievementsController",
function(){this.achievementList=V;this.achievementsLevel=function(){return b.achievementsLevel};this.achievementsMult=function(){return b.achievementsMult};this.achievementStatsDC=function(){return b.achievementStatsDC};this.getAchievementReq=function(a){return Te(V[a],"reqValueDC",b.achievementsLevel[a]).toString()};this.isAchievementLevelCap=function(a){return 0<V[a].levelMax&&V[a].levelMax==b.achievementsLevel[a]}});H.controller("BoostDailyController",function(){this.isDlgVisible=function(){return Cb};
this.hideDlg=Dh;this.applyAndHideDlg=Eh;this.getDaysPlayedInRow=Fe;this.getBoostType=Fh;this.isGemsReward=function(){return b.boost.daily.generatedDailyBoost==Bb};this.getGemsValue=function(){return b.boost.daily.generatedDailyValue};this.getBoostValue=function(){return 100*b.boost.daily.generatedDailyValue};this.getBoostDayMult=ad;this.getBoostTotalValue=function(){return 100*b.boost.daily.generatedDailyValue*ad()};this.getBoostDuration=function(){return b.boost.daily.generatedDailyTime+" hour"+
(1<b.boost.daily.generatedDailyTime?"s":"")};this.showPremiumConfirmDialog=Xe;this.getRewardButtonText=function(){return bd()&&!this.isGemsReward()?"Replace current reward with new one":"Get reward"}});H.controller("BuyAmountController",function(){this.buyAmountStepList=rb;this.buyAmountRelList=Gc;this.setBuyAmountValueRel=Yc;this.setBuyAmountValueStep=Zc;this.getBuyAmountObject=k;this.totalListLen=dg;this.isBuyAmountStepPosRight=Ya;this.getBuyAmountStepHotKey=rh;this.getBuyAmountRelHotKey=sh;this.hintVisible=
!1;this.setHintVisible=function(a){this.hintVisible=a};this.isHintVisible=function(){return this.hintVisible}});H.controller("CloudController",function(){this.isCloudDialogVisible=bj;this.hideCloudDialog=dj;this.isCloudOperationsAllowed=Bc;this.isCloudLoadAllowed=Zi;this.isCloudSaveAllowed=Uf;this.getSaveButtonText=function(){var a;a=Kd-(new Date).getTime();a=0<a?a/1E3:0;return 0<a?"Next save to the cloud will be available in "+Math.ceil(a)+" seconds":"&nbsp;Save&nbsp;"};this.saveToCloud=Xi;this.isSaveToCloudStarted=
Jd;this.isSaveToCloudSuccess=Vi;this.isSaveToCloudError=Wi;this.isLoadFromCloudStarted=Id;this.isLoadFromCloudSuccess=Dc;this.isLoadFromCloudEmpty=aj;this.isLoadFromCloudError=$i;this.getCloudDataTime=ej;this.getCloudDataEnergyDC=gj;this.loadGameFromCloudData=function(){Fc=!1;Dc()&&(x("CloudLoadOK","Settings"),Eb(!1,Ec,!0),X="")}});H.controller("DebugController",function(){this.skipTime=sa;this.outsideIdleLoopExecTimeLast=function(){return Lg};this.outsideIdleLoopExecTimeMax=function(){return Mg};
this.idleExecTimeLast=function(){return Ng};this.idleExecTimeMax=function(){return Og};this.execTimeLast=function(){return Lg+Ng};this.execTimeMax=function(){return Mg+Og};this.addMoney=function(a){};this.addPremium=function(a){};this.addEnergyMax=function(a){};this.saveSizeMax=function(){return Tj};this.savePackedSizeMax=function(){return Uj};this.getAccelerationTime=function(){return 1};this.setAccelerationTime=function(a){};this.getFixAcceleration=function(){return 0};this.setFixAcceleration=function(a){};
this.accelerationTimeList=Vj;this.dbgFixAccelerationList=Wj;this.addDayToDailyReward=function(a){};this.isAutoPlay=function(){return Pg&&!Qg};this.isAutoPlaySimUser=function(){return Pg&&Qg};this.toggleAutoPlay=function(a){};this.getAutoPlayTime=Pi;this.dbgFakeKongregateLogin=Qi;this.dbgFakeKongregateAPIConnectionSuccess=Ri;this.isCsvReady=function(){return!1};this.onCsvClick=function(){}});H.controller("EventsController",function(){this.eventsEnergyPerc=function(){return Math.floor(100*b.events.eventEnergyMult-
100)};this.eventsBouncePerc=function(){return Math.floor(100*b.events.eventBounceMult-100)};this.eventsGravityPerc=function(){return Math.floor(100*b.events.eventGravityMult-100)};this.eventsIdleMultPerc=function(){return Math.floor(100*b.events.eventIdleMult-100)};this.eventsIdleMultTimePerc=function(){return Math.floor(100*b.events.eventIdleMultTime-100)};this.eventsMetaBonusIncPerc=function(){return Math.floor(100*b.events.eventMetaBonusInc)};this.eventList=ob;this.eventItemList=Ra;this.isEventActive=
fd;this.getEventTitle=Ui;this.eventOpen=Ti;this.getEventPage=Qf;this.getEventTime=function(){return md((ob[Ac].finishTime-(new Date).getTime())/1E3)};this.isEventItemActive=pb;this.getEventItemsCollectedCnt=Sf;this.isAnyEventItem=function(a){return 0<Sf(a)};this.eventItemsExpanded=[!0];this.toggleEventItems=function(a){this.eventItemsExpanded[a]=!this.eventItemsExpanded[a]};this.getToggleButtonText=function(a){return this.eventItemsExpanded[a]?"-":"+"}});H.controller("GameController",["$scope","$interval",
"$http",function(a,d,c){Eb();a.kongGameURL="http://www.kongregate.com/games/almostidle/idle-bouncer";a.gameVer="1.3.1.1";a.gameMouseDown=function(a){C("click")};a.gameMouseUp=function(a){rc=0};a.gameKeyDown=kj;a.gameKeyUp=lj;a.gameKeyPress=mj;a.isThemeCustom=Ai;a.getThemeFile=Bi;a.getThemeImgDir=Ee;a.energyDC=function(){return b.energyDC};a.energyMaxDC=function(){return b.energyMaxDC};a.energyPercent=function(){return b.energyDC.div(b.energyMaxDC).mul(100).toFixed(2)};a.getEnergyPerSecondDC=Cd;a.getInactiveMetaEnergy=
function(){return b.reset.inactive};a.getBgClass=function(){return"bg-"+b.bgStyle};a.visualScale=function(){return ra};a.hideSpikes=function(){return gb()};a.isResetSystemDialogVisible=ji;a.hideResetSystemDialog=li;a.processReset=function(){Mb=!1;Lb()&&(B(),Ua()&&b.idleEnergyBonusDC.gt(0)&&(Q(b.idleEnergyBonusDC),b.idleEnergyBonusDC=new g(0)),cf(),b.reset.freeRefundCnt++,0==b.statistics.reset&&x("Reset","ResetSystem","Active",b.reset.active),Ke(!1),Me(),Ne(),S=[],ld(),Ja());C("upgrade")};a.getTubeInfoType=
Nf;a.setTubeInfoType=Ni;a.tubes=function(){return b.tubes};a.balls=function(){return b.balls};a.abilities=function(){return b.abilities};a.isNewAchievementAvailable=function(){return Db};a.doClickCanvas=function(a){var c=a.offsetX;a=a.offsetY;var d;var h,g=m.size/2;d=c-m.centerX;h=a-m.centerY;la&&!Qa&&Math.abs(d)<=g&&Math.abs(h)<=g?(!za&&d*d+h*h<=g*g&&(Qa=!0,Q(m.valueDC),b.statistics.bubbleClicked++,b.achievementStatsDC[O.achBubbleGrow]=b.achievementStatsDC[O.achBubbleGrow].add(1),C("pop")),d=!0):
d=!1;if(!d)for(h=0;6>h;h++)if(d=D[h],b.tubes[h].active&&c>d.x&&c<d.right){rg(h,(W[h].y-a)/ra);Qd(h);break}B()};a.isShowOfflineStats=function(){return gd};a.offlineMoneyEarnedDC=function(){return g.max(0,b.energyDC.sub(Gb))};a.offlineTime=function(){return Se(Math.floor(Math.max(0,(new Date).getTime()-Pe)/1E3))};a.hideOfflineStats=function(){gd=!1};a.showDblOfflineBoostDialog=function(){a.hideOfflineStats();Ge("dblOffline")};a.isNewVersion=function(){return Od};a.reloadGame=Vh;a.isBoostDailyGenerated=
function(){return!Od&&b.boost.daily.isDailyBoostGenerated};a.showBoostDailyDlg=Ch;a.isShowEventWelcomeMsg=function(){return Ia};a.showEventWelcomeMsg=function(){Ia=!0};a.hideEventWelcomeMsg=function(){Ia=!1};a.isShowFirstImproveDlg=function(){return pe};a.hideFirstImproveDlg=function(){pe=!1};a.isShowNewBalanceAbilityDlg=function(){return vd};a.hideNewBalanceAbilityDlg=function(){vd=!1};a.isShowIdleModeHelp=function(){return ie};a.showIdleModeHelp=he;a.hideIdleModeHelp=function(){ie=!1};a.isShowChangeLog=
function(){return Rg};a.hideChangeLog=function(){Rg=!1};a.isSteamVersion=!1;a.isSteamInit=Qj;a.steamName=function(){return Xj};a.isKongregateVersion=!0;a.kongregateInfo=function(){return I};a.kongregateShowRegistrationBox=sj;a.isKongregate=pj;a.isKongregateAPI=ca;a.isKongregateUserLoggedIn=Tf;a.moneySignHTML='<img src="imgs/kred_single.png" class="premium-crystal-list-item"/>';a.convertMoney=function(a){return a};a.boostList=L;a.isAdsAvailable=function(){var a=ca();return a&&I.adsAvailable||!a&&(da?
da.isAdAvailable():!1)};a.showBoostDialog=Ge;a.isBoostDialogVisible=Ih;a.getBoostDialogHeader=Jh;a.getBoostDialogText=Kh;a.getBoostDialogButtonText=Lh;a.closeBoostDialog=Mh;a.getBoostBtnTitle=function(a){var c=L[a].title();a=b.boost.timers[a];0<a&&(c+="<br/><small><i>Boost time remain: "+Math.floor(a)+" second"+(1<a?"s":"")+"</i></small>");return c};a.isBoostActive=ze;a.isTutorialEnabled=zd;a.isTutorialPanelActive=Ci;a.isTutorialAnyStepActive=La;a.tutorialGetActiveStepText=Di;a.tutorialShowContinueButton=
Ei;a.tutorialOnClickContinue=Hi;a.isTutorialShowShadow=Gi;a.isTutorialStepNameHighlight=Fi;a.tutorialFinish=function(){If(!0)};a.hideWaitingMsg=Lf;a.isWaitingMsgVisible=Ii;a.getWaitingMsgText=Ji;a.getWaitingMsgInfo=Ki;a.getWaitingMsgTimeRemain=Li;d(function(){var a;a=(new Date).getTime();var d=Math.max(.001,(a-b.lastUpdateTime)/1E3);c&&86400<d&&(hj(d,c),d=100);var u;ab&&Ga?(u=Ha,Ga=ab=!1,Ha=0):u=!1;!1!==u&&(d=u);b.lastUpdateTime=a;a=d;d=Math.ceil(a/1);u=100<d?a/100:1;do{u>a&&(u=a);var d=u,h=void 0,
h=!1,l=void 0,q=void 0;for(q in L)L.hasOwnProperty(q)&&0<b.boost.timers[q]&&(!h||b.boost.timers[q]<h)&&(h=b.boost.timers[q],l=q);(h=h?{key:l,time:h}:null)&&h.time<u&&(u=h.time);h=le();h<u&&(u=h);for(var h=u,q=l=void 0,k=0;k<He;k++)for(;;)if(l=V[k],0==l.levelMax||b.achievementsLevel[k]<l.levelMax)if(q=Te(V[k],"reqValueDC",b.achievementsLevel[k]),null!==l.updateStatDCFnc&&(b.achievementStatsDC[k]=l.updateStatDCFnc()),b.achievementStatsDC[k].gte(q)){b.achievementsMult[k]*=l.mult;b.achievementsLevel[k]++;
if(null!==l.onLevelUpFnc)l.onLevelUpFnc();Db=!0;b.premium.premiumMoney++;aa(!0);b.achievementsLevel[k]>=V[k].trackLevel&&x("Get","Achievement",l.name+" "+b.achievementsLevel[k])}else break;else break;l=new Date;q=b.boost.daily.nextDay.y+"."+b.boost.daily.nextDay.m+"."+b.boost.daily.nextDay.d;q in te||(te[q]=new Date(b.boost.daily.nextDay.y,b.boost.daily.nextDay.m,b.boost.daily.nextDay.d));l>te[q]&&(l=new Date,l.getFullYear()==b.boost.daily.nextDay.y&&l.getMonth()==b.boost.daily.nextDay.m&&l.getDate()==
b.boost.daily.nextDay.d?b.boost.daily.daysInRow++:b.boost.daily.daysInRow=1,b.statistics.daysInRowMax<b.boost.daily.daysInRow&&(b.statistics.daysInRowMax=b.boost.daily.daysInRow),l=new Date,l=new Date(l.getFullYear(),l.getMonth(),l.getDate()+1),b.boost.daily.nextDay.d=l.getDate(),b.boost.daily.nextDay.m=l.getMonth(),b.boost.daily.nextDay.y=l.getFullYear(),b.boost.daily.isDailyBoostGenerated=!1,$a(!1,!1,!1));Q(td().mul(h));q=void 0;for(l=0;6>l;l++)if(b.balls[l].active){var q=l,p=h,k={bounceCnt:0,bounceEnergyDC:new g(0),
totalDropHeightDC:new g(0)},n=b.balls[q],v=new g(0),Vc=ya(q),U=!1,B=!1,y=(-n.v+Math.sqrt(n.v*n.v+2*b.gravity*(n.y-n.r)))/b.gravity;if(y>p){var z=b.gravity*p*p/2+n.v*p;0<z&&Vc&&(n.tmpDropHeight+=z,n.heightTotalDC=n.heightTotalDC.add(z));n.y-=z;n.v+=b.gravity*p}else{z=void 0;p-=y;z=n.height-n.r;if(1<z||0<b.abilities[q].autoJumpKoef)1<z&&(k.bounceCnt=1,k.totalDropHeightDC=new g(z),b.abilities[q].energyMultDC.gt(1)&&(v=k.totalDropHeightDC.mul(b.abilities[q].energyMultDC.sub(1)),b.abilities[q].energyMultDC=
new g(1),B=!0)),n.height=n.bounceKoefDC.mul(z).toNumber()+n.r,0<b.abilities[q].autoJumpKoef&&(z=(b.tubes[q].height-2*n.r)*b.abilities[q].autoJumpKoef+n.r,n.height<z&&(n.height=z,b.abilities[q].autoJumpKoef=0,U=!0)),z=n.height-n.r,n.v=-Math.sqrt(2*b.gravity*z);1>=z&&(n.v=0,n.height=n.r,Hc[q]=0);n.y=n.r;Td(q);z=n.height-n.r;if(1<z){var y=tg(q,z),t=Math.sqrt(8*z/b.gravity),r=n.bounceKoefDC.sqrt().toNumber(),ma=Math.floor(nd(p,t,r)),F=!0;if(isNaN(ma)||Infinity==ma||y<ma)ma=y,F=!1;1<=ma&&(F&&(p-=E(t,r,
ma).toNumber()),k.bounceCnt+=ma,k.totalDropHeightDC=k.totalDropHeightDC.add(E(z,n.bounceKoefDC,ma)),n.height=g.pow(n.bounceKoefDC,ma).mul(z).toNumber()+n.r,n.v=-Math.sqrt(2*b.gravity*(n.height-n.r)));F?(n.y-=b.gravity*p*p/2+n.v*p,n.v+=b.gravity*p):(n.v=0,n.height=n.r,n.y=n.r)}}Zd(q);k.bounceEnergyDC=Ic(q,k.totalDropHeightDC.add(v));Vc?k.totalDropHeightDC.gt(0)&&(n.heightTotalDC=n.heightTotalDC.add(k.totalDropHeightDC).sub(n.tmpDropHeight),n.tmpDropHeight=0):(n.heightTotalDC=new g(0),n.tmpDropHeight=
0);1==k.bounceCnt&&(b.showBounceEnergy&&(v=n=p=void 0,0==q?(p=D[q].x,n="left",v=15*Math.random()):5==q?(p=D[q].right,n="right",v=15*-Math.random()):(p=W[q].x,n="center",v=30*Math.random()-15),Vc=J(k.bounceEnergyDC,2,1),z=T().bounceTextColorRGBA.slice(),y=T().bounceTextShadow,S.push({type:"text",text:Vc,x:p,y:W[q].y,font:B?"bold 24px Arial":"bold 12px Arial",isFillText:!0,fillStrokeStyle:z||[0,0,0,1],hAlign:n||"start",vAlign:"bottom",shadowColor:y||"#fff",shadowOffsX:1,shadowOffsY:1,shadowBlur:2,vx:v||
0,vy:-70,ax:0,ay:-100,vAlpha:0,aAlpha:-2,time:1,callback:void 0})),C("bounce"),B=b.abilities[q].preventWeakBubbleKoef,la||(p=g.mul(k.bounceEnergyDC,b.reset.bubbleCapMult*b.boost.bubbleCapMult),(0==B||p.gte(Cd().mul(B)))&&Math.random()<b.reset.bubbleProb+b.boost.bubbleProbInc&&(la=!0,za=Qa=!1,m.opacity=0,m.size=sb,m.fontSize=Mc,m.valueDC=p,m.v=Yj,m.hv=0,zg(Wc+Math.random()*Zj,Sg),m.startY=Sg,m.hrzAccFluct=ak,m.hrzAccFluctSpeed=bk,b.statistics.bubble++)));!U||0!=k.bounceCnt&&1!=k.bounceCnt||(mb[q]=
!0);q=k;0<q.bounceCnt&&(Q(q.bounceEnergyDC),b.statistics.bounce+=q.bounceCnt,b.achievementStatsDC[O.achBouncer]=b.achievementStatsDC[O.achBouncer].add(q.bounceCnt))}U=k=q=l=void 0;for(l=0;6>l;l++)if(ya(l)&&(q=b.abilities[l],k=b.balls[l],U=q.queue[q.currentAbility],k.heightTotalDC.gte(q.levels[U].heightDC)&&(k.heightTotalDC.gt(q.levels[U].heightDC.mul(2*q.queueSizeMax))?k.heightTotalDC=k.heightTotalDC.mod(q.levels[U].heightDC):k.heightTotalDC=k.heightTotalDC.sub(q.levels[U].heightDC),w[U].onActivateFnc(l,
q.levels[U].effectMultDC),q.currentAbility=(q.currentAbility+1)%b.abilities[l].queue.length,Td(l),q=l,b.showAbilityEffects))){for(k=D[q].x;k<D[q].right;k+=2)U=T().abilityProgressColorRGBA.slice(),S.push({type:"rect",isStroke:!1,x:k,y:D[q].bottom-1-Pf,width:yc,height:yc,color:U||[0,0,0,1],vx:60*Math.random()-30||0,vy:-100*Math.random()-50||0,ax:0,ay:150,vAlpha:0,aAlpha:-.5,time:2,callback:void 0});C("ability")}q=l=void 0;for(q in S)if(S.hasOwnProperty(q))if(l=S[q],l.time<=h)l.callback&&l.callback(),
S.splice(q,1);else{l.time-=h;l.x+=l.vx*h+l.ax*h*h/2;l.vx+=l.ax*h;l.y+=l.vy*h+l.ay*h*h/2;l.vy+=l.ay*h;var A;"text"==l.type?A=l.fillStrokeStyle[3]:"img"==l.type?A=l.opacity:"rect"==l.type&&(A=l.color[3]);A+=l.vAlpha*h+l.aAlpha*h*h/2;l.vAlpha+=l.aAlpha*h;A=Math.min(1,Math.max(0,A));"text"==l.type?l.fillStrokeStyle[3]=A:"img"==l.type?l.opacity=A:"rect"==l.type&&(l.color[3]=A)}l=void 0;for(l in L)L.hasOwnProperty(l)&&0<b.boost.timers[l]&&(b.boost.timers[l]=Math.max(0,b.boost.timers[l]-h),Be(l));if(la)if(za)0<
m.opacity&&(m.opacity=Math.max(0,m.opacity-ck*h)),0==m.opacity&&(la=!1);else if(Qa)m.fontSize+=dk*h,0<m.opacity&&(m.opacity=Math.max(0,m.opacity-ek*h)),0==m.opacity&&(la=!1);else if(!gb()&&m.posY<=ue)za=!0,C("pop");else if(gb()&&m.posY+m.size<=ue)la=!1;else{l=h*h/2;m.hrzAccFluct+=m.hrzAccFluctSpeed*h+Tg*l;m.hrzAccFluctSpeed+=Tg*h;q=m.hrzAccFluct*(Math.random()-.5);zg(m.centerX+m.hv*h+q*l,m.centerY-m.v*h-Ug*l);m.v+=Ug*h;m.hv+=q*h;l=Math.max(0,m.centerY-fk)/m.startY;m.size=ve-l*gk;m.fontSize=Vg-l*hk;
if(m.posX+m.size>ik&&0<m.hv||m.posX<jk&&0>m.hv)m.hv=-m.hv;1>m.opacity&&(m.opacity=Math.min(1,m.opacity+kk*h));m.valueDC=m.valueDC.add(m.valueDC.mul(lk).mul(b.achievementsMult[O.achBubbleGrow]).mul(h))}Ua()&&(b.idleEnergyTimer+=h,!ha()&&b.idleEnergyBonusDC.gt(0)&&(xb+=h,xb>=mk&&(h=g.min(b.idleEnergyBonusDC,b.idleEnergyTransferSpeedDC.mul(xb)),b.idleEnergyBonusDC=b.idleEnergyBonusDC.sub(h),Q(h),xb=0)));h=(new Date).getTime();0<we&&(b.statistics.time+=Math.max(0,h-we));we=h;Ab();aa(!1);ca()&&(h=(new Date).getTime(),
h>Wg&&(M.stats.submit("Energy",fg(b.statistics.energyDC)),M.stats.submit("Bounces",gg(b.statistics.bounce)),M.stats.submit("BubblesClicked",gg(b.statistics.bubbleClicked)),Wg=h+nk));ld();zi()&&(b.musicEnabled?-1!=Ea&&G[ja].playing||(Ea=(Ea+1)%Bf,ja="music"+Ea,C(ja)):-1<Ea&&(ja&&G[ja].playing&&(G[ja].audio.pause(),G[ja].audio.currentTime=0,G[ja].playing=!1),ja="",Ea=-1));a-=u;u=d}while(0<a)},20);a.isDebugEnabled=!1;a.init=1}]);H.controller("IdleEnergyController",function(){this.isIdleEnergyAvailable=
Ua;this.showIdleTimer=function(){return Bg()||ha()};this.getIdleTimerHtml=function(){return Bg()?'<span class="glyphicon glyphicon-hourglass"></span>'+Ib(le()):ha()?'<span class="glyphicon glyphicon-time"></span>'+Ib(ha()?b.idleEnergyTimer:0):""};this.showIdleEnergy=function(){return ha()||b.idleEnergyBonusDC.gt(0)};this.getIdleEnergyHtml=function(){return ha()?'Idle <span class="glyphicon glyphicon-flash"></span><b>'+J(b.idleEnergyDC.mul(je()),1,1)+'</b> (<span class="glyphicon glyphicon-flash"></span>'+
J(b.idleEnergyDC,1,1)+" &times; "+J(je(),2,1)+")":b.idleEnergyBonusDC.gt(0)?'<span class="glyphicon glyphicon-arrow-up"></span> <span class="glyphicon glyphicon-flash"></span><b>'+J(b.idleEnergyBonusDC,1,1)+'</b> <span class="glyphicon glyphicon-arrow-up"></span>':""}});H.controller("PremiumController",function(){this.premiumMoney=function(){return b.premium.premiumMoney};this.premiumEnergyMult=function(){return b.premium.premiumEnergyMult};this.premiumBounceMult=function(){return b.premium.premiumBounceMult};
this.premiumEnergyPerc=function(){return Math.floor(100*(b.premium.premiumEnergyMult-1))};this.premiumBouncePerc=function(){return Math.floor(100*(b.premium.premiumBounceMult-1))};this.premiumGravityPerc=function(){return Math.floor(100*(b.premium.premiumGravityMult-1))};this.premiumIdleMultPerc=function(){return Math.floor(100*(b.premium.premiumIdleMult-1))};this.premiumIdleMultTimePerc=function(){return Math.floor(100*(b.premium.premiumIdleMultTime-1))};this.premiumEnergyGeneratorStr=function(){var a=
"+"+b.premium.premiumEnergyGeneratorInc;b.premium.premiumEnergyGeneratorInc&&(a+=" tube");1<b.premium.premiumEnergyGeneratorInc&&(a+="s");return a};this.isPremiumPackAvailable=Ve;this.isAnyPremiumSpecialPackAvailable=Zh;this.isPremiumPackTimeLimited=function(a){return!1!==qd(a)};this.getPremiumPackTimeRemain=function(a){return md(qd(a))};this.premiumPackList=K;this.showPremiumDialog=Wh;this.hidePremiumDialog=Xh;this.isPremiumDialogVisible=Yh;this.buyPremiumPack=We;this.buyPremiumPackFromEventMsg=
function(a){Ia=!1;We(a)};this.premiumItemList=ka;this.showPremiumConfirmDialog=Xe;this.hidePremiumConfirmDialog=ai;this.clickYesPremiumConfirmDialog=function(){Kb=!1;Ye()?Ze():fb=!0};this.isPremiumConfirmDialogVisible=bi;this.getPremiumSelectedItem=function(){return ka[na]};this.canBuyPremiumSelectedItem=Ye;this.premiumMoneyToBuySelectedItem=function(){return!1===na?0:this.getPremiumSelectedItem().price-b.premium.premiumMoney};this.buyPremiumSelectedItem=Ze});H.controller("ResetController",function(){this.getActive=
function(){return b.reset.active};this.canProcessReset=Lb;this.showResetSystemDialog=ki;this.getEnergyToStartAccumulateMetaDC=ii;this.isShowEnergyRemain=function(){return b.reset.inactive<ef};this.getBonusMult=df;this.getTotalBonusMultPerc=function(){return 100*(b.reset.totalMult-1)};this.getResetCnt=function(){return b.statistics.reset};this.isAnyResetUpgradeBought=Nb;this.getResetEnergyExtLevel=Ob;this.getEnergyExtCapacityMult=function(){return 100*b.reset.energyExtCapacityMult};this.getResetEnergyExtUpgradeInc=
function(){var a=k(),a=Zb(a);return 100*(b.reset.energyExtCapacityMult*Math.pow(Xg,a)-b.reset.energyExtCapacityMult)};this.getResetEnergyExtUpgradePrice=function(){return Pb(k())};this.isResetEnergyExtUpgradeable=function(){return hf(k())};this.upgradeResetEnergyExt=function(){B();C("upgrade");var a=k();if(hf(a)){var d=Zb(a);fa(Pb(a));b.reset.energyExtLevel+=d;b.reset.energyExtUpgPrice*=Math.pow($b,d);b.reset.energyExtCapacityMult*=Math.pow(Xg,d);x("Upgrade","ResetSystem","Extender",b.reset.energyExtLevel)}};
this.getBounceMult=function(){return b.reset.bounceMult};this.getResetBounceUpgradeInc=function(){var a=k(),a=ac(a);return b.reset.bounceMult*Math.pow(Yg,a)-b.reset.bounceMult};this.getResetBounceUpgradePrice=function(){return Qb(k())};this.isResetBounceUpgradeable=function(){return jf(k())};this.upgradeResetBounce=function(){B();C("upgrade");var a=k();if(jf(a)){var d=ac(a);fa(Qb(a));b.reset.bounceLevel+=d;b.reset.bounceUpgPrice*=Math.pow(bc,d);b.reset.bounceMult*=Math.pow(Yg,d);P();x("Upgrade","ResetSystem",
"Bounce",b.reset.bounceLevel)}};this.getDensityMult=function(){return b.reset.densityMult};this.getResetDensityUpgradeInc=function(){var a=k(),a=cc(a);return b.reset.densityMult*Math.pow(Zg,a)-b.reset.densityMult};this.getResetDensityUpgradePrice=function(){return Rb(k())};this.isResetDensityUpgradeable=function(){return kf(k())};this.upgradeResetDensity=function(){B();C("upgrade");var a=k();if(kf(a)){var d=cc(a);fa(Rb(a));b.reset.densityLevel+=d;b.reset.densityUpgPrice*=Math.pow(dc,d);b.reset.densityMult*=
Math.pow(Zg,d);x("Upgrade","ResetSystem","Density",b.reset.densityLevel)}};this.getGravityMult=function(){return b.reset.gravityMult};this.getResetGravityUpgradeInc=function(){var a=k(),a=ec(a);return 100*(b.reset.gravityMult*Math.pow($g,a)-b.reset.gravityMult)};this.getResetGravityUpgradePrice=function(){return Sb(k())};this.isResetGravityUpgradeable=function(){return lf(k())};this.upgradeResetGravity=function(){B();C("upgrade");var a=k();if(lf(a)){var d=ec(a);fa(Sb(a));b.reset.gravityLevel+=d;b.reset.gravityUpgPrice*=
Math.pow(fc,d);b.reset.gravityMult*=Math.pow($g,d);R();x("Upgrade","ResetSystem","Gravity",b.reset.gravityLevel)}};this.getBubbleProb=function(){return 100*b.reset.bubbleProb};this.getResetBubbleProbUpgradeInc=function(){var a=k(),a=gc(a);return 100*(b.reset.bubbleProb+ah*a-b.reset.bubbleProb)};this.getResetBubbleProbUpgradePrice=function(){return Tb(k())};this.isResetBubbleProbUpgradeable=function(){return mf(k())};this.upgradeResetBubbleProb=function(){B();C("upgrade");var a=k();if(mf(a)){var d=
gc(a);fa(Tb(a));b.reset.bubbleProbLevel+=d;b.reset.bubbleProbUpgPrice*=Math.pow(hc,d);b.reset.bubbleProb+=ah*d;x("Upgrade","ResetSystem","BubbleProbability",b.reset.bubbleProbLevel)}};this.getBubbleCapMult=function(){return b.reset.bubbleCapMult};this.getResetBubbleCapUpgradeInc=function(){var a=k(),a=ic(a);return b.reset.bubbleCapMult*Math.pow(bh,a)-b.reset.bubbleCapMult};this.getResetBubbleCapUpgradePrice=function(){return Ub(k())};this.isResetBubbleCapUpgradeable=function(){return nf(k())};this.upgradeResetBubbleCap=
function(){B();C("upgrade");var a=k();if(nf(a)){var d=ic(a);fa(Ub(a));b.reset.bubbleCapLevel+=d;b.reset.bubbleCapUpgPrice*=Math.pow(jc,d);b.reset.bubbleCapMult*=Math.pow(bh,d);x("Upgrade","ResetSystem","BubbleCapacity",b.reset.bubbleCapLevel)}};this.getResetRemoveSpikesPrice=si;this.isResetRemoveSpikesBought=gb;this.isResetRemoveSpikeUpgradeable=of;this.upgradeResetRemoveSpikes=function(){B();of()&&(b.reset.removeSpikes=!0,fa(Vb),x("Upgrade","ResetSystem","RemoveSpikes"));C("upgrade")};this.getIdleMult=
function(){return b.reset.idleMult-1};this.getResetIdleMultUpgradeInc=function(){var a=k(),a=kc(a);return b.reset.idleMult*Math.pow(ch,a)-b.reset.idleMult};this.getResetIdleMultUpgradePrice=function(){return Wb(k())};this.isResetIdleMultUpgradeable=function(){return pf(k())};this.upgradeResetIdleMult=function(){B();C("upgrade");var a=k();if(pf(a)){var d=kc(a);fa(Wb(a));ta();b.reset.idleMultLevel+=d;b.reset.idleMultUpgPrice*=Math.pow(lc,d);b.reset.idleMult*=Math.pow(ch,d);x("Upgrade","ResetSystem",
"IdleMult",b.reset.idleMultLevel)}};this.getIdleMultTime=function(){return b.reset.idleMultTime};this.getResetIdleMultTimeUpgradeInc=function(){var a=k(),a=mc(a);return b.reset.idleMultTime+dh*a-b.reset.idleMultTime};this.getResetIdleMultTimeUpgradePrice=function(){return Xb(k())};this.isResetIdleMultTimeUpgradeable=function(){return qf(k())};this.upgradeResetIdleMultTime=function(){B();C("upgrade");var a=k();if(qf(a)){var d=mc(a);fa(Xb(a));b.reset.idleMultTimeLevel+=d;b.reset.idleMultTimeUpgPrice*=
Math.pow(nc,d);b.reset.idleMultTime+=dh*d;x("Upgrade","ResetSystem","IdleMultTime",b.reset.idleMultTimeLevel)}};this.isResetEnergyGeneratorAvailable=rf;this.getResetEnergyGeneratorLevel=qa;this.getResetEnergyGeneratorNextTubeImproveLevel=vi;this.getResetEnergyGeneratorLevelMax=sf;this.getResetEnergyGeneratorValueDC=td;this.getResetEnergyGeneratorLevelUpgradeInc=function(){return ib(k())};this.getResetEnergyGeneratorVisualValueAfterUpgradeDC=function(){var a=k(),a=ib(a);return uf(qa()+a)};this.getResetEnergyGeneratorUpgradePrice=
function(){return Yb(k())};this.isResetEnergyGeneratorUpgradeable=function(){return wf(k())};this.upgradeResetEnergyGenerator=function(){B();C("upgrade");var a=k();if(wf(a)){var d=ib(a);fa(Yb(a));b.reset.energyGeneratorUpgPrice*=Math.pow(pc,d);b.reset.energyGeneratorLevel+=d;x("Upgrade","ResetSystem","EnergyGenerator",qa())}}});H.controller("SettingsController",["$timeout",function(a){this.getNumNotation=function(){return b.numberNotation};this.setNumNotation=Uh;this.sfxEnabled=!0;this.getSfxEnabled=
function(){this.sfxEnabled=b.sfxEnabled};this.setSfxEnabled=function(){b.sfxEnabled=this.sfxEnabled};this.sfxVolume=1;this.getSfxVolume=function(){this.sfxVolume=Math.floor(100*b.sfxVolume)};this.setSfxVolume=function(){var a=this.sfxVolume/100;a!=b.sfxVolume&&(b.sfxVolume=a);b.sfxEnabled=0<this.sfxVolume;this.getSfxEnabled()};this.musicEnabled=!0;this.getMusicEnabled=function(){this.musicEnabled=b.musicEnabled};this.setMusicEnabled=function(){b.musicEnabled=this.musicEnabled};this.musicVolume=1;
this.getMusicVolume=function(){this.musicVolume=Math.floor(100*b.musicVolume)};this.setMusicVolume=function(){var a=this.musicVolume/100;a!=b.musicVolume&&(b.musicVolume=a,-1<Ea&&(G[ja].audio.volume=a));b.musicEnabled=0<this.musicVolume;this.getMusicEnabled()};this.fullscreen=!1;this.getFullScreen=function(){this.fullscreen=b.fullscreen};this.setFullScreen=function(){b.fullscreen=this.fullscreen};this.keepWindowSize=!1;this.getKeepWindowSize=function(){this.keepWindowSize=b.keepWindowSize};this.setKeepWindowSize=
function(){b.keepWindowSize=this.keepWindowSize};this.showBounceEnergy=!0;this.getShowBounceEnergy=function(){this.showBounceEnergy=b.showBounceEnergy};this.setShowBounceEnergy=function(){b.showBounceEnergy=this.showBounceEnergy};this.coloredUpgrades=!1;this.getColoredUpgrades=function(){this.coloredUpgrades=b.coloredUpgrades};this.setColoredUpgrades=function(){b.coloredUpgrades=this.coloredUpgrades};this.showUpgradeCntInTab=!0;this.getShowUpgradeCntInTab=function(){this.showUpgradeCntInTab=b.showUpgradeCntInTab};
this.setShowUpgradeCntInTab=function(){b.showUpgradeCntInTab=this.showUpgradeCntInTab};this.showAbilityEffects=!0;this.getShowAbilityEffects=function(){this.showAbilityEffects=b.showAbilityEffects};this.setShowAbilityEffects=function(){b.showAbilityEffects=this.showAbilityEffects};this.showBallStyles=function(){return b.isAnyTubeImproved};this.getBallStyle=xc;this.setBallStyle=Fj;this.ballStyleList=wc;this.bgStyles=["off","red","blue","azure"];this.getBgStyle=function(){return b.bgStyle};this.setBgStyle=
function(a){b.bgStyle=a};this.showSaveResultTimeout=0;this.saveResultOK=!1;this.saveGame=function(){aa(!1,!0);this.saveResultOK=sc;this.showSaveResultTimeout=(new Date).getTime()+3E3};this.isSaveResultVisible=function(){return(new Date).getTime()<this.showSaveResultTimeout};this.getSaveButtonText=function(){return this.isSaveResultVisible()?this.saveResultOK?"Success":"ERROR!":"Local save game"};this.getSaveButtonStyle=function(){return this.isSaveResultVisible()?this.saveResultOK?"btn-success":"btn-danger":
"btn-default"};this.showCloudDialog=cj;this.showHardResetDlg=!1;this.hardResetDlg=function(){this.showHardResetDlg=!0};this.hardResetConfirm=function(a){a&&(Eb(!0),x("HardReset","Settings"));this.showHardResetDlg=!1};this.selectedTheme=lb();this.onThemeChanged=function(){Df(this.selectedTheme)};this.themeList=Ef;this.getTheme=lb;this.setTheme=Df;this.isShowImportWarning=function(){return""!=b.kongUserId||""!=b.kongUser};this.selectOnClick=function(a){a.target.select()};this.serializedSaveStr="";this.saveStrOk=
!0;this.updateSaveStr=function(){this.serializedSaveStr=wd(JSON.stringify(b));this.saveStrOk=!0};this.buttonLoadFromStr=function(){this.serializedSaveStr&&"ok"==ed(this.serializedSaveStr,!0)?(this.saveStrOk=!0,x("ImportOK","Settings"),Eb(!1,this.serializedSaveStr),this.getSfxEnabled(),this.getSfxVolume(),this.getFullScreen(),this.getKeepWindowSize(),this.getMusicEnabled(),this.getMusicVolume(),this.getShowBounceEnergy(),this.getColoredUpgrades(),this.getShowUpgradeCntInTab(),this.getShowAbilityEffects(),
this.selectedTheme=lb()):(this.saveStrOk=!1,x("ImportFail","Settings"))};this.isBuyAmountStepPosRight=Ya;this.setBuyAmountStepPosRight=qh}]);H.controller("StatisticsController",function(){this.statisticsList=function(){return tc};this.statistics=function(){return b.statistics};this.getActiveTime=function(){return Se(Math.floor(b.statistics.time/1E3))};this.getBigValueDCRank=fg;this.getTotalEnergyMult=function(){return(new g(b.gravity/Jc)).mul(b.reset.densityMult).mul(b.reset.totalMult).mul(b.premium.premiumEnergyMult*
b.events.eventEnergyMult*b.boost.energyMult)};this.getTotalGravityMult=function(){return b.gravity/Jc};this.getTotalBounceMult=function(){return b.reset.bounceMult*b.premium.premiumBounceMult*b.events.eventBounceMult};this.getIdleEnergyMultTotal=function(){return Va()-1};this.getIdleEnergyMultTimeTotal=ke;this.getIdleEnergyMultMaxDC=Jj;this.isBoostDailyActive=bd;this.getBoostDailyType=Gh;this.getBoostDailyTotalValue=function(){return 100*b.boost.daily.selectedDailyValue};this.getBoostDailyDuration=
function(){return md(b.boost.timers.dailyBoost)};this.getDaysPlayedInRow=Fe});var Z="Main";H.controller("TabsController",function(){xe(Z);this.select=xe;this.isSelected=function(a){"Achievements"==Z&&(Db=0);return Z==a}});var F="Main";H.controller("TabsUpgradeController",function(){va(F);this.select=va;this.isSelected=th});H.controller("UpgradeController",function(){this.getUpgradeColorStyle=function(a){return b.coloredUpgrades?{"background-color":Bd[a],color:sg[a]}:{}};this.showUpgradeCntInTab=function(){return b.showUpgradeCntInTab};
this.getCapacityLevel=function(){return b.energyLevelDC};this.canUpgradeCapacity=function(){return ge(k())};this.canUpgradeCapacityAmount=function(a){return ge(Y(a,k().step))};this.getUpgradeCapacityPriceDC=function(){return fe(k())};this.capacityUpgradeIncDC=function(){var a=k();return Nc(a)};this.upgradeCapacity=function(){Md(k())};this.upgradeCapacityAmount=function(a){Md(Y(a,k().step))};this.getTubeBuyPriceDC=Kj;this.canBuyTube=Qc;this.buyTube=function(a){B();ne(a);C("upgrade")};this.isTubeImproveButtonVisible=
function(a){if(Ca)a=Sc(a);else{var d=0==a?5:a-1;ub[a]||(ub[a]=0==a&&b.tubes[d].active&&b.tubes[a].improvementLevel<=b.tubes[d].improvementLevel||0<a&&b.tubes[d].active&&b.tubes[a].improvementLevel<=b.tubes[d].improvementLevel-1||.95<b.energyMaxDC.e/b.tubes[a].improvePriceDC.e);a=ub[a]}return a};this.getTubeImprovePriceDC=Rc;this.canImproveTube=function(a){return Ca?Sc(a):wb(a)};this.improveTube=function(a){B();oe(a,Ca);C("upgrade")};this.getImproveText=function(a){return Ca&&Sc(a)?"Regress":wb(a)?
"Improve":'<span class="glyphicon glyphicon-flash"></span>'+J(Rc(a))};this.setShowAmplifierValueAsMult=Lj;this.isShowAmplifierValueAsMult=function(){return b.showAmplifierLevelAsMult};this.getAmplifierPrefix=function(){return this.isShowAmplifierValueAsMult()?"&times;":'<span class="glyphicon glyphicon-flash"></span>'};this.getTubeAmplifierLevel=Hg;this.getTubeAmplifierLevelsFromPrevSuperUpgrade=Oj;this.getTubeAmplifierLevelSuperUpgradeStep=Nj;this.getTubeAmplifierNextSuperMult=Pj;this.getTubeAmplifierLevelUpgradeInc=
function(a){return Xa(a,k())};this.getTubeAmplifierValue=function(a){return this.isShowAmplifierValueAsMult()?b.tubes[a].amplifierDC:Ic(a,b.tubes[a].height-2*b.balls[a].r)};this.getTubeAmplifierIncDC=function(a){if(this.isShowAmplifierValueAsMult()){var d=k();a=re(a,Xa(a,d)).amplDC.sub(b.tubes[a].amplifierDC)}else{var d=k(),c=Ic(a,b.tubes[a].height-2*b.balls[a].r);a=re(a,Xa(a,d)).amplDC.div(b.tubes[a].amplifierDC).mul(c).sub(c)}return a};this.getTubeAmplifierUpgradePriceDC=function(a){return qe(a,
k())};this.isTubeAmplifierUpgradeable=function(a){return Ig(a,k())};this.upgradeTubeAmplifier=$f;this.getTubeHeightMax=function(){return Wa};this.isTubeHeightMax=Jg;this.getTubeHeightUpgradeInc=function(a){return Uc(a,k())};this.getTubeHeightUpgradePriceDC=function(a){return se(a,k())};this.isTubeHeightUpgradeable=function(a){return Kg(a,k())};this.upgradeTubeHeight=cg;this.getBallSizeMax=$d;this.isBallSizeMax=vg;this.getBallSizeUpgradeInc=function(a){return Kc(a,k())};this.getBallSizeUpgradePriceDC=
function(a){return ae(a,k())};this.isBallSizeUpgradeable=function(a){return xg(a,k())};this.upgradeBallSize=bg;this.getBallBounceCnt=function(a){return b.balls[a].bounceCnt*Yd()};this.getBallBounceUpgradeInc=function(a){return Lc(a,k())*Yd()};this.getBallBounceUpgradePriceDC=function(a){return ce(a,k())};this.isBallBounceUpgradeable=function(a){return yg(a,k())};this.upgradeBallBounce=ag;this.getBallBounceTime=function(a){var d;d=b.balls[a];var c=b.tubes[a].height-2*d.r;a=tg(a,c);c=Math.sqrt(8*c/
b.gravity);d=d.bounceKoefDC.sqrt().toNumber();d=E(c,d,a).toNumber();return Ib(d)};this.isAbilitiesTabVisible=function(){return b.isAnyTubeImproved};this.getEnergyUpsAvail=function(){var a=F;F="Main";for(var d=0,c=0;6>c;c++)(b.tubes[c].active&&this.isTubeAmplifierUpgradeable(c)||0<c&&!b.tubes[c].active&&b.tubes[c-1].active&&this.canBuyTube(c))&&d++;F=a;return d};this.getBounceUpsAvail=function(){var a=F;F="BallBounce";for(var d=0,c=0;6>c;c++)b.balls[c].active&&this.isBallBounceUpgradeable(c)&&d++;
F=a;return d};this.getBallSizeUpsAvail=function(){var a=F;F="BallSize";for(var d=0,c=0;6>c;c++)b.balls[c].active&&this.isBallSizeUpgradeable(c)&&d++;F=a;return d};this.getTubeHeightUpsAvail=function(){var a=F;F="TubeHeight";for(var d=0,c=0;6>c;c++)b.tubes[c].active&&this.isTubeHeightUpgradeable(c)&&d++;F=a;return d}});var uh=0,vh=2,ye="K M B T Qa Qt Sx Sp Oc Nn Dc UDc DDc TDc QaDc QtDc SxDc SpDc OcDc NnDc Vi UVi DVi TVi QaVi QtVi SxVi SpVi OcVi NnVi Tg UTg DTg TTg QaTg QtTg SxTg SpTg OcTg NnTg Qd UQd DQd TQd QaQd QtQd SxQd SpQd OcQd NnQd Qq UQq DQq TQq QaQq QtQq SxQq SpQq OcQq NnQq Sg USg DSg TSg QaSg QiSg SxSg SpSg OcSg NnSg St USt DSt TSt QaSt QtSt SxSt SpSt OcSt NnSt Og UOg DOg TOg QaOg QtOg SxOg SpOg OcOg NnOg".split(" "),
wh=ye.length;H.filter("bignum",function(){function a(a,b,e){return J(a,b,e)}a.$stateful=!0;return a});var yh=.1,xh=5,Bb=-1,Ah=5,zh=10,Ae=7,te={},Cb=!1,cd=!1,A="",fj="January February March April May June July August September October November December".split(" "),db=[],od=0,eb=[],pd=0,zj="idle-bouncer",gd=!1,Gb=new g(0),Pe=0,Ia=!1,Rg=!1,pe=!1,vd=!1,b={gameId:"IdleBouncer",saveVer:25,numberNotation:"suffix",showBounceEnergy:!0,coloredUpgrades:!1,showUpgradeCntInTab:!0,showAbilityEffects:!0,isAnyTubeImproved:!1,
ballStyle:"ball",bgStyle:"off",theme:"default",buyAmountStepPosRight:!0,musicEnabled:!0,sfxEnabled:!0,musicVolume:.3,sfxVolume:1,fullscreen:!1,keepWindowSize:!1,windowWidth:0,windowHeight:0,windowMaximized:!1,balls:[],tubes:[],showAmplifierLevelAsMult:!0,virtTubeIdMax:0,firstStartTime:(new Date).getTime(),lastUpdateTime:(new Date).getTime(),premium:{},kongUserId:"",kongUser:"",events:{eventEnergyMult:1,eventBounceMult:1,eventGravityMult:1,eventIdleMult:1,eventIdleMultTime:1,eventMetaBonusInc:0,eventItems:[],
eventBoughtItems:[],stvAchLevels:[]},achievementsLevel:[],achievementsMult:[],achievementStatsDC:[],tutorial:{},statistics:{}},Db=0,fb=!1,Kb=!1,na=!1,ff=Math.pow(10,15),ef=.005,ci=1,$b=1.1,mi=Math.log($b),Xg=1.1,di=5,fc=1.27,pi=Math.log(fc),$g=1.1,ei=4,dc=1.27,oi=Math.log(dc),Zg=2,fi=2,bc=2,ni=Math.log(bc),Yg=2,gi=10,hc=2,qi=Math.log(hc),ah=.01,hi=10,jc=1.17,ri=Math.log(jc),bh=2,Vb=10,af=2,lc=1.18,ti=Math.log(lc),ch=1.5,bf=4,nc=1.05,ui=Math.log(nc),dh=1,sd=1,pc=1.07,xi=Math.log(pc),wi=1E25,oc=3,vf=
7-oc,Mb=!1,rc=(new Date).getTime()+6E4,yd=(new Date).getTime()+2E3,sc=!0,G={},ja="",Ea=-1,Af=!1,tc,we=0,Fb=!1,Mf="Waiting...",Ad="",Oa=0,uc=null,yc=3,Pf=Math.floor(yc/2),xa=400,pa=566,cb=null,oa,Hb,kd,S=[],Pa=453,Oi=1,Pg=!1,Qg=!1;new g(0);var Vj=[1,2,5,10,60,120,360,720,1440,3600,1E4],Wj=[.1,.2,.5,1,2,5,10,60,600,3600,28800,86400],Lg=0,Mg=0,Ng=0,Og=0,Tj=0,Uj=0,Ra=[{eventCode:"stval",title:"Quiver",img:"imgs/events/stvalentine/quiver.png",imgIcon:"imgs/events/stvalentine/quiver.png",desc:'Add <span class="num">+20%</span> to received energy',
order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"stval",title:"Bouncy Arrow",img:"imgs/events/stvalentine/arrow01.png",imgIcon:"imgs/events/stvalentine/arrow01.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;P()}},{eventCode:"stval",title:"Gravity Arrow",img:"imgs/events/stvalentine/arrow02.png",imgIcon:"imgs/events/stvalentine/arrow02.png",desc:'Add <span class="num">+10%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=
.1;R()}},{eventCode:"stval",title:"Idle Arrow",img:"imgs/events/stvalentine/arrow03.png",imgIcon:"imgs/events/stvalentine/arrow03.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){ta();b.events.eventIdleMult+=1}},{eventCode:"stval",title:"Energy Arrow",img:"imgs/events/stvalentine/arrow04.png",imgIcon:"imgs/events/stvalentine/arrow04.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=
.3}},{eventCode:"stval",title:"Meta Arrow",img:"imgs/events/stvalentine/arrow05.png",imgIcon:"imgs/events/stvalentine/arrow05.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}},{eventCode:"easter",title:"Basket",img:"imgs/events/easter/basket.png",imgIcon:"imgs/events/easter/basket.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"easter",title:"Bouncy Egg",
img:"imgs/events/easter/basket1.png",imgIcon:"imgs/events/easter/basket1_icon.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;P()}},{eventCode:"easter",title:"Gravity Egg",img:"imgs/events/easter/basket2.png",imgIcon:"imgs/events/easter/basket2_icon.png",desc:'Add <span class="num">+20%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.2;R()}},{eventCode:"easter",title:"Idle Egg",img:"imgs/events/easter/basket3.png",
imgIcon:"imgs/events/easter/basket3_icon.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){ta();b.events.eventIdleMult+=1}},{eventCode:"easter",title:"Energy Egg",img:"imgs/events/easter/basket4.png",imgIcon:"imgs/events/easter/basket4_icon.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"easter",title:"Meta Egg",img:"imgs/events/easter/basket5.png",imgIcon:"imgs/events/easter/basket5_icon.png",
desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}},{eventCode:"halloween",title:"Bucket",img:"imgs/events/halloween/bucket.png",imgIcon:"imgs/events/halloween/bucket.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"halloween",title:"Bouncy Candy",img:"imgs/events/halloween/candy1.png",imgIcon:"imgs/events/halloween/candy1_icon.png",desc:'Add <span class="num">+100%</span> to bounce',
order:1,addFnc:function(){b.events.eventBounceMult+=1;P()}},{eventCode:"halloween",title:"Gravity Candy",img:"imgs/events/halloween/candy2.png",imgIcon:"imgs/events/halloween/candy2_icon.png",desc:'Add <span class="num">+20%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.2;R()}},{eventCode:"halloween",title:"Idle Candy",img:"imgs/events/halloween/candy3.png",imgIcon:"imgs/events/halloween/candy3_icon.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',
order:3,addFnc:function(){ta();b.events.eventIdleMult+=1}},{eventCode:"halloween",title:"Energy Candy",img:"imgs/events/halloween/candy4.png",imgIcon:"imgs/events/halloween/candy4_icon.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"halloween",title:"Meta Candy",img:"imgs/events/halloween/candy5.png",imgIcon:"imgs/events/halloween/candy5_icon.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,
addFnc:function(){b.events.eventMetaBonusInc+=.1}}],Hd=Ra.length,ob=[{code:"halloween",title:"Halloween Event",page:"halloween.html",itemStartId:12,itemsCnt:6,finishTime:(new Date(2017,10,21)).getTime()},{code:"easter",title:"Easter Event",page:"event.html",itemStartId:6,itemsCnt:6,finishTime:(new Date(2017,4,1)).getTime()},{code:"stval",title:"Saint Valentine Event",page:"stval.html",itemStartId:0,itemsCnt:6,finishTime:(new Date(2017,1,24)).getTime()}],Si=!0,Ac=0,w={powerfulBounce:{name:"Powerful bounce",
descFnc:function(a){return'Next bounce energy will be multiplied by <span class="num">'+this.visualiseEffectFnc(a)+"</span>"},passiveAbility:!1,imprLvlMin:1,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(7E3+4E3*(a-1))},effectMultDCFnc:function(a){return new g(50*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return"&times;"+J(a,0,0)},onActivateFnc:function(a,d){b.abilities[a].energyMultDC=b.abilities[a].energyMultDC.eq(1)?new g(d):b.abilities[a].energyMultDC.add(d)}},
autoJump:{name:"Auto jump",descFnc:function(a){return a.lt(1)?'Throws the ball to <span class="num">'+this.visualiseEffectFnc(a)+"</span> of the maximum height":"Throws the ball to the maximum height"},passiveAbility:!1,imprLvlMin:2,ptsPrice:1,ptsPriceRate:1,levelMax:5,allowChangeLevel:!0,heightDCFnc:function(a){return new g(1E4*a)},effectMultDCFnc:function(a){return new g(.0625*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return a.mul(100).toString()+"%"},onActivateFnc:function(a,d){b.abilities[a].autoJumpKoef=
Math.max(b.abilities[a].autoJumpKoef,d.toNumber())}},powerfulBounceAll:{name:"Mass powerful bounce",descFnc:function(a){return'Next bounce energy for all balls will be multiplied by <span class="num">'+this.visualiseEffectFnc(a)+"</span>"},passiveAbility:!1,imprLvlMin:3,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(4E4+16E3*(a-1))},effectMultDCFnc:function(a){return new g(50*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return"&times;"+J(a,0,0)},
onActivateFnc:function(a,d){for(var c=0;6>c;c++)b.abilities[c].energyMultDC=b.abilities[c].energyMultDC.eq(1)?new g(d):b.abilities[c].energyMultDC.add(d)}},autoJumpAll:{name:"Mass auto jump",descFnc:function(a){return a.lt(1)?'Throws all balls to <span class="num">'+this.visualiseEffectFnc(a)+"</span> of the maximum height":"Throws all balls to the maximum height"},passiveAbility:!1,imprLvlMin:4,ptsPrice:1,ptsPriceRate:1,levelMax:5,allowChangeLevel:!0,heightDCFnc:function(a){return new g(3E4*a)},
effectMultDCFnc:function(a){return new g(.0625*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return a.mul(100).toString()+"%"},onActivateFnc:function(a,d){for(var c=0;6>c;c++)b.abilities[c].autoJumpKoef=Math.max(b.abilities[c].autoJumpKoef,d.toNumber())}},bounceAutoUpgrade:{name:"Bounce auto upgrade",descFnc:function(a){return'Buy bounce upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+this.visualiseEffectFnc(a)+"</span> of normal price"},
passiveAbility:!1,imprLvlMin:5,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1E4+5E3*(a-1))},effectMultDCFnc:function(a){return new g(Math.pow(.8,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){de(a,.01,b.toNumber())}},ballSizeAutoUpgrade:{name:"Ball size auto upgrade",descFnc:function(a){return'Buy ball size upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+
this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:6,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(2E4+6E3*(a-1))},effectMultDCFnc:function(a){return new g(Math.pow(.8,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){be(a,.01,b.toNumber())}},tubeHeightAutoUpgrade:{name:"Height auto upgrade",descFnc:function(a){return'Buy height upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+
this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:7,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1E4+5E3*a)},effectMultDCFnc:function(a){return new g(Math.pow(.7,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){Pc(a,.01,b.toNumber())}},amplAutoUpgrade:{name:"Amplifier auto upgrade",descFnc:function(a){return'Buy amplifier upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+
this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:8,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(8E4+4E4*(a-1))},effectMultDCFnc:function(a){return new g(Math.pow(.8,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){Tc(a,.01,b.toNumber())}},freeAmplAutoUpgrade:{name:"Free amplifier auto upgrade",descFnc:function(a){return'Do <span class="num">'+this.visualiseEffectFnc(a)+"</span> amplifier upgrade"+
(a.gt(1)?"s":"")+" for this tube for free"},passiveAbility:!1,imprLvlMin:9,ptsPrice:1,ptsPriceRate:1,levelMax:10,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1E5+5E4*(a-1))},effectMultDCFnc:function(a){return new g(a)},visualiseEffectFnc:function(a){return a.toString()},onActivateFnc:function(a,b){Tc(a,b.toNumber(),0)}},queueInc:{name:"Increase queue",descFnc:function(a){return'Increase queue size up to <span class="num">'+this.visualiseEffectFnc(a)+"</span> abilities"},passiveAbility:!0,
imprLvlMin:10,ptsPrice:2,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1)},initEffectMultDC:new g(1),effectMultDCFnc:function(a){return new g(a+1)},visualiseEffectFnc:function(a){return a.toString()},onActivateFnc:function(a,d){b.abilities[a].queueSizeMax=d.toNumber()}},preventWeakBubble:{name:"Prevent weak bubble",descFnc:function(a){return'Excludes this tube from bubble generation if generated bubble contains less than <span class="num">'+this.visualiseEffectFnc(a)+
"</span> of the current energy per second."},passiveAbility:!0,imprLvlMin:11,ptsPrice:2,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1)},effectMultDCFnc:function(a){return new g(Math.pow(100,a-1)/100)},visualiseEffectFnc:function(a){return J(a.mul(100),0)+"%"},onActivateFnc:function(a,d){b.abilities[a].preventWeakBubbleKoef=d.toNumber()}}},O={achBouncer:0,achEnergyStorage:1,achBubbleGrow:2},V=[{name:"Super bouncer",descr:'It makes your balls bounce upgrade <span class="num">20%</span> cheaper at each achievement level. Continue bouncing to get this achievement.',
trackLevel:5,reqValueDC:[],reqValueDCFnc:function(a){return new g(100*(Math.pow(3,a+1)-2))},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:function(){for(var a=0;6>a;a++)b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(V[O.achBouncer].mult)},mult:.8,multDecDigits:3},{name:"Energy storage",descr:'It makes your energy capacity upgrade <span class="num">30%</span> cheaper at each achievement level. Continue spending the energy to get this achievement. Get <i>Auto-capacity extender</i> on level <span class="num">5</span> of this achievement.',
trackLevel:7,reqValueDC:[],reqValueDCFnc:function(a){var b=new g(1);b.e=Math.pow(2,a);return b},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:function(){b.energyUpgPrice*=V[O.achEnergyStorage].mult;5==b.achievementsLevel[O.achEnergyStorage]&&(0==b.reset.energyExtLevel?b.reset.energyExtLevel=1:b.reset.active++)},mult:.7,multDecDigits:5},{name:"Bubble buster",descr:'It makes a bubble grow <span class="num">20%</span> faster at each achievement level. Continue popping bubbles to get this achievement.',
trackLevel:5,reqValueDC:[],reqValueDCFnc:function(a){return new g(5*(Math.pow(2,a+1)-1))},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:null,mult:1.2,multDecDigits:3}],He=V.length,wc={ball:{name:"Ball",type:"vector",drawFnc:function(a,b,c,e,f,g,h){p(a,c,e,f,h)},colors:"#ff0 #0f0 #0ff #05f #00c #222".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},figure:{name:"Figure",type:"vector",drawFnc:function(a,b,c,e,f,g,h){0==g?p(a,c,e,f,h):1==g?(p(a,c,e+.4*f,.6*f,h),p(a,c,e-.6*f,.4*f,h)):
(b=2,g>=b++&&(p(a,c,e+.5*f,.5*f,h),p(a,c,e-.3*f,.3*f,h),p(a,c,e-.8*f,.2*f,h)),g>=b++&&(p(a,c+.07*f,e-.88*f,.03*f,h),p(a,c-.07*f,e-.88*f,.03*f,h)),g>=b++&&p(a,c,e-.78*f,.02*f,h),g>=b++&&p(a,c+.4*f,e-.4*f,.12*f,h),g>=b++&&p(a,c-.4*f,e-.4*f,.12*f,h),g>=b++&&p(a,c-.5*f,e+.85*f,.15*f,h),g>=b++&&p(a,c+.5*f,e+.85*f,.15*f,h),g>=b++&&p(a,c,e-.45*f,.02*f,h),g>=b++&&p(a,c,e-.3*f,.02*f,h),g>=b++&&p(a,c,e-.15*f,.02*f,h))},colors:"#ff0 #0f0 #0ff #05f #00c #222".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},
pack:{name:"Pack",type:"vector",drawFnc:function(a,b,c,e,f,g,h){switch(g){case 0:p(a,c,e,f,h);break;case 1:p(a,c,e+.5*f,.5*f,h);p(a,c,e-.5*f,.5*f,h);break;case 2:p(a,c+.5*f,e+.5*f,.5*f,h);p(a,c-.5*f,e+.5*f,.5*f,h);p(a,c,e-.45*f,.55*f,h);break;case 3:p(a,c+.5*f,e+.5*f,.5*f,h);p(a,c-.5*f,e+.5*f,.5*f,h);p(a,c+.5*f,e-.5*f,.5*f,h);p(a,c-.5*f,e-.5*f,.5*f,h);break;case 4:p(a,c+.5*f,e+.5*f,.5*f,h);p(a,c-.5*f,e+.5*f,.5*f,h);p(a,c+.3*f,e-.28*f,.3*f,h);p(a,c-.3*f,e-.28*f,.3*f,h);p(a,c,e-.75*f,.25*f,h);break;
case 5:p(a,c,e+4*f/6,1*f/3,h);p(a,c-4*f/6,e+4*f/6,1*f/3,h);p(a,c+4*f/6,e+4*f/6,1*f/3,h);p(a,c-1*f/3,e+.06*f,1*f/3,h);p(a,c+1*f/3,e+.06*f,1*f/3,h);p(a,c,e-.6*f,.4*f,h);break;case 6:p(a,c,e+4*f/6,1*f/3,h);p(a,c-4*f/6,e+4*f/6,1*f/3,h);p(a,c+4*f/6,e+4*f/6,1*f/3,h);p(a,c,e,1*f/3,h);p(a,c-4*f/6,e,1*f/3,h);p(a,c+4*f/6,e,1*f/3,h);p(a,c,e-4*f/6,1*f/3,h);break;case 7:p(a,c,e+4*f/6,1*f/3,h);p(a,c-4*f/6,e+4*f/6,1*f/3,h);p(a,c+4*f/6,e+4*f/6,1*f/3,h);p(a,c,e,1*f/3,h);p(a,c-4*f/6,e,1*f/3,h);p(a,c+4*f/6,e,1*f/3,
h);p(a,c-1*f/3,e-.64*f,.36*f,h);p(a,c+1*f/3,e-.64*f,.36*f,h);break;default:p(a,c,e+4*f/6,1*f/3,h),p(a,c-4*f/6,e+4*f/6,1*f/3,h),p(a,c+4*f/6,e+4*f/6,1*f/3,h),p(a,c,e,1*f/3,h),p(a,c-4*f/6,e,1*f/3,h),p(a,c+4*f/6,e,1*f/3,h),p(a,c,e-2*f/3,1*f/3,h),p(a,c-4*f/6,e-2*f/3,1*f/3,h),p(a,c+4*f/6,e-2*f/3,1*f/3,h)}},colors:"#ff0 #0f0 #0ff #05f #00c #222".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},classic:{name:"Classic",type:"bitmap",drawFnc:function(a,b,c,e,f,g,h){Vd&&(g=2*f,a.drawImage(Oc[b],
c-f,e-f,g,g))},colors:"#ff0 #0f0 #00b3ef #fb6b6a #0070ef #f800e4".split(" "),textColors:"#000 #000 #fff #fff #fff #fff".split(" ")}},wa=[{title:"Bounce",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.bounceMult*=a+1;P()},onDeactivateFnc:function(a){b.boost.bounceMult/=a+1;P()}},{title:"Gravity",valueMin:.1,valueMax:.4,onActivateFnc:function(a){b.boost.gravityMult*=a+1;R()},onDeactivateFnc:function(a){b.boost.gravityMult/=a+1;R()}},{title:"Energy",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.energyMult*=
a+1},onDeactivateFnc:function(a){b.boost.energyMult/=a+1}},{title:"Density",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.densityMult*=a+1},onDeactivateFnc:function(a){b.boost.densityMult/=a+1}},{title:"Bubble probability",valueMin:.01,valueMax:.03,onActivateFnc:function(a){b.boost.bubbleProbInc+=a},onDeactivateFnc:function(a){b.boost.bubbleProbInc-=a}},{title:"Bubble capacity",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.bubbleCapMult*=a+1},onDeactivateFnc:function(a){b.boost.bubbleCapMult/=
a+1}}],Bh=wa.length,L={bounce:{title:function(){return'Increase bounce <span class="num">x10</span> for <span class="num">10</span> minutes'},dlgText:function(){return'increase bounce <span class="num">x10</span> for <span class="num">10</span> minutes'},available:function(){return!0},unavailableText:"",reward:function(){b.boost.bounceMult*=10;P()},rewardTime:600,rewardEnd:function(){b.boost.bounceMult/=10;P()}},gravity:{title:function(){return'Increase gravity <span class="num">+50%</span> for <span class="num">5</span> minutes'},
dlgText:function(){return'increase gravity <span class="num">x50</span> for <span class="num">5</span> minutes'},available:function(){return!0},unavailableText:"",reward:function(){b.boost.gravityMult*=1.5;R()},rewardTime:300,rewardEnd:function(){b.boost.gravityMult/=1.5;R()}},time:{title:function(){return'Time warp <span class="num">15</span> minutes'},dlgText:function(){return'jump into the future by <span class="num">15</span> minutes'},available:function(){return ug()},unavailableText:"All balls are in the idle state. Start bouncing to activate time warp.",
reward:function(){sa(900,!0)},rewardTime:0,rewardEnd:null},dblOffline:{hidden:!0,title:function(){return"Double offline energy"},dlgText:function(){return'increase offline energy <span class="num">x2</span>'},available:function(){return b.energyDC.gt(Gb)},unavailableText:"",reward:function(){Q(b.energyDC.sub(Gb))},rewardTime:0,rewardEnd:null},dailyBoost:{hidden:!0,title:function(){return""},dlgText:function(){return""},available:function(){return!1},unavailableText:"",reward:function(){wa[b.boost.daily.selectedDailyBoost].onActivateFnc(b.boost.daily.selectedDailyValue)},
rewardTime:86400,rewardEnd:function(){wa[b.boost.daily.selectedDailyBoost].onDeactivateFnc(b.boost.daily.selectedDailyValue)}}},rb=[1,10,50,100,500,1E3],Za=rb.length,Ue=Math.max(2E9,1E6*rb[Za-1]),Gc=[{value:0,text:"exact"},{value:-1,text:"min"},{value:.1,text:"10%"},{value:.5,text:"50%"},{value:1,text:"max"}],zb=Gc.length,dg=Za+zb,K={packspec:{title:"Special Deal for first time buyers.<br/><i>Bonus: +100% to bounce included!</i>",buyOnce:!0,price:39,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,
onBuyFnc:function(){b.premium.premiumBounceMult+=1;P()}},packidle:{title:'Special Deal for idle players.<br/>SALE: Only <img src="imgs/kred_single.png" class="premium-crystal-list-item"/> 69 if you buy before Valentine\'s Day.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>',hide:!0,buyOnce:!0,price:69,oldPrice:109,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){ta();b.premium.premiumIdleMult+=5;b.premium.premiumIdleMultTime+=
5;b.premium.premiumBounceMult+=5;P()}},pack1:{title:"",buyOnce:!1,price:49,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},pack2:{title:"",buyOnce:!1,price:99,premiumMoneyBase:200,premiumMoney:220,premiumBonusPercent:10},pack3:{title:"",buyOnce:!1,price:199,premiumMoneyBase:400,premiumMoney:480,premiumBonusPercent:20},pack4:{title:"",buyOnce:!1,price:499,premiumMoneyBase:1E3,premiumMoney:1300,premiumBonusPercent:30},pack5:{title:"",buyOnce:!1,price:999,premiumMoneyBase:2E3,premiumMoney:3E3,
premiumBonusPercent:50},packidlen:{title:"Special Deal for idle players.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>",buyOnce:!0,price:109,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){ta();b.premium.premiumIdleMult+=5;b.premium.premiumIdleMultTime+=5;b.premium.premiumBounceMult+=5;P()}},packstv:{title:'Special Valentine\'s Event Pack.<br/><i>Bonus: All Valentine\'s Event Items.<br/>For any Event Item you already own you get additional <img src="imgs/theme-default/premium.svg" class="premium-crystal"/>25.</i>',
hide:!0,buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){for(var a=0;a<Hd;a++)"stval"==Ra[a].eventCode&&(pb(a)?b.events.eventBoughtItems[a]||(b.premium.premiumMoney+=25):Rf(a,!0))}},easterpackspec:{title:"One-Time deal for Easter Event players.<br/><i>Bonus: +50% Energy included!</i>",hide:!0,buyOnce:!0,price:39,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},easterpackactive:{title:"Special Deal: Active Easter.<br/><i>Double chance of all bonus eggs drop (both gray and yellow).<br/>Bonus eggs drop speed reduced by x2.</i>",
hide:!0,buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},easterpackidle:{title:"Special Deal: Idle Easter.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>",hide:!0,buyOnce:!0,price:69,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},easterpackquick:{title:"Special Deal: Quick Easter.<br/><i>Bonus: +100% Gravity included!</i>",hide:!0,buyOnce:!0,price:129,premiumMoneyBase:200,premiumMoney:200,premiumBonusPercent:0},
packeaster:{title:'Special Easter Event Pack.<br/><i>Bonus: All Easter Event Items.<br/>For any Event Item you already own you get additional <img src="imgs/theme-default/premium.svg" class="premium-crystal"/>25.</i>',hide:!0,buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){for(var a=0;a<Hd;a++)"easter"==Ra[a].eventCode&&(pb(a)?b.events.eventBoughtItems[a]||(b.premium.premiumMoney+=25):Rf(a,!0))}}},ka=[{name:"Re-roll reward value",desc:"Re-roll reward value.",
descInactive:"",price:1,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){$a(!1,!0,!1)}},{name:"Re-roll reward duration",desc:"Re-roll reward duration.",descInactive:"",price:1,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){$a(!1,!1,!0)}},{name:"Re-roll reward type and value",desc:"Re-roll reward type and value.",descInactive:"",price:2,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){$a(!0,!0,!1)}},{name:"Re-roll reward type, value and duration",desc:"Re-roll reward type, value and duration.",
descInactive:"",price:3,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){$a(!0,!0,!0)}},{name:"Meta-energy converter",desc:"Immediately activate inactive meta-energy and keep all your tubes, upgrades etc.",descInactive:"You should have inactive meta-energy to use meta-energy converter.",price:10,active:function(){return Lb()},hideInactive:!1,onBuyFnc:function(){cf()}},{name:"FREE Meta-energy refund",desc:"Refunds all meta-energy upgrades to be able to re-distribute meta-energy.",descInactive:"You should have meta-energy upgrades to use meta-energy refund.",
price:0,availCntFnc:function(){return b.reset.freeRefundCnt},active:function(){return 0<b.reset.freeRefundCnt&&Nb()},hideInactive:!0,onBuyFnc:function(){gf()}},{name:"Meta-energy refund",desc:"Refunds all meta-energy upgrades to be able to re-distribute meta-energy.",descInactive:"You should have meta-energy upgrades to use meta-energy refund.",price:1,active:function(){return 0>=b.reset.freeRefundCnt&&Nb()},hideInactive:!0,onBuyFnc:function(){gf()}},{name:"FREE abilities refund",desc:"Refunds all ability upgrades to be able to re-distribute ability points.",
descInactive:"",price:0,availCntFnc:function(){return b.abilitiesFreeRefundCnt},active:function(){return 0<b.abilitiesFreeRefundCnt&&Rd()},hideInactive:!0,onBuyFnc:function(){jg()}},{name:"Abilities refund",desc:"Refunds all ability upgrades to be able to re-distribute ability points.",descInactive:"",price:1,active:function(){return 0>=b.abilitiesFreeRefundCnt&&Rd()},hideInactive:!0,onBuyFnc:function(){jg()}},{name:"Quick Upgrade",desc:"Fill your energy storage and do all upgrades you can afford for everything at no cost.",
price:10,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){var a,d=new g(b.energyMaxDC),c=Y(1,1);b.energyDC=new g(d);Ag(c);b.energyDC=new g(d);for(a=0;6>a;a++)if(!b.tubes[a].active&&Qc(a)&&(ne(a),b.energyDC=new g(d)),b.tubes[a].active){for(;wb(a);)oe(a),b.energyDC=new g(d);be(a,c);b.energyDC=new g(d);Tc(a,c);b.energyDC=new g(d);Pc(a,c);b.energyDC=new g(d);de(a,c);b.energyDC=new g(d)}}},{name:"Capacity & Energy",desc:'Increase your energy storage capacity <span class="num">&times;10</span> and fill it with energy.',
price:10,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.energyMaxDC=b.energyMaxDC.mul(10);b.energyDC=new g(b.energyMaxDC)}},{name:"Bounce +100%",desc:'Add permanent <span class="num">+100%</span> to bounce. Stacks additively.',price:20,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumBounceMult+=1;P()}},{name:"Bounce +500%",desc:'Add permanent <span class="num">+500%</span> to bounce. Stacks additively.',price:60,active:function(){return!0},hideInactive:!1,
onBuyFnc:function(){b.premium.premiumBounceMult+=5;P()}},{name:"Gravity +10%",desc:'Add permanent <span class="num">+10%</span> to the gravity. Stacks additively.',price:30,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumGravityMult+=.1;R()}},{name:"Gravity +50%",desc:'Add permanent <span class="num">+50%</span> to the gravity. Stacks additively.',price:90,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumGravityMult+=.5;R()}},{name:"Energy Multiplier +100%",
desc:'Add permanent <span class="num">+100%</span> to received energy. Stacks additively.',price:100,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyMult+=1}},{name:"Energy Multiplier +500%",desc:'Add permanent <span class="num">+500%</span> to received energy. Stacks additively.',price:300,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyMult+=5}},{name:"Idle Bonus Multiplier +100%",desc:'Add permanent <span class="num">+100%</span> to idle bonus multiplier. Stacks additively.',
price:30,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){ta();b.premium.premiumIdleMult+=1},onHelpFnc:he},{name:"Idle Bonus Multiplier +500%",desc:'Add permanent <span class="num">+500%</span> to idle bonus multiplier. Stacks additively.',price:90,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){ta();b.premium.premiumIdleMult+=5},onHelpFnc:he},{name:"Idle Time +100%",desc:'Add permanent <span class="num">+100%</span> to idle multiplier growth time. Stacks additively.',
descInactive:'You should have <i>Idle bonus multiplier</i> greater than <span class="num">zero</span>.',price:30,active:function(){return 1<Va()},hideInactive:!1,onBuyFnc:function(){b.premium.premiumIdleMultTime+=1}},{name:"Idle Time +500%",desc:'Add permanent <span class="num">+500%</span> to idle multiplier growth time. Stacks additively.',price:90,active:function(){return 1<Va()},hideInactive:!0,onBuyFnc:function(){b.premium.premiumIdleMultTime+=5}},{name:"Energy Generator Improver",desc:"Improve <i>Energy generator</i> to generate energy enough to improve +1 tube more. Stacks additively (max: 35).",
descInactive:"You should have <i>Energy generator</i> to buy this upgrade. Stacks additively (max: 35).",price:30,availCntFnc:rd,active:function(){return qa()&&0<rd()},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyGeneratorInc++}},{name:"Energy Generator Improver x5",desc:"Improve <i>Energy generator</i> to generate energy enough to improve +5 tubes more. Stacks additively (max: 35).",descInactive:"",price:90,availCntFnc:$e,active:function(){return qa()&&0<$e()},hideInactive:!0,onBuyFnc:function(){b.premium.premiumEnergyGeneratorInc+=
5}},{name:"Time Travel 1 Hour",desc:'Jump into the future by <span class="num">1</span> hour.',descInactive:'You should have <i>Auto-capacity extender</i> to jump into the future by <span class="num">1</span> hour.',price:10,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!1,onBuyFnc:function(){Ta();sa(3600,!0)}},{name:"Time Travel 4 Hours",desc:'Jump into the future by <span class="num">4</span> hours.',descInactive:"",price:20,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,
onBuyFnc:function(){Ta();sa(14400,!0)}},{name:"Time Travel 12 Hours",desc:'Jump into the future by <span class="num">12</span> hours.',descInactive:"",price:30,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Ta();sa(43200,!0)}},{name:"Time Travel 1 Day",desc:'Jump into the future by <span class="num">1</span> day.',descInactive:"",price:40,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Ta();sa(86400,!0)}},{name:"Time Travel 3 Days",
desc:'Jump into the future by <span class="num">3</span> days.',descInactive:"",price:60,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Ta();sa(259200,!0)}},{name:"Time Travel 7 Days",desc:'Jump into the future by <span class="num">7</span> days.',descInactive:"",price:100,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Ta();sa(604800,!0)}}],kb={bounce:{file:"ball_bounce.ogg",isSFX:!0},pop:{file:"bubble_pop.ogg",isSFX:!0},
ability:{file:"firework.ogg",isSFX:!0},click:{file:"click.wav",isSFX:!0},upgrade:{file:"upgrade.ogg",isSFX:!0},music0:{file:"breezy-ukulele-pop.ogg",isSFX:!1},music1:{file:"happy-place.ogg",isSFX:!1},music2:{file:"lets-go-to-happy-land.ogg",isSFX:!1}},Bf=3,eh=[255,0,0,1],fh=[0,0,0,1],gh=[0,0,0,1],hh=[0,0,0,1],ih=[255,0,0,1],jh=[238,238,238,1],kh=[255,255,255,1],lh=[238,238,238,1],mh=[255,0,0,1],nh=[131,131,128,1],oh=[255,255,255,1],ph=[131,131,128,1],Ef={"default":{name:"Default",file:"",imgDir:"theme-default",
circleStrokeColor:"#000",tubeRectColor:"#000",abilityProgressColor:"#f00",abilityProgressColorRGBA:eh,bounceTextColorRGBA:fh,bounceTextShadow:"#aaa",qteTextColorRGBA:gh,tutorialTextColorRGBA:hh},bootstrap3d:{name:"3D",file:"bootstrap-theme.min.css",imgDir:"theme-default",circleStrokeColor:"#000",tubeRectColor:"#000",abilityProgressColor:"#f00",abilityProgressColorRGBA:eh,bounceTextColorRGBA:fh,bounceTextShadow:"#aaa",qteTextColorRGBA:gh,tutorialTextColorRGBA:hh},dark:{name:"Dark",file:"theme-dark.min.css",
imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#eee",abilityProgressColor:"#f00",abilityProgressColorRGBA:ih,bounceTextColorRGBA:jh,bounceTextShadow:"#555",qteTextColorRGBA:kh,tutorialTextColorRGBA:lh},dark3d:{name:"Dark 3D",file:"theme-dark-3d.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#eee",abilityProgressColor:"#f00",abilityProgressColorRGBA:ih,bounceTextColorRGBA:jh,bounceTextShadow:"#555",qteTextColorRGBA:kh,tutorialTextColorRGBA:lh},night:{name:"Night",
file:"theme-night.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#838380",abilityProgressColor:"#f00",abilityProgressColorRGBA:mh,bounceTextColorRGBA:nh,bounceTextShadow:"#555",qteTextColorRGBA:oh,tutorialTextColorRGBA:ph},aqua:{name:"Aqua",file:"theme-aqua.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#838380",abilityProgressColor:"#f00",abilityProgressColorRGBA:mh,bounceTextColorRGBA:nh,bounceTextShadow:"#555",qteTextColorRGBA:oh,tutorialTextColorRGBA:ph}},
qc=[[1,189,13537],[1,459,27486],[1,1006,40152],[1,2942,55719],[2,4722,58930],[12,5092,110763]],Na=[{name:"start",activeTabName:!1,activateFnc:function(){return!0},activateOnce:!0,continueButton:!1,finishFnc:function(){return ug()},text:"",hidePanel:!0,highlightElements:!1}],Jf=Na.length,da=null,Yi=6E4,Kd=0,Ba="",X="",Ec="",jb={},Fc=!1,jj=3600,ij="https://api.almostidle.com/timestamp.php",ab=!1,Ga=!1,Ld=0,Ha=0,Ca=!1,nk=5E3,wj=.0644,M=null,ba=!1,Ie=!1,Fa=!1,Ph=5E3,nj=3E4,qj=1E3,I={isGuest:!0,userId:!1,
userName:"",token:"",adsAvailable:!1},Wg=0,tj=Math.log(1.00000002),uj=Math.log(1.0000004),Pd=!1,Nd=!1,Od=!1,yj="https://api.almostidle.com/info.php?game=",v=-1,Oc=[],Ud=[],Vd=!1,Wd=!1,qg=Math.log(100),Gj=Math.log(1.03),Bd,sg,Hc=[],mb=[],Ug=20,Yj=50,ak=1E3,bk=0,Tg=50,kk=.4,ek=.8,ck=4,Mc=5,Vg=12,hk=Vg-Mc,dk=10,sb=30,ve=100,gk=ve-sb,lk=.3,Wc=sb/2,Zj=xa-Wc-Wc,Sg=pa-Wc,jk=0,ik=xa-1,ue=0,fk=ue+ve/2,la=!1,Qa=!1,za=!1,m={posX:0,posY:0,size:sb,fontSize:Mc,opacity:0,valueDC:new g(0)},nb,Gd=!1,ee=!1,zc=100,
Mi=3,Jc=500,ud=120,Ij=ud/2,Hj=5,mk=.5,ie=!1,xb=0,Wa,Dg=xa-2-30,W,D,ra=1,Eg=Math.log(1.1),Mj=Math.log(1.15),ia=[{level:10,mult:2},{level:50,mult:5},{level:100,mult:20},{level:500,mult:1E6},{level:1E3,mult:1E9},{level:2E3,mult:1E13},{level:3E3,mult:1E13},{level:5E3,mult:1E13},{level:7E3,mult:1E13},{level:11E3,mult:1E14}],Fg=ia.length-1,vb=[],Da=0,tb,ub,ua,Xj="",Wf="https://api.almostidle.com/",Aa=!1,qb=null,Ka=function(){function a(a,b){if(!c[a]){c[a]={};for(var d=0;d<a.length;d++)c[a][a.charAt(d)]=
d}return c[a][b]}var b=String.fromCharCode,c={},e={compressToBase64:function(a){if(null==a)return"";a=e._compress(a,6,function(a){return"abcdefghqEPQRSTrstuvwxyzijklmnFGHIJKLMNOop0147852963ABCDUVWXYZ+/=".charAt(a)});switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:e._decompress(b.length,32,function(c){return a("abcdefghqEPQRSTrstuvwxyzijklmnFGHIJKLMNOop0147852963ABCDUVWXYZ+/=",
b.charAt(c))})},compressToUTF16:function(a){return null==a?"":e._compress(a,15,function(a){return b(a+32)})+" "},decompressFromUTF16:function(a){return null==a?"":""==a?null:e._decompress(a.length,16384,function(b){return a.charCodeAt(b)-32})},compressToUint8Array:function(a){a=e.compress(a);for(var b=new Uint8Array(2*a.length),c=0,d=a.length;c<d;c++){var g=a.charCodeAt(c);b[2*c]=g>>>8;b[2*c+1]=g%256}return b},decompressFromUint8Array:function(a){if(null===a||void 0===a)return e.decompress(a);for(var c=
Array(a.length/2),g=0,l=c.length;g<l;g++)c[g]=256*a[2*g]+a[2*g+1];var q=[];c.forEach(function(a){q.push(b(a))});return e.decompress(q.join(""))},compressToEncodedURIComponent:function(a){return null==a?"":e._compress(a,6,function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(a)})},decompressFromEncodedURIComponent:function(b){if(null==b)return"";if(""==b)return null;b=b.replace(/ /g,"+");return e._decompress(b.length,32,function(c){return a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",
b.charAt(c))})},compress:function(a){return e._compress(a,16,function(a){return b(a)})},_compress:function(a,b,c){if(null==a)return"";var d,e,g={},k={},n="",p="",m="",v=2,x=3,y=2,z=[],t=0,r=0,w;for(w=0;w<a.length;w+=1)if(n=a.charAt(w),Object.prototype.hasOwnProperty.call(g,n)||(g[n]=x++,k[n]=!0),p=m+n,Object.prototype.hasOwnProperty.call(g,p))m=p;else{if(Object.prototype.hasOwnProperty.call(k,m)){if(256>m.charCodeAt(0)){for(d=0;d<y;d++)t<<=1,r==b-1?(r=0,z.push(c(t)),t=0):r++;e=m.charCodeAt(0);for(d=
0;8>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}else{e=1;for(d=0;d<y;d++)t=t<<1|e,r==b-1?(r=0,z.push(c(t)),t=0):r++,e=0;e=m.charCodeAt(0);for(d=0;16>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}v--;0==v&&(v=Math.pow(2,y),y++);delete k[m]}else for(e=g[m],d=0;d<y;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1;v--;0==v&&(v=Math.pow(2,y),y++);g[p]=x++;m=String(n)}if(""!==m){if(Object.prototype.hasOwnProperty.call(k,m)){if(256>m.charCodeAt(0)){for(d=0;d<y;d++)t<<=1,r==
b-1?(r=0,z.push(c(t)),t=0):r++;e=m.charCodeAt(0);for(d=0;8>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}else{e=1;for(d=0;d<y;d++)t=t<<1|e,r==b-1?(r=0,z.push(c(t)),t=0):r++,e=0;e=m.charCodeAt(0);for(d=0;16>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}v--;0==v&&(v=Math.pow(2,y),y++);delete k[m]}else for(e=g[m],d=0;d<y;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1;v--;0==v&&y++}e=2;for(d=0;d<y;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1;for(;;)if(t<<=1,r==
b-1){z.push(c(t));break}else r++;return z.join("")},decompress:function(a){return null==a?"":""==a?null:e._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(a,c,e){var g=[],k=4,m=4,p=3,n="",v=[],w,x,A,y,z,t=e(0),r=c,B=1;for(w=0;3>w;w+=1)g[w]=w;n=0;A=Math.pow(2,2);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=e(B++)),n|=(0<x?1:0)*y,y<<=1;switch(n){case 0:n=0;A=Math.pow(2,8);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=e(B++)),n|=(0<x?1:0)*y,y<<=1;z=b(n);break;case 1:n=0;A=Math.pow(2,
16);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=e(B++)),n|=(0<x?1:0)*y,y<<=1;z=b(n);break;case 2:return""}w=g[3]=z;for(v.push(z);;){if(B>a)return"";n=0;A=Math.pow(2,p);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=e(B++)),n|=(0<x?1:0)*y,y<<=1;switch(z=n){case 0:n=0;A=Math.pow(2,8);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=e(B++)),n|=(0<x?1:0)*y,y<<=1;g[m++]=b(n);z=m-1;k--;break;case 1:n=0;A=Math.pow(2,16);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=e(B++)),n|=(0<x?1:0)*y,y<<=1;g[m++]=b(n);z=m-1;k--;break;case 2:return v.join("")}0==
k&&(k=Math.pow(2,p),p++);if(g[z])n=g[z];else if(z===m)n=w+w.charAt(0);else return null;v.push(n);g[m++]=w+n.charAt(0);k--;w=n;0==k&&(k=Math.pow(2,p),p++)}}};return e}();H.directive("mPreventDefault",function(){return function(a,b,c){b.on("click",function(a){a.preventDefault()})}});angular.module("ui.bootstrap.m",["ui.bootstrap.m.tpls","ui.bootstrap.m.progressbar"]);angular.module("ui.bootstrap.m.tpls",["uibm/template/progressbar/progressbar.html"]);angular.module("ui.bootstrap.m.progressbar",[]).constant("uibmProgressConfig",
{animate:!0,max:new g(100)}).controller("UibmProgressController",["$scope","$attrs","uibmProgressConfig",function(a,b,c){function e(){return angular.isDefined(a.maxParam)?new g(a.maxParam):new g(c.max)}var f=this,k=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[];a.max=e();this.addBar=function(a,b,c){k||b.css({transition:"none"});this.bars.push(a);a.max=e();a.title=c&&angular.isDefined(c.title)?c.title:"progressbar";a.$watch("value",function(b){a.recalculatePercentage()});
a.recalculatePercentage=function(){var b=f.bars.reduce(function(a,b){b.percent=g.mul(100,b.value).div(b.max).toFixed(2);return a+b.percent},0);100<b&&(a.percent-=b-100)};a.$on("$destroy",function(){b=null;f.removeBar(a)})};this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1);this.bars.forEach(function(a){a.recalculatePercentage()})};a.$watch("maxParam",function(a){f.bars.forEach(function(a){a.max=e();a.recalculatePercentage()})})}]).directive("uibmProgressbar",function(){return{replace:!0,
transclude:!0,controller:"UibmProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uibm/template/progressbar/progressbar.html",link:function(a,b,c,e){e.addBar(a,angular.element(b.children()[0]),{title:c.title})}}});angular.module("uibm/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uibm/template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}"></div><div class="progress-text" ng-transclude></div></div>\n')}])})();
