(function(){function Wa(){return b.buyAmountStepPosRight}function mh(a){b.buyAmountStepPosRight=a}function zb(a){return"Hotkey: "+(9>a?a+1:9==a?0:"-")}function nh(a){return Wa()?zb(a+Ab):zb(a)}function oh(a){return Wa()?zb(a):zb(a+Xa)}function ja(a,b){return{rel:a,step:b}}function Xc(){return"Main"==ca?"U"+H:"Reset"==ca?"Reset":"Main"}function Yc(a){var d=Xc();d in b.buyAmountValue||(b.buyAmountValue[d]=ja(0,1));b.buyAmountValue[d].rel=a}function Zc(a){var d=Xc();d in b.buyAmountValue||(b.buyAmountValue[d]=
ja(0,1));b.buyAmountValue[d].step=a}function h(){var a=Xc();return a in b.buyAmountValue?b.buyAmountValue[a]:ja(0,1)}function $c(a){return 1<=a?ja(0,a):0==a?ja(1,1):ja(a,1)}function xe(a){ca=a;b.tutorial.lastClickEvent="clickTab"+ca;Bb();b.tutorial.lastClickEvent=""}function ph(a){return H==a}function va(a){H=a;b.tutorial.lastClickEvent="clickUpgradeTab"+H;Bb();b.tutorial.lastClickEvent=""}function N(a,d,c,f){"undefined"===typeof d&&(d=qh);"undefined"===typeof c&&(c=rh);"undefined"===typeof f&&(f=
b.numberNotation);a=new e(a);var g=e.abs(a);if(g.gte(1E3)){var z=!1;if("sci"!=f){g=Math.floor(g.e/3)-1;z=3*(g+1);if("engineering"==f)return a.e-=z,a.toFixed(c)+"E"+z;if(g>=sh)z=!0;else return a.e-=z,a.toFixed(c)+(4>g?"":" ")+ye[g]}if(z||"sci"==f)return a.toExponential(c)}return a.toFixed(d)}function ad(){return Math.min(th,1+(b.boost.daily.daysInRow-1)*uh)}function bd(){return ze("dailyBoost")}function Ya(a,d,c){if(0==b.boost.daily.daysInRow%Ae)b.boost.daily.isDailyBoostGenerated||(b.boost.daily.generatedDailyBoost=
Cb,b.boost.daily.generatedDailyValue=Math.min(vh,b.boost.daily.daysInRow/Ae-1+wh),b.boost.daily.isDailyBoostGenerated=!0);else{if(!b.boost.daily.isDailyBoostGenerated||a)b.boost.daily.generatedDailyBoost=Math.floor(Math.random()*xh);if(!b.boost.daily.isDailyBoostGenerated||d)b.boost.daily.generatedDailyValue=Math.random()*(wa[b.boost.daily.generatedDailyBoost].valueMax-wa[b.boost.daily.generatedDailyBoost].valueMin)+wa[b.boost.daily.generatedDailyBoost].valueMin;if(!b.boost.daily.isDailyBoostGenerated||
c)b.boost.daily.generatedDailyTime=Math.floor(24*Math.random())+1;b.boost.daily.isDailyBoostGenerated=!0}}function yh(){Db=!0}function zh(){Db=!1}function Ah(){Db=!1;b.boost.daily.isDailyBoostGenerated&&(b.boost.daily.generatedDailyBoost==Cb?b.premium.premiumMoney+=b.boost.daily.generatedDailyValue:(bd()&&(b.boost.timers.dailyBoost=0,Be("dailyBoost")),I="dailyBoost",b.boost.daily.selectedDailyBoost=b.boost.daily.generatedDailyBoost,b.boost.daily.selectedDailyValue=b.boost.daily.generatedDailyValue*
ad(),O.dailyBoost.rewardTime=3600*b.boost.daily.generatedDailyTime,Ce()),b.boost.daily.isDailyBoostGenerated=!1,da(!0));C("upgrade")}function De(a){return a==Cb?'<img src="imgs/'+Za()+'/premium.svg" class="premium-crystal"/>':wa[a].title}function Bh(){return De(b.boost.daily.generatedDailyBoost)}function Ch(){return De(b.boost.daily.selectedDailyBoost)}function Ee(){return b.boost.daily.daysInRow}function Dh(){var a=new Date,a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);b.boost={bounceMult:1,
gravityMult:1,energyMult:1,densityMult:1,bubbleProbInc:0,bubbleCapMult:1,idleMult:1,idleTimeInc:0,timers:{},daily:{nextDay:{d:a.getDate(),m:a.getMonth(),y:a.getFullYear()},daysInRow:0,isDailyBoostGenerated:!1,generatedDailyBoost:0,generatedDailyValue:0,generatedDailyTime:0,selectedDailyBoost:0,selectedDailyValue:0}};for(var d in O)O.hasOwnProperty(d)&&(b.boost.timers[d]=0)}function ze(a){return 0<b.boost.timers[a]}function Be(a){0==b.boost.timers[a]&&O[a].rewardEnd&&O[a].rewardEnd()}function Fe(a){I=
a;cd=!0}function Eh(){return cd}function Fh(){return ka?"Watch ads to get valuable boosts":"Visit a website and click any game to get the reward"}function Gh(){return I?(ka?"Watch an ad and ":"Visit a website and click any game to ")+O[I].dlgText():""}function Hh(){return ka?"Watch an ad":"Visit a website"}function Ih(a){cd=!1;a?la()?(B.adsAvailable&&W.mtx.showIncentivizedAd(),v("Started","Boosts",I)):(ea&&ea.openAdUrl(),v("AIStarted_"+ea.getAdlId(),"Boosts",I)):v("DialogCancel","Boosts",I)}function Ce(){I&&
(0==b.boost.timers[I]&&O[I].reward(),0<O[I].rewardTime&&(b.boost.timers[I]+=O[I].rewardTime),I="")}function Jh(){b.achievementsLevel=[];b.achievementsMult=[];b.achievementStatsDC=[];for(var a=0;a<Ge;a++)b.achievementsLevel[a]=0,b.achievementsMult[a]=S[a].mult?1:0,b.achievementStatsDC[a]=new e(0);Eb=!1}function Fb(a,d,c){"undefined"===typeof d&&(d="");"undefined"===typeof c&&(c=!1);Kh();He||(He=!0,!(ka=-1!=window.location.search.indexOf("kongregate=1"))||la()||Ga||(Ga=!0,dd("Starting KongregateAPI...",
"",Lh,Mh),Gb=!0));Ha=$a=!1;Ia=0;b.buyAmountValue={};Jh();b.reset={resetCnt:0,freeRefundCnt:0,active:0,inactive:0,inactiveTotal:0,bonusMult:0};Ie();b.reset.totalMult=1;Dh();b.premium={premiumMoney:0,isSpecPackBought:{},boughtPackList:{},premiumEnergyMult:1,premiumBounceMult:1,premiumGravityMult:1,premiumIdleMult:1,premiumIdleMultTime:1,premiumEnergyGeneratorInc:0};qa=!1;b.tutorial={enabled:!0,activeId:-1,finishedIds:[],lastClickEvent:""};Nh();Oh(!0);Je(!0);b.energyDC=new e(0);b.energyMaxDC=new e(100);
b.energyLevelDC=new e(0);b.energyExtRemain=0;Ph();Ke();Hb||(Hb=JSON.stringify(b));a||"ok"!=ed(d,!1,c)?b.lastUpdateTime=(new Date).getTime():d||fd||(gd=!0,Ib=new e(b.energyDC),Le=b.lastUpdateTime);R();b.reset.totalMult=1;hd();Me();id();jd();ka||ea||(ea=Qh(Rh));T=[];null==ab&&(ab=document.getElementById("canvas"),ra=ab.getContext("2d"),Jb=document.getElementById("canvas-bottom"),kd=Jb.getContext("2d"),ab.width=xa,ab.height=sa,Jb.width=xa,Jb.height=sa);bb();Ne();ga("set","appName","Idle Bouncer Event");
ga("set","appVersion","1.0.0.0");a=document.referrer;try{window.parent!=window&&(a=window.parent.document.referrer)&&ga("set","referrer",a)}catch(f){}ga("send","pageview");v("Version","Game","1.0.0.0");setTimeout(function(){ka?v("Site","Game","kongregate.com "+(la()?"API":"no API")):v("Site","Game","other")},2E4);/^(https?:\/\/)?[^/]*kongregate\.com(\/.*)?$/i.test(a)?v("SiteHost","Game","kongregate.com"):v("SiteHost","Game","other")}function Sh(a){b.numberNotation=a;v("NumNotation","Settings",a)}
function Oe(a){var b=Math.floor(a/3600).toString(),c=Math.floor(a%3600/60).toString();a=(a%60).toString();1==a.length&&(a="0"+a);1==c.length&&(c="0"+c);1==b.length&&(b="0"+b);return b+":"+c+":"+a}function Kb(a){var b;100>a?b="second":6E3>a?(a/=60,b="minute"):18E4>a?(a/=3600,b="hour"):864E3>a?(a/=86400,b="day"):3024E3>a?(a/=604800,b="week"):31536E3>a?(a/=2592E3,b="month"):(a/=31536E3,b="year");return a.toFixed(1)+" "+b+"s"}function ld(a){var b=Math.floor(a/86400),c=Math.floor(a)%60,f=Math.floor(a/
60)%60;a=Math.floor(a/3600)%24;var g="";0<b&&(g+=b+" day",1<b&&(g+="s"),g+=" ");10>a&&(g+="0");g+=a+":";10>f&&(g+="0");g+=f+":";10>c&&(g+="0");return g+=c.toString()}function Pe(a,b,c){var f=a[b],g=f.length;if(c<g)return new e(f[c]);a=a[b+"Fnc"];if(null!==a)return a(c);if(0==g)return new e(0);if(1==g)return new e(f[0]);a=f[g-2];f=f[g-1];return a.isZero()?new e(f):f.mul(e.pow(f.div(a),c-g+1))}function X(a,b){"object"!==typeof b&&(b=$c(b));return 0<b.rel&&1>b.rel?a*b.rel:a}function Lb(a,b){"object"!==
typeof b&&(b=$c(b));return 0<b.rel&&1>b.rel?e.mul(a,b.rel):new e(a)}function P(a,b,c,f,g,z,t){"object"!==typeof c&&(c=$c(c));var k=c.rel;c=c.step;b>Th&&(c=1,-1==k&&(k=0));0<k||-1==k?(a=1==k||-1==k?new e(a):e.mul(a,k),g=Math.floor(Qe(a,g,z,t))):g=c;if(-1!=k&&0<f&&g>f)return f;0==k?b=g:(k=-1==k?c:g<c?c:g,1==c?b=k:(k=Math.floor((b+k)/c)*c,b=k>b?k-b:0));return 0==f?b:Math.min(f,b)}function M(a,b,c){if(1==b)return e.mul(a,c);var f=a.toString()+";"+b.toString()+";"+c.toString();if(f in cb)return cb[f];
1E5<md&&(cb=[],md=0);cb[f]=e.mul(a,e.sub(1,e.pow(b,c))).div(e.sub(1,b));md++;return cb[f]}function Qe(a,b,c,f){if(1==c)return e.div(a,b).toNumber();f=f||Math.log(c);var g=a.toString()+";"+b.toString()+";"+c.toString();if(g in db)return db[g];1E5<nd&&(db=[],nd=0);db[g]=e.ln(e.sub(1,e.mul(a,e.sub(1,c)).div(b))).div(f).toNumber();nd++;return db[g]}function Uh(){eb=!0}function Vh(){eb=!1}function Wh(){return eb}function od(a){return D[a].finishTime?(D[a].finishTime-(new Date).getTime())/1E3:!1}function Re(a){var d=
od(a);return!D[a].hide&&!b.premium.isSpecPackBought[a]&&(!1===d||0<d)}function Xh(){for(var a in D)if(D.hasOwnProperty(a)&&D[a].buyOnce&&Re(a))return!0;return!1}function Se(a){eb=!1;var b=[a];la()&&W.mtx.purchaseItems(b,Yh);v("BuyStart","Premium",a,D[a].price)}function Te(a){Mb=!0;qa=a}function Zh(){Mb=!1}function $h(){return Mb}function Ue(){return!1!==qa&&b.premium.premiumMoney>=ma[qa].price}function Ve(){var a=qa;if(b.premium.premiumMoney>=ma[a].price){b.premium.premiumMoney-=ma[a].price;if(ma[a].onBuyFnc)ma[a].onBuyFnc();
da(!0);v("BuyItem","Premium",ma[a].name,ma[a].price)}qa=!1;C("upgrade")}function Ie(){b.reset.autoJumpLevel=0;b.reset.autoJumpUpgPrice=ai;b.reset.autoJumpHeight=5;b.reset.gravityLevel=0;b.reset.gravityUpgPrice=bi;b.reset.gravityMult=1;b.reset.densityLevel=0;b.reset.densityUpgPrice=ci;b.reset.densityMult=1;b.reset.bounceLevel=0;b.reset.bounceUpgPrice=di;b.reset.bounceMult=1;b.reset.bubbleProbLevel=0;b.reset.bubbleProbUpgPrice=ei;b.reset.bubbleProb=.01;b.reset.bubbleCapLevel=0;b.reset.bubbleCapUpgPrice=
fi;b.reset.bubbleCapMult=1;b.reset.removeSpikes=!0;b.reset.idleMultLevel=0;b.reset.idleMultUpgPrice=gi;b.reset.idleMult=1;b.reset.idleMultTimeLevel=0;b.reset.idleMultTimeUpgPrice=hi;b.reset.idleMultTime=1;b.reset.energyGeneratorLevel=0;b.reset.energyGeneratorUpgPrice=ii}function We(){return 1<=b.reset.inactive}function ji(){return 0}function ki(){return e.max(0,e.pow(10,b.reset.inactiveTotal+Xe).mul(Ye).sub(b.statistics.energyDC))}function Y(a){b.reset.active-=a;b.reset.totalMult=1}function li(){return pd}
function mi(){We()&&(pd=!0)}function ni(){pd=!1}function fb(){return b.reset.autoJumpLevel||b.reset.bounceLevel||b.reset.densityLevel||b.reset.gravityLevel||b.reset.bubbleProbLevel||b.reset.bubbleCapLevel||b.reset.idleMultLevel||b.reset.idleMultTimeLevel||b.reset.energyGeneratorLevel}function Ze(){if(fb()){b.statistics.resetRefund++;0<b.reset.freeRefundCnt&&b.reset.freeRefundCnt--;var a=b.reset.autoJumpLevel,d=b.reset.bounceLevel,c=b.reset.densityLevel,f=b.reset.gravityLevel,g=b.reset.bubbleProbLevel,
e=b.reset.bubbleCapLevel,t=b.reset.idleMultLevel,k=b.reset.idleMultTimeLevel,l=b.reset.energyGeneratorLevel;b.reset.gravityMult=1;Ie();R();U();0<a&&(b.reset.active+=Nb(a));0<d&&(b.reset.active+=Ob(d));0<c&&(b.reset.active+=Pb(c));0<f&&(b.reset.active+=Qb(f));0<g&&(b.reset.active+=Rb(g));0<e&&(b.reset.active+=Sb(e));0<t&&(b.reset.active+=Tb(t));0<k&&(b.reset.active+=Ub(k));0<l&&(b.reset.active+=Vb(l));b.reset.totalMult=1}}function $e(){return b.reset.energyExtLevel}function Wb(a){return P(b.reset.active,
$e(),a,0,b.reset.energyExtUpgPrice,Xb,oi)}function qd(a){a=Wb(a);return 1>=a?b.reset.energyExtUpgPrice:M(b.reset.energyExtUpgPrice,Xb,a).toNumber()}function af(a){return 0<Wb(a)&&X(b.reset.active,a)>=qd(a)}function bf(){return b.reset.autoJumpLevel}function cf(){return b.reset.autoJumpHeight}function Yb(a){return P(b.reset.active,bf(),a,0,b.reset.autoJumpUpgPrice,Zb,pi)}function Nb(a){a=Yb(a);return 1>=a?b.reset.autoJumpUpgPrice:M(b.reset.autoJumpUpgPrice,Zb,a).toNumber()}function df(a){var d=Yb(a);
return 0<d&&X(b.reset.active,a)>=Nb(d)}function $b(a){return P(b.reset.active,b.reset.bounceLevel,a,0,b.reset.bounceUpgPrice,ac,qi)}function Ob(a){a=$b(a);return 1>=a?b.reset.bounceUpgPrice:M(b.reset.bounceUpgPrice,ac,a).toNumber()}function ef(a){return 0<$b(a)&&X(b.reset.active,a)>=Ob(a)}function bc(a){return P(b.reset.active,b.reset.densityLevel,a,0,b.reset.densityUpgPrice,cc,ri)}function Pb(a){a=bc(a);return 1>=a?b.reset.densityUpgPrice:M(b.reset.densityUpgPrice,cc,a).toNumber()}function ff(a){return 0<
bc(a)&&X(b.reset.active,a)>=Pb(a)}function dc(a){return P(b.reset.active,b.reset.gravityLevel,a,0,b.reset.gravityUpgPrice,ec,si)}function Qb(a){a=dc(a);return 1>=a?b.reset.gravityUpgPrice:M(b.reset.gravityUpgPrice,ec,a).toNumber()}function gf(a){return 0<dc(a)&&X(b.reset.active,a)>=Qb(a)}function fc(a){return P(b.reset.active,b.reset.bubbleProbLevel,a,0,b.reset.bubbleProbUpgPrice,gc,ti)}function Rb(a){a=fc(a);return 1>=a?b.reset.bubbleProbUpgPrice:M(b.reset.bubbleProbUpgPrice,gc,a).toNumber()}function hf(a){return 0<
fc(a)&&X(b.reset.active,a)>=Rb(a)}function hc(a){return P(b.reset.active,b.reset.bubbleCapLevel,a,0,b.reset.bubbleCapUpgPrice,ic,ui)}function Sb(a){a=hc(a);return 1>=a?b.reset.bubbleCapUpgPrice:M(b.reset.bubbleCapUpgPrice,ic,a).toNumber()}function jf(a){return 0<hc(a)&&X(b.reset.active,a)>=Sb(a)}function vi(){return rd}function gb(){return b.reset.removeSpikes}function kf(){return!gb()&&b.reset.active>=rd}function jc(a){return P(b.reset.active,b.reset.idleMultLevel,a,0,b.reset.idleMultUpgPrice,kc,
wi)}function Tb(a){a=jc(a);return 1>=a?b.reset.idleMultUpgPrice:M(b.reset.idleMultUpgPrice,kc,a).toNumber()}function lf(a){return 0<jc(a)&&X(b.reset.active,a)>=Tb(a)}function lc(a){return P(b.reset.active,b.reset.idleMultTimeLevel,a,0,b.reset.idleMultTimeUpgPrice,mc,xi)}function Ub(a){a=lc(a);return 1>=a?b.reset.idleMultTimeUpgPrice:M(b.reset.idleMultTimeUpgPrice,mc,a).toNumber()}function mf(a){return 0<lc(a)&&X(b.reset.active,a)>=Ub(a)}function nf(){return b.tubeImprLevelMax>=nc}function Ja(){return b.reset.energyGeneratorLevel}
function of(){return Math.max(0,b.tubeImprLevelMax-nc+1)}function yi(){return Math.max(b.tubeImprLevelMax+2,nc+1)}function pf(){return new e(b.reset.totalMult*b.premium.premiumEnergyMult*b.events.eventEnergyMult*b.boost.energyMult)}function qf(a){if(0==a)return new e(0);var d=b.premium.premiumEnergyGeneratorInc;return a<=rf?e.pow(zi,a+d).mul(pf()):sd(d%6+6*(a-rf+1+Math.floor(d/6))).mul(10).mul(pf())}function td(){return qf(Ja())}function hb(a){var d=of()-Ja();return 0<d?P(b.reset.active,Ja(),a,d,
b.reset.energyGeneratorUpgPrice,oc,Ai):0}function Vb(a){a=hb(a);return 1>=a?b.reset.energyGeneratorUpgPrice:M(b.reset.energyGeneratorUpgPrice,oc,a).toNumber()}function sf(a){return 0<hb(a)&&nf()&&X(b.reset.active,a)>=Vb(a)}function tf(a){if(!a)return"";if("{"==a[0])return a;var b=a.indexOf("$");if(-1==b)return decodeURIComponent(unescape(window.atob(a)));var c=a.substr(0,b);a=a.substr(b+1);a=parseInt(a,36);for(b=c.length-1;0<=b;b--)a-=c.charCodeAt(b)+7;if(0==a)return Ka.decompressFromBase64(c);throw Error("wrong checksum");
}function ed(a,d,c){"undefined"===typeof a&&(a="");"undefined"===typeof d&&(d=!1);"undefined"===typeof c&&(c=!1);try{var f=""!=a,g=f?tf(a):tf(window.localStorage.IdleBouncer);if(g){var g=JSON.parse(g),e=B.userId,t=B.userName;if(f&&!c&&(g.gameId&&"IdleBouncer"!=g.gameId||g.kongUserId&&g.kongUserId!=e||!g.kongUserId&&g.kongUser&&g.kongUser!=t))return"error";if(!d){var k=pc(g);k.eventParams?fd=!1:(k.eventParams=pc(JSON.parse(Hb)),fd=!0);0!=k.eventParams.saveVer&&(k.eventParams=pc(JSON.parse(Hb)));J=
k;if(-1!=J.saveVer){b=J.eventParams;b.kongUserId=J.kongUserId;b.kongUser=J.kongUser;b.premium.premiumMoney=J.premium.premiumMoney;b.premium.isSpecPackBought=J.premium.isSpecPackBought;b.premium.boughtPackList=J.premium.boughtPackList;var l,q,m=fa[na].itemStartId,u=m+fa[na].itemsCnt;for(l=m;l<u;l++)J.events.eventItems[l]&&!b.events.eventItems[l]&&uf(l,!1);for(l=0;l<vf;l++)q=ud[l],b.events.transferredEventBonus[q]=b.events[q]}}return"ok"}return"empty"}catch(p){return vd((f?c?"Cloud":"Import":"Load")+
(d?" check":"")+" error"+(p.message?" ("+p.message+")":""),!1),"error"}}function da(a,b){a&&(wd=qc=0);var c=(new Date).getTime();if(b||c>=wd&&c>=qc){wd=c+2E3;qc=c+6E4;c=xd();rc=!0;try{window.localStorage.IdleBouncer=c,b&&c!=window.localStorage.IdleBouncer&&(rc=!1)}catch(f){rc=!1}}}function xd(){if(-1!=J.saveVer){J.kongUserId=b.kongUserId;J.kongUser=b.kongUser;J.premium.premiumMoney=b.premium.premiumMoney;var a,d;for(a=0;a<vf;a++)d=ud[a],J.events[d]+=b.events[d]-b.events.transferredEventBonus[d],b.events.transferredEventBonus[d]=
b.events[d];for(a=b.events.eventItems.length-1;0<=a;a--)b.events.eventItems[a]&&(J.events.eventItems[a]=!0)}a=JSON.stringify(J);a=Ka.compressToBase64(a);d=0;for(var c=a.length-1;0<=c;c--)d+=a.charCodeAt(c)+7;return a+"$"+d.toString(36)}function Bi(a){a in L||(L[a]={audio:new Audio,loaded:!1,playing:!1},L[a].audio.onloadeddata=function(){L[a].loaded=!0},L[a].audio.onended=function(){L[a].playing=!1},L[a].audio.src=(ib[a].isSFX?"sfx/":"snd/")+ib[a].file)}function Kh(){for(var a in ib)ib.hasOwnProperty(a)&&
Bi(a)}function C(a){var d=ib[a].isSFX;L[a].loaded&&(d&&b.sfxEnabled||!d&&b.musicEnabled)&&(L[a].audio.currentTime=0,L[a].audio.volume=d?b.sfxVolume:b.musicVolume,L[a].audio.play(),L[a].playing=!0)}function Ci(){if(wf)return!0;for(var a=0;a<xf;a++)if(!L["music"+a].loaded)return!1;return wf=!0}function Nh(){sc={energyDC:{name:"Total energy collected",showRank:!0,bigNumLoDigits:2},metaEnergy:{name:"Total meta-energy activated",bigNumLoDigits:2},bounce:{name:"Total bounces",bigNumLoDigits:0},bubble:{name:"Total ghosts spawned",
bigNumLoDigits:0},bubbleClicked:{name:"Total ghosts clicked",bigNumLoDigits:0},reset:{name:"Total resets",showRank:!1,bigNumLoDigits:0},resetRefund:{name:"Total reset refunds",showRank:!1,bigNumLoDigits:0},improvementMax:{name:"Maximal tube improvement level",showRank:!1,bigNumLoDigits:0},time:{name:"Total active game time",showRank:!1,bigNumLoDigits:0},daysInRowMax:{name:"Maximal days played in a row",showRank:!1,bigNumLoDigits:0}};b.statistics={};for(var a in sc)sc.hasOwnProperty(a)&&(b.statistics[a]=
yf(a)?new e(0):0)}function zf(a){b.theme!=a&&(b.theme=a,bb())}function jb(){return b.theme}function Z(){return Af[jb()]}function Di(){return"default"!=jb()}function Ei(){return Z().file}function Za(){return Z().imgDir}function yd(){return b.tutorial.enabled}function La(){return yd()&&-1!=b.tutorial.activeId}function Fi(){return La()&&!Ma().hidePanel}function Ma(){return La()?Na[b.tutorial.activeId]:null}function Bf(){var a=Ma();return null!=a&&a.activeTabName&&ca!=a.activeTabName}function Gi(){var a=
Ma();return null==a?"":Bf()?"Click on the "+a.activeTabName+" tab.":a.text}function Hi(){var a=Ma();return null==a?!1:a.continueButton&&!Bf()}function zd(a){return La()&&Na[b.tutorial.activeId].name==a}function Ii(a){return zd(a)&&Na[b.tutorial.activeId].highlightElements}function Ji(){var a=Ma();return null!=a&&a.highlightElements}function Ki(){Cf()}function Df(a){b.tutorial.enabled=!1;a?v("ClickSkip","Tutorial","SkipOnStep"+b.tutorial.activeId,b.tutorial.activeId):v("Finish","Tutorial","FullTutorial")}
function Cf(a){var d;"undefined"===typeof a?(d=Ma(),a=b.tutorial.activeId):d=Na[a];null!=d&&(d.activateOnce&&(b.tutorial.finishedIds[a]=d.name),b.tutorial.activeId=-1,a==Ef-1?Df(!1):Bb())}function Ff(a){var d=Na[a];if(La())d.finishFnc()&&(v("FinishStep","Tutorial",d.name,a),Cf(a));else if(d.activateFnc())return b.tutorial.activeId=a,!0;return!1}function Bb(){if(yd())if(La())Ff(b.tutorial.activeId);else for(var a=0;a<Ef&&(a in b.tutorial.finishedIds||!Ff(a));a++);}function Gf(a){if(Gb){var b=!0;null!=
tc&&(b=tc(a||!1));b&&(Gb=!1,Ad="",Oa=0,tc=null)}}function Li(){0<Oa&&(new Date).getTime()>=Oa&&Gf(!0);return Gb}function Mi(){return Hf}function Ni(){return Ad}function Oi(){return 0==Oa?"":Math.ceil((Oa-(new Date).getTime())/1E3)}function dd(a,b,c,f){Hf=a;Ad=b||"";Oa=c?(new Date).getTime()+c:0;tc=f||null}function bb(){kd.clearRect(0,0,xa,sa);for(var a=kd,d,c=0;6>c;c++)if(b.tubes[c].active){d=E[c];var f=a,g=d.x,e=d.y,t=d.width;d=d.height;f.fillStyle="#fff";f.strokeStyle=Z().tubeRectColor;f.strokeRect(Math.floor(g),
Math.floor(e),Math.floor(t),Math.floor(d))}}function Ne(){ra.clearRect(0,0,xa,sa);var a=ra;if(zd("start")){var d="Click here to drop a jack-o'-lantern.; Each bounce gives you energy.;  Spend it to upgrade;   the tube amplifier and height,;    the jack-o'-lantern size and bounce.;     And use meta-energy to change the world!".split(";"),c={x:50,y:Pa,font:"bold 14px Arial",isFillText:!0,fillStrokeStyle:Z().tutorialTextColorRGBA.slice(),hAlign:"start",vAlign:"top",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,
shadowBlur:0},f;for(f in d)d.hasOwnProperty(f)&&(c.text=d[f],uc(a,c),c.y+=14);a.fillStyle="#f00";a.strokeStyle="#f00";a.lineWidth=2;a.beginPath();a.moveTo(49,11+Pa);a.lineTo(20,60+Pa);a.stroke();a.beginPath();a.moveTo(20,50+Pa);a.lineTo(20,60+Pa);a.lineTo(29,55+Pa);a.fill();a.lineWidth=1}for(var a=ra,g,e=0;6>e;e++)f=b.balls[e],f.active&&(g=V[e].x,d=V[e].y-f.y*ta-.5,c=Math.max(1,f.r*ta),vc[wc()].drawFnc(a,e,g,d,c,b.tubes[e].improvementLevel,Bd[e]),kb[e]&&(0>f.v?(g=Z().bounceTextColorRGBA.slice(),g[3]=
Math.max(0,Math.min(1,1-f.y/f.height)),a.fillStyle="rgba("+g.join(",")+")",a.fillRect(E[e].x,d+c,E[e].width,1)):kb[e]=!1));var a=ra,t;for(t in T)if(T.hasOwnProperty(t))switch(d=T[t],T[t].type){case "text":uc(a,d);break;case "img":a.globalAlpha=d.opacity;1==d.scale?a.drawImage(d.img,d.x,d.y):a.drawImage(d.img,d.x,d.y,d.img.width*d.scale,d.img.height*d.scale);a.globalAlpha=1;break;case "rect":c="rgba("+d.color.join(",")+")",d.isStroke?(a.strokeStyle=c,a.strokeRect(d.x,d.y,d.width,d.height)):(a.fillStyle=
c,a.fillRect(d.x,d.y,d.width,d.height))}t=ra;d=Cd();if(0<d)for(c=0;6>c;c++)b.tubes[c].active&&("percent"==If()?(a=Math.floor(1E3*Dd(c).div(d).toNumber())/10,Jf(t,V[c].x,V[c].y,12,a+"%")):Jf(t,V[c].x,V[c].y,9,N(Dd(c),1,0)));t=ra;for(a=0;6>a;a++)ya(a)&&(d=t,c=a,f=Math.min(1,Ed(c).div(Fd(c)).toNumber()),f=Math.floor(E[c].width*f),e=E[c].x+Math.floor((E[c].width-f)/2),c=E[c].bottom-1-Kf,d.fillStyle=Z().abilityProgressColor,d.fillRect(e,c,f,xc));t=ra;Gd&&oa&&(a=Math.floor(m.size),t.globalAlpha=m.opacity,
za?t.drawImage(lb,100*(1+Math.floor(Pi*(1-m.opacity))),0,yc,yc,Math.floor(m.posX),Math.floor(m.posY),a,a):Qa||t.drawImage(lb,0,0,yc,yc,Math.floor(m.posX),Math.floor(m.posY),a,a),za||(a={x:Math.floor(m.centerX),y:Math.floor(m.posY+.8*a),font:"bold "+Math.floor(m.fontSize)+"px Arial",isFillText:!0,fillStrokeStyle:Z().qteTextColorRGBA.slice(),hAlign:"center",vAlign:"middle",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,shadowBlur:0},a.text=N(m.valueDC,1,1),uc(t,a)),t.globalAlpha=1)}function uc(a,b){a.font=
b.font;a.textBaseline=b.vAlign;a.textAlign=b.hAlign;a.shadowColor=b.shadowColor;a.shadowOffsetX=b.shadowOffsX;a.shadowOffsetY=b.shadowOffsY;a.shadowBlur=b.shadowBlur;var c="rgba("+b.fillStrokeStyle.join(",")+")";b.isFillText?(a.fillStyle=c,a.fillText(b.text,Math.floor(b.x),Math.floor(b.y))):(a.strokeStyle=c,a.strokeText(b.text,Math.floor(b.x),Math.floor(b.y)))}function If(){return b.tubeInfo}function Qi(a){b.tubeInfo=a}function Jf(a,b,c,f,g){b={x:b,y:c+Ri,font:"bold "+f+"px Arial",isFillText:!0,fillStrokeStyle:Z().bounceTextColorRGBA.slice(),
hAlign:"center",vAlign:"top",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,shadowBlur:0};b.text=g;uc(a,b)}function Si(){return 0}function ua(a,d){d&&(b.lastUpdateTime=(new Date).getTime()-1E3*a)}function Ti(){}function Ui(){}function Vi(){}function Lf(){return"index.html?rnd="+Math.random()+(ka?"&kongregate=1":"")+""}function Wi(){return Xi&&0<(fa[na].finishTime-(new Date).getTime())/1E3}function Yi(){da(!1,!0);window.location.href=Lf()}function Zi(){return fa[na].title}function Hd(a){return b.events.eventItems[a]?
!0:!1}function uf(a,d){Hd(a)||(b.events.eventItems[a]=!0,b.events.eventBoughtItems[a]=d?!0:!1,mb[a].addFnc(),da(!0))}function Mf(a){for(var b=0,c=0;c<$i;c++)mb[c].eventCode==a&&Hd(c)&&b++;return b}function Nf(a){if(a<=nb)return ob[a]?new e(ob[a]):new e(1);if(0<a%20)return new e(1);for(var b;pb<a;)b=2*pb,Id[b]=(new e(16E3)).mul(Id[pb]),pb=b;for(;nb<a;){nb+=20;for(b=pb;20<b&&0!=a%b;)b/=2;ob[nb]=Id[b]}return ob[a]?new e(ob[a]):new e(1)}function Rh(a){if("started"==a)v("AIAdOpened_"+ea.getAdlId(),"Boosts",
I);else if("finished"==a)v("AIAdCompleted_"+ea.getAdlId(),"Boosts",I),Ce(),da(!0);else if("cancelled"==a||"error"==a)v("AIAdAbandoned_"+ea.getAdlId(),"Boosts",I),I=""}function zc(){return!Jd()&&!Kd()&&!1===Aa&&Of()}function Pf(){return(new Date).getTime()>Ld&&zc()}function Kd(){return"started"==Ba}function aj(){return"ok"==Ba}function bj(){return"error"==Ba}function Qf(a,b){Ba=a?"ok":"error";a||vd("Cloud save error ("+b+")",!1)}function cj(){if(Pf()){Ba="";var a;a=Ka.compressToBase64("e8g"+B.userId+
"u8t");var b=Ka.compressToBase64("uie"+B.userId+"s75"),c=xd();!1===Aa?(Aa="save",Qf&&(qb=Qf),Ac(Rf+"save.php",Sf,"game="+encodeURIComponent("IdleBouncer")+"&user="+encodeURIComponent(a)+"&pass="+encodeURIComponent(b)+"&data="+encodeURIComponent(c)),a=!0):a=!1;a&&(Ld=(new Date).getTime()+dj,Ba="started",Jd()||(aa=""))}}function ej(){return zc()}function Jd(){return"started"==aa}function Bc(){return"ok"==aa}function fj(){return"error"==aa}function gj(){return"empty"==aa}function Tf(a,b){aa=a?"ok":"error";
if(a){var c=ed(b,!0,!0);"ok"==c?Cc=b:(Cc="",Dc={},aa="empty"==c?"empty":"error")}else Cc="",Dc={},"user not found"==b||"no data"==b?aa="empty":vd("Cloud load error ("+b+")",!1)}function hj(){return Ec}function ij(){Ec=!0;if(zc()){aa="";var a;a=Ka.compressToBase64("e8g"+B.userId+"u8t");var b=Ka.compressToBase64("uie"+B.userId+"s75");!1===Aa?(Aa="load",Tf&&(qb=Tf),Ac(Rf+"load.php",Sf,"game="+encodeURIComponent("IdleBouncer")+"&user="+encodeURIComponent(a)+"&pass="+encodeURIComponent(b)),a=!0):a=!1;
a&&(aa="started",Kd()||(Ba=""))}}function jj(){Ec=!1}function kj(){var a;if(Bc()){a=new Date(Dc.lastUpdateTime);var b=a.getMonth(),c="0"+a.getHours(),f="0"+a.getMinutes(),g="0"+a.getSeconds();a=lj[b]+" "+a.getDate()+", "+a.getFullYear()+" "+c.substr(-2)+":"+f.substr(-2)+":"+g.substr(-2)}else a="n/a";return a}function mj(){return Bc()?Dc.energyDC:"n/a"}function yf(a){var b=a.length;return 1<b&&"D"===a[b-2]&&"C"===a[b-1]}function pc(a){if(Array.isArray(a)||"object"==typeof a)for(var b in a)if(a.hasOwnProperty(b))if(yf(b))if(Array.isArray(a[b]))for(var c in a[b])a[b].hasOwnProperty(c)&&
(a[b][c]=new e(a[b][c]));else a[b]=new e(a[b]);else a[b]=pc(a[b]);return a}function nj(a,b){$a||($a=!0,Ha=!1,Ia=a,b.get(oj).then(function(a){Ha=!0;Md=a.data;a=(new Date).getTime()/1E3;a=Math.max(.1,a-Md);a<pj||(Ia=Math.max(.1,Ia-a))},function(a){Ha=!0;Md=0}))}function v(a,b,c,f,g){b||(b="Event");f&&(f=parseInt(f,10),f=isNaN(f)?0:f);window.ga?(a={eventCategory:b,eventAction:a},c&&(a.eventLabel=c),f&&(a.eventValue=f),g&&(a.nonInteraction=g),ga("send","event",a)):window._gaq&&_gaq.push(["_trackEvent",
b,a,c,f,g])}function vd(a,b){ga("send","exception",{exDescription:a,exFatal:b})}function qj(a){if("ShiftLeft"==a.code||"ShiftRight"==a.code)Ca=!0}function rj(a){if("ShiftLeft"==a.code||"ShiftRight"==a.code)Ca=!1}function sj(a){var d=/Digit(\d+)/.exec(a.code),c="-"==a.key;if(d||c)d=c?10:0==d[1]?9:d[1]-1,Ca?0<=d&&6>d&&(Uf()?w=d:"Main"==ca&&("Main"==H?Vf(d):"BallBounce"==H?Wf(d):"BallSize"==H?Xf(d):"TubeHeight"==H&&Yf(d))):0<=d&&d<Zf&&(Wa()?d<Ab?Yc(Fc[d].value):Zc(rb[d-Ab]):d<Xa?Zc(rb[d]):Yc(Fc[d-Xa].value));
else if("Main"==ca)switch(a.code){case "KeyQ":case "KeyA":va("Main");break;case "KeyW":case "KeyZ":va("BallBounce");break;case "KeyE":va("BallSize");break;case "KeyR":va("TubeHeight");break;case "KeyT":b.isAnyTubeImproved&&va("Abilities")}}function Mh(){return Ga?(dd("Starting KongregateAPI... FAILED",'<div class="text-center">May be your ad blocker or security preferences prevent the game connecting to Kongregate servers.<br/>Try disabling your ad blocker or adding exceptions for kongregate.com and then refresh game page.<br/>Chrome has begun blocking Flash by default, please <a href="https://helpx.adobe.com/flash-player/kb/enabling-flash-player-chrome.html" target="_blank">enable flash</a> and try again.</div>',
tj,uj),!1):!0}function uj(){Ga=!1;return!0}function vj(){return ka}function la(){if(!ka)return!1;if(W)return!0;try{if(window.parent.kongregate)return W=window.parent.kongregate,Ga&&(Ga=!1,dd("Starting KongregateAPI... SUCCESS","",wj)),$f(),W.services.addEventListener("login",xj),!0}catch(a){}return!1}function xj(a){$f()}function $f(){B.isGuest=W.services.isGuest();B.userId=W.services.getUserId();B.userName=W.services.getUsername();B.token=W.services.getGameAuthToken();B.isGuest||jd()}function Of(){return la()&&
!B.isGuest}function yj(){la()&&W.services.showRegistrationBox()}function zj(a){a=new e(a);var b=1<a.e?Math.log(a.e)/Aj:0;return Math.max(0,a.e<b?a.e:Math.floor(b))}function Yh(a){a.success&&(jd(),v("BuyConfirm","Premium"))}function jd(){la()&&W.mtx.requestUserItemList(null,Bj)}function Bj(a){if(a.success){for(var d=!1,c=0;c<a.data.length;c++){var f=a.data[c],g="k"+f.id;if(f.identifier in D&&!(g in b.premium.boughtPackList)){d=b.premium.boughtPackList[g]=f.identifier;if(d in D){b.premium.premiumMoney+=
D[d].premiumMoney;if(D[d].onBuyFnc)D[d].onBuyFnc();D[d].buyOnce&&(b.premium.isSpecPackBought[d]=!0);b.kongUserId=B.userId;b.kongUser=B.userName;C("upgrade")}var d=!0,e=Cj*D[f.identifier].price;v("BuySuccess","Premium",f.identifier,D[f.identifier].price);var t=e,k={id:g,affiliation:"Kongregate"};t&&(k.revenue=t);ga("ecommerce:addTransaction",k);t=f.identifier;f={id:g,name:f.identifier};t&&(f.sku=t);f.category="premium packs";e&&(f.price=e);f.quantity=1;ga("ecommerce:addItem",f);ga("ecommerce:send")}}d&&
da(!0)}}function Je(a){a&&(b.abilitiesFreeRefundCnt=1);b.isAnyAbilityBought=!1;b.abilities=[];for(a=0;6>a;a++){b.abilities[a]={points:b.tubeImprovesMax[a],levels:{},queueSizeMax:1,queue:[],currentAbility:0,autoJumpKoef:0,energyMultDC:new e(1),preventWeakBubbleKoef:0};for(var d in y)y.hasOwnProperty(d)&&(b.abilities[a].levels[d]={lvlMax:0,lvl:0,ptsPrice:y[d].ptsPrice,heightDC:new e(0),effectMultDC:y[d].initEffectMultDC?new e(y[d].initEffectMultDC):new e(0)});var c=a;b.abilities[c].energyMultDC=new e(1);
Nd(c)}}function Nd(a){b.abilities[a].autoJumpKoef=0;b.balls[a].tmpDropHeight=0}function ag(a){return b.abilities[a].points}function bg(){0<b.abilitiesFreeRefundCnt&&(b.abilitiesFreeRefundCnt+=-1);Je(!1)}function Od(){return b.isAnyAbilityBought}function ya(a){return 0<b.abilities[a].queue.length}function Dj(a){return ya(a)?y[b.abilities[a].queue[b.abilities[a].currentAbility]].name:""}function Fd(a){return ya(a)?b.abilities[a].levels[b.abilities[a].queue[b.abilities[a].currentAbility]].heightDC:new e(0)}
function Ej(a){w=a}function Fj(){w=-1}function Gj(){return w}function Uf(){return-1!=w}function cg(a,d){var c=y[d].levelMax;return 0<c&&c==b.abilities[a].levels[d].lvlMax}function Ra(a,d,c){return cg(a,d)?0:P(b.abilities[a].points,b.abilities[a].levels[d].lvl,c,0==y[d].levelMax?0:y[d].levelMax-b.abilities[a].levels[d].lvlMax,b.abilities[a].levels[d].ptsPrice,y[d].ptsPriceRate)}function Pd(a,d,c){c=Ra(a,d,c);return 1>=c?b.abilities[a].levels[d].ptsPrice:M(b.abilities[a].levels[d].ptsPrice,y[d].ptsPriceRate,
c).toNumber()}function dg(a,d,c){return 0<Ra(a,d,c)&&X(b.abilities[a].points,c)>=Pd(a,d,c)}function eg(a,d,c){var f=b.abilities[a].levels[d];if(f.lvl!=c&&(c>f.lvlMax?c=f.lvlMax:1>c&&(c=1),f.lvl=c,f.heightDC=y[d].heightDCFnc(c),f.effectMultDC=y[d].effectMultDCFnc(c),y[d].passiveAbility))y[d].onActivateFnc(a,f.effectMultDC)}function fg(a,d){b.abilities[a].queue.splice(d,1);b.abilities[a].currentAbility>=d&&0<b.abilities[a].currentAbility&&b.abilities[a].currentAbility--}function Qd(a){var d=b.balls[a],
d=d.height-d.r;Gc[a]=1<d?Fd(a).sub(Ed(a)).toNumber()*Math.sqrt(8/(b.gravity*d)):0}function gg(a){if(ya(a)){var d=b.balls[a];if(1<d.height-d.r)return Gc[a]}return 0}function Hj(){var a;if(!Rd&&!Sd)for(Sd=!0,a=0;6>a;a++)Hc[a]=new Image,Td[a]=!1,Ij(Hc[a],a),Hc[a].src="imgsevent/jack-o-lantern/jack-o-lantern"+(a+1)+".png"}function Ij(a,b){a.onload=function(){Td[b]=!0;for(var a=0;6>a;a++)if(!Td[a])return;Rd=!0;Sd=!1}}function hg(a,b,c,f,g,e,t){Rd&&(e=2*g,a.drawImage(Hc[b],c-g,f-g,e,e))}function Jj(){var a;
if(!Ud&&!Vd)for(Vd=!0,a=0;6>a;a++)Ic[a]=new Image,Wd[a]=!1,Kj(Ic[a],a),Ic[a].src="imgsevent/jack-o-lantern-fire/jack-o-lantern-fire"+(a+1)+".png"}function Kj(a,b){a.onload=function(){Wd[b]=!0;for(var a=0;6>a;a++)if(!Wd[a])return;Ud=!0;Vd=!1}}function ig(a,b,c,f,g,e,t){Ud&&(e=2*g,a.drawImage(Ic[b],c-g,f-g,e,e))}function Lj(){b.balls=[];for(var a=0;6>a;a++)jg(a);b.balls[0].active=!0;id();Hj();Jj();Xd||Yd||(Yd=!0,Jc=new Image,Jc.onload=function(){Xd=!0;Yd=!1},Jc.src="imgsevent/bat.png")}function jg(a){var d=
b.tubes[a].amplifierUpgPriceDC,c=b.tubes[a].improvementLevel,f=d.mul(10),g=5,z=1;if(0<c){var c=d.mul(e.pow(1.09,2999)),t=f.mul(e.pow(32,b.tubes[a].ballSizeMax-5));c.lt(t)&&(g=Math.max(g,b.tubes[a].ballSizeMax-Math.floor(e.ln(c.div(f)).toNumber()/kg)),z=g/5,z*=z*z)}d=d.mul(b.achievementsMult[Q.achBouncer]);b.balls[a]={active:b.tubes[a].active,height:g,y:g,r:g,v:0,heightTotalDC:new e(0),tmpDropHeight:0,sizeUpgPriceDC:f,weight:z,bounceCnt:10,bounceKoefDC:Zd(10),bounceUpgPriceDC:d};Gc[a]=0;kb[a]=!1}function $d(){return b.reset.bounceMult*
b.boost.bounceMult*b.premium.premiumBounceMult*b.events.eventBounceMult}function Zd(a){return e.pow(.01,e.div(1,e.mul(a,$d())))}function U(){for(var a=0;6>a;a++)b.balls[a].bounceKoefDC=Zd(b.balls[a].bounceCnt)}function lg(a,d){b.balls[a].height=d;b.balls[a].y=d;b.balls[a].v=0;ae(a);Qd(a);kb[a]=!1}function ae(a){if(b.balls[a].height<b.balls[a].r)b.balls[a].height=b.balls[a].r;else{var d=b.tubes[a].height-b.balls[a].r;b.balls[a].height>d&&(b.balls[a].height=d)}b.balls[a].y>b.balls[a].height?(b.balls[a].y=
b.balls[a].height,b.balls[a].v=0):b.balls[a].y<b.balls[a].r&&(b.balls[a].y=b.balls[a].r,b.balls[a].v=0)}function wc(){return b.ballStyle}function Mj(a){b.ballStyle=a;id()}function id(){Bd=vc[wc()].colors;mg=vc[wc()].textColors}function ng(a,d,c){c=c||1;a=b.balls[a];return d>c?Math.floor(Math.log(c/d)/Math.log(a.bounceKoefDC)):0}function Kc(a,d){return b.tubes[a].amplifierDC.mul(b.gravity/Lc).mul(d).div(100).mul(b.balls[a].weight).mul(b.reset.densityMult).mul(b.reset.totalMult).mul(b.premium.premiumEnergyMult*
b.events.eventEnergyMult*b.boost.energyMult*b.boost.densityMult)}function Sa(){for(var a=0;6>a;a++)lg(a,b.tubes[a].height)}function og(){for(var a=0;6>a;a++)if(0!=b.balls[a].v||1<b.balls[a].height-b.balls[a].r)return!0;return!1}function Ed(a){return b.balls[a].heightTotalDC}function be(a){return b.tubes[a].ballSizeMax}function pg(a){return be(a)<=b.balls[a].r}function qg(a){return be(a)-b.balls[a].r}function Mc(a,d){return P(b.energyDC,b.balls[a].r,d,qg(a),b.balls[a].sizeUpgPriceDC,32,kg)}function ce(a,
d){var c=Mc(a,d);return 1>=c?new e(b.balls[a].sizeUpgPriceDC):M(b.balls[a].sizeUpgPriceDC,32,c)}function rg(a,d){if(!b.tubes[a].active)return!1;var c=Mc(a,d);return!pg(a)&&0<c&&qg(a)>=c&&Lb(b.energyDC,d).gte(ce(a,d))}function de(a,d,c){"undefined"===typeof c&&(c=1);var f=0<c&&1!=c;f&&(b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.mul(c));if(0==c||rg(a,d)){var g=Mc(a,d);0<c&&ba(ce(a,d).neg());b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.mul(e.pow(32,g));d=1+g/b.balls[a].r;b.balls[a].weight=
b.balls[a].weight*d*d*d;b.balls[a].r+=g;ae(a)}f&&(b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.div(c))}function Xf(a){G();de(a,h());C("upgrade")}function Nc(a,d){return P(b.energyDC,b.balls[a].bounceCnt,d,0,b.balls[a].bounceUpgPriceDC,1.04,Nj)}function ee(a,d){var c=Nc(a,d);return 1>=c?new e(b.balls[a].bounceUpgPriceDC):M(b.balls[a].bounceUpgPriceDC,1.04,c)}function sg(a,d){return b.tubes[a].active?0<Nc(a,d)&&Lb(b.energyDC,d).gte(ee(a,d)):!1}function fe(a,d,c){"undefined"===typeof c&&(c=1);
var f=0<c&&1!=c;f&&(b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(c));if(0==c||sg(a,d)){var g=Nc(a,d);0<c&&ba(ee(a,d).neg());b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(e.pow(1.04,g));b.balls[a].bounceCnt+=g;b.balls[a].bounceKoefDC=Zd(b.balls[a].bounceCnt)}f&&(b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.div(c))}function Wf(a){G();fe(a,h());C("upgrade")}function Ph(){za=Qa=oa=!1;m={posX:0,posY:0,size:sb,fontSize:Oc,opacity:0,valueDC:new e(0)};Gd||ge||(ge=!0,
lb=new Image,lb.onload=function(){Gd=!0;ge=!1},lb.src="imgsevent/ghost.png")}function tg(a,b){var c=Math.floor(m.size/2);m.posX=a-c;m.posY=b-c;m.centerX=a;m.centerY=b}function R(){b.gravity=Lc*b.reset.gravityMult*b.premium.premiumGravityMult*b.events.eventGravityMult*b.boost.gravityMult}function ba(a){a=new e(a);b.energyMaxDC.isFinite()||(b.energyMaxDC=new e(100));b.energyDC.isFinite()||(b.energyDC=new e(b.energyMaxDC));a.isFinite()||(a=new e(b.energyMaxDC));if(a.gt(0)){var d=a;ha()&&(b.idleEnergyDC=
b.idleEnergyDC.add(d))}a.gt(0)&&(b.statistics.energyDC=b.statistics.energyDC.add(a));b.energyDC=b.energyDC.add(a);b.energyMaxDC.lt(b.energyDC)&&(b.energyMaxDC=new e(b.energyDC));a.lt(0)&&(b.achievementStatsDC[Q.achEnergyStorage]=b.achievementStatsDC[Q.achEnergyStorage].sub(a));b.statistics.energyDC.gt(0)&&(a=e.log10(e.div(b.statistics.energyDC,Ye)).toNumber()-b.reset.inactiveTotal,0<a&&(b.reset.inactive=a,b.reset.active+=b.reset.inactive,b.statistics.metaEnergy+=b.reset.inactive,b.reset.inactiveTotal+=
b.reset.inactive,b.reset.inactive=0))}function Dd(a){var d=new e(0);if(b.tubes[a].active){var c=b.balls[a].height-b.balls[a].r;1<c&&(d=Kc(a,c).div(Math.sqrt(8*c/b.gravity)))}return d}function Cd(){for(var a=new e(td()),b=0;6>b;b++)a=a.add(Dd(b));return a}function he(){ie=!0}function Ke(){b.idleEnergyDC=new e(0);b.idleEnergyBonusDC=new e(0);b.idleEnergyTransferSpeedDC=new e(0);G()}function Da(){tb()||Ke()}function G(){ha()&&(b.idleEnergyBonusDC=b.idleEnergyDC.mul(je()),b.idleEnergyTransferSpeedDC=
b.idleEnergyBonusDC.div(Oj),b.idleEnergyDC=new e(0));b.idleEnergyTimer=-ug}function Ta(){return b.reset.idleMult*b.premium.premiumIdleMult*b.events.eventIdleMult*b.boost.idleMult}function ke(){return(b.reset.idleMultTime+b.boost.idleTimeInc)*b.premium.premiumIdleMultTime*b.events.eventIdleMultTime}function tb(){return 1<Ta()}function le(){return tb()&&0>b.idleEnergyTimer?-b.idleEnergyTimer:1E300}function vg(){var a=le();return 0<a&&a<=Pj}function ha(){return tb()&&0<=b.idleEnergyTimer}function Qj(){return e.pow(Ta(),
ke()).sub(1)}function je(){return ha()?e.pow(Ta(),Math.min(ke(),(ha()?b.idleEnergyTimer:0)/3600)).sub(1):new e(0)}function Oh(a){if(a)for(b.tubeInfo="percent",b.tubeImprLevelMax=0,b.tubeImprovesMax=[],a=0;6>a;a++)b.tubeImprovesMax[a]=0;pa=0;b.tubes=[];V=[];E=[];ub=[];vb=[];for(a=0;6>a;a++)wg(a,0==a,0);hd();me(2E3);Lj()}function sd(a){return 0==a?new e(1):e.pow(10,6>a?4+(8+4*(a-2))*(a-1)/2:Math.floor(44+(40+.4*(a-6))*(a-5)/2))}function wg(a,d,c){var f=a+6*c,g=sd(f),z=g.mul(10),t=36+10*f,k=new e(z);
if(3<a||0<c)k=xg[a][c]?k.mul(xg[a][c]):k.mul(900).mul(e.exp(.48*Math.pow(f-12,.81)));var l=50+10*f,q=new e(k);if(0<c){for(var m=t,u=1;6>u;u++)m+=36+10*(f+u);f=Math.floor((sa-13-53)/(yg/m));m=k.mul(e.pow(1.09,7999));u=q.mul(e.pow(1.08,f-l));m.lt(u)&&(l=Math.max(l,f-Math.floor(e.ln(m.div(q)).toNumber()/zg)))}b.tubes[a]={active:d,improvementLevel:c,improvePriceDC:sd(a+6*(c+1)).mul(10),width:t,ballSizeMax:t/2-3,height:l,heightUpgPriceDC:q,amplifierLevel:1,amplifierDC:new e(g),amplifierUpgPriceDC:new e(k),
amplifierIncDC:new e(g)};ub[a]=new e(z);vb[a]=!1}function Me(){for(var a=pa=0;6>a;a++)pa<b.tubes[a].improvementLevel&&(pa=b.tubes[a].improvementLevel)}function me(a){if(a>Ea){0==Ea&&(wb[1]={multDC:new e(b.tubes[0].amplifierDC),incDC:new e(b.tubes[0].amplifierIncDC)},Ea=1);for(var d,c=new e(wb[Ea].multDC),f=new e(wb[Ea].incDC),g=Ea+1;g<=a;g++)c=c.add(f),d=Nf(g),d.gt(1)&&(c=c.mul(d),f=f.mul(d)),wb[g]={multDC:new e(c),incDC:new e(f)};Ea=a}return wb[a]}function hd(){var a,d=!1,c=0;for(a=0;6>a;a++)c+=
b.tubes[a].width,0<b.tubes[a].improvementLevel&&(d=!0);ta=d?yg/c:1;Ua=Math.floor((sa-13-53)/ta);for(a=0;6>a;a++)d=Ua-b.tubes[a].height,0>d?Pc(a,d):Ag(a)}function Ag(a){E[a]={width:b.tubes[a].width*ta,height:b.tubes[a].height*ta};E[a].x=0==a?1:E[a-1].right+6;E[a].bottom=sa-13;E[a].y=E[a].bottom-E[a].height;E[a].right=E[a].x+E[a].width;V[a]={x:E[a].x+E[a].width/2,y:E[a].bottom}}function Rj(a){return ub[a]}function Qc(a){return ub[a].lte(b.energyDC)}function ne(a){var d=b.tubes[a];!d.active&&Qc(a)&&
(d.active=!0,b.balls[a].active=!0,ba(ub[a].neg()),bb(),v("Buy","Game","Tube"+a))}function Rc(a){return b.tubes[a].improvePriceDC}function xb(a){return Rc(a).lte(b.energyDC)}function Sc(a){return 0<b.tubes[a].improvementLevel&&10>pa-b.tubes[a].improvementLevel}function oe(a,d){if(d&&Sc(a)||xb(a)){var c;d||ba(Rc(a).neg());var f=b.tubes[a].improvementLevel+(d?-1:1);wg(a,!0,f);jg(a);b.abilities[a].energyMultDC=new e(1);Nd(a);hd();bb();b.isAnyTubeImproved||(pe=b.isAnyTubeImproved=!0);f>b.tubeImprLevelMax&&
(b.abilitiesFreeRefundCnt+=f-b.tubeImprLevelMax,b.tubeImprLevelMax=f,b.statistics.improvementMax=f+1);f>b.tubeImprovesMax[a]&&(b.abilities[a].points+=f-b.tubeImprovesMax[a],b.tubeImprovesMax[a]=f);if(f>pa){pa=f;var g;for(c=0;6>c;c++)for(g=!0;g&&c!=a&&10<pa-b.tubes[c].improvementLevel;)b.tubes[c].active?xb(c)?oe(c,!1):g=!1:Qc(c)?ne(c):g=!1}else d&&Me();c=a+6*f;b.virtTubeIdMax<c&&(b.virtTubeIdMax=c,0==a&&v("Improve","Game","VirtualTube"+c))}}function Sj(a){b.showAmplifierLevelAsMult=a}function Bg(a){return b.tubes[a].amplifierLevel}
function Va(a,d){return P(b.energyDC,Bg(a),d,0,b.tubes[a].amplifierUpgPriceDC,1.09,Tj)}function qe(a,d){var c=Va(a,d);return 1>=c?new e(b.tubes[a].amplifierUpgPriceDC):M(b.tubes[a].amplifierUpgPriceDC,1.09,c)}function Cg(a,d){return b.tubes[a].active?0<Va(a,d)&&Lb(b.energyDC,d).gte(qe(a,d)):!1}function Uj(a){return 20}function Vj(a){return b.tubes[a].amplifierLevel%20}function Wj(a){return Nf(20*Math.floor(1+b.tubes[a].amplifierLevel/20))}function re(a,d){var c=new e(b.tubes[a].amplifierDC),f=new e(b.tubes[a].amplifierIncDC);
if(0<d)var g=b.tubes[a].amplifierLevel,z=g+d,g=me(g),z=me(z),c=c.div(g.multDC).mul(z.multDC),f=f.div(g.incDC).mul(z.incDC);return{amplDC:c,incDC:f}}function Tc(a,d,c){"undefined"===typeof c&&(c=1);var f=0<c&&1!=c;f&&(b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.mul(c));if(0==c||Cg(a,d)){d=Va(a,d);0<c&&ba(qe(a,d).neg());b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.mul(e.pow(1.09,d));var g=re(a,d);b.tubes[a].amplifierDC=g.amplDC;b.tubes[a].amplifierIncDC=g.incDC;b.tubes[a].amplifierLevel+=
d}f&&(b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.div(c))}function Vf(a){G();Tc(a,h());C("upgrade")}function Uc(a,d){return P(b.energyDC,b.tubes[a].height,d,Ua-b.tubes[a].height,b.tubes[a].heightUpgPriceDC,1.08,zg)}function se(a,d){var c=Uc(a,d);return 1>=c?new e(b.tubes[a].heightUpgPriceDC):M(b.tubes[a].heightUpgPriceDC,1.08,c)}function Dg(a){return Ua<=b.tubes[a].height}function Eg(a,d){if(!b.tubes[a].active)return!1;var c=Uc(a,d);return!Dg(a)&&0<c&&Ua-b.tubes[a].height>=c&&Lb(b.energyDC,
d).gte(se(a,d))}function Pc(a,d,c){"undefined"===typeof c&&(c=1);var f=0<c&&1!=c;f&&(b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.mul(c));if(0==c||0>d||Eg(a,d))d=0>d?d:Uc(a,d),0<c&&0<d&&ba(se(a,d).neg()),b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.mul(e.pow(1.08,d)),b.tubes[a].height+=d,Ag(a),bb();f&&(b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.div(c))}function Yf(a){G();Pc(a,h());C("upgrade")}function Xj(){return!1}function Yj(){var a=this;a.adsUrl="https://r.almostidle.com/";
a.storageClientId="AiAdsClientId";a.clientId=0;a.adId=0;a.adlId=0;a.getAdIntervalMsec=1E4;a.checkStatusIntervalMsec=1E3;a.adStatus="";a.cbStatusChanged=null;a.getAdlId=function(){return a.adlId};a.isAdAvailable=function(){return 0<a.adId};a.getAdId=function(){var b=function(b,d,g){if(g){if(0==a.clientId||a.clientId!=g.cid)a.clientId=g.cid,window.localStorage[a.storageClientId]=a.clientId;a.adId=g.aid;a.adlId=g.adlid}else a.adId=0;0==a.adId&&setTimeout(a.getAdId,a.getAdIntervalMsec)};a.isAdAvailable()||
Zj(a.adsUrl+"get.php?cid="+a.clientId,b)};a.checkAdStatus=function(){var b=function(b,d,g){a.adStatus!=g&&(a.adStatus=g,null!=a.cbStatusChanged&&a.cbStatusChanged(g));"init"==g||"started"==g?setTimeout(a.checkAdStatus,a.checkStatusIntervalMsec):(a.adId=0,a.getAdId())};a.isAdAvailable()&&Ac(a.adsUrl+"info.php?aid="+a.adId,b)};a.init=function(b){a.cbStatusChanged=b;b=window.localStorage[a.storageClientId];"undefined"!==b&&(a.clientId=b);a.getAdId()};a.getAdUrl=function(){return a.isAdAvailable()?a.adsUrl+
"open.php?aid="+a.adId:""};a.openAdUrl=function(){var b=a.getAdUrl();b&&(window.open(b,"_blank"),a.checkAdStatus())}}function Qh(a){var b=new Yj;b.init(a);return b}function Sf(a,b,c){b=!1;var f=a.toString()+" "+c;if(200==a&&c)if(0==c.indexOf("error"))f=c.substr(6);else if("load"==Aa||"ok"==c)b=!0;Aa=!1;qb&&(qb(b,b?c:f),qb=null)}function ak(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}return"undefined"!=typeof XMLHttpRequest?
new XMLHttpRequest:!1}function Ac(a,b,c){var f=ak();f.onreadystatechange=function(){4==f.readyState&&b(f.status,f.getAllResponseHeaders(),f.responseText)};a+=(-1==a.indexOf("?")?"?":"&")+"rnd="+Math.random();c?(f.open("POST",a),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(c)):(f.open("GET",a),f.send(null))}function Zj(a,b,c){Ac(a,function(a,c,e){var t;try{t=JSON.parse(e)}catch(k){t={}}b(a,c,t)},c)}window.location.search&&window.location.search.replace("?","").split("&").reduce(function(a,
b){var c=b.split("=");a[decodeURIComponent(c[0])]=decodeURIComponent(c[1]);return a},{});var K=angular.module("game",["ngAnimate","ngSanitize","ui.bootstrap.m"]),e=new Decimal.clone({precision:10,toExpPos:10,toExpNeg:-7,modulo:Decimal.ROUND_DOWN});K.controller("AbilitiesController",function(){this.isAnyAbilityBought=Od;this.isAnyAbilityActive=ya;this.getAbilityPoints=ag;this.getActiveAbilityName=Dj;this.getTotalDropHeightDC=Ed;this.getActiveAbilityHeightMaxDC=Fd;this.getActiveAbilityEstTime=gg;this.getActiveAbilityEstTimeStr=
function(a){return Kb(gg(a))};this.showTubeAbilityDlg=Ej;this.hideTubeAbilityDlg=Fj;this.isTubeAbilityDlgVisible=Uf;this.abilityList=y;this.getAbilityName=function(a){return y[a].name};this.getAbilityLevelMax=function(a){return 0==y[a].levelMax?"":" (max "+y[a].levelMax+")"};this.getSelectedTubeId=Gj;this.isSelectedTubeFirst=function(){return 0==w};this.isSelectedTubeLast=function(){return 5==w};this.getCurrentAbilityPoints=function(){return ag(w)};this.getCurrentAbilityDescr=function(a){var c=w;
return y[a].descFnc(0<b.abilities[c].levels[a].lvl?b.abilities[c].levels[a].effectMultDC:y[a].effectMultDCFnc(1))};this.getCurrentAbilityLevel=function(a){return b.abilities[w].levels[a].lvl};this.getCurrentAbilityLevelMax=function(a){return b.abilities[w].levels[a].lvlMax};this.getCurrentAbilityHeightDC=function(a){return b.abilities[w].levels[a].heightDC};this.abilExampleVisible=!1;this.setAbilityExampleVisible=function(a){this.abilExampleVisible=a};this.isAbilityExampleVisible=function(){return this.abilExampleVisible};
this.abilDescVisible={};for(var a in y)y.hasOwnProperty(a)&&(this.abilDescVisible[a]=!1);this.toggleAbilityDescrVisible=function(a){this.abilDescVisible[a]=!this.abilDescVisible[a]};this.isAbilityDescrVisible=function(a){return this.abilDescVisible[a]};this.getCurrentVisualAbilityEffectMultDC=function(a){return y[a].visualiseEffectFnc(b.abilities[w].levels[a].effectMultDC)};this.getCurrentAbilityLevelUpgradeInc=function(a){return Ra(w,a,h())};this.getCurrentVisualAbilityEffectMultUpgradeIncDC=function(a){var c;
c=w;var f=h();c=(f=Ra(c,a,f))?y[a].effectMultDCFnc(b.abilities[c].levels[a].lvlMax+f).sub(b.abilities[c].levels[a].effectMultDC):new e(0);a=y[a].visualiseEffectFnc(c);return c.lt(0)?a:"+"+a};this.getCurrentAbilityHeightUpgradeIncDC=function(a){var c=w,f=h();return(f=Ra(c,a,f))?y[a].heightDCFnc(b.abilities[c].levels[a].lvlMax+f).sub(b.abilities[c].levels[a].heightDC):new e(0)};this.getCurrentAbilityUpgradePrice=function(a){return Pd(w,a,h())};this.isCurrentAbilityCanBeBought=function(a){return b.tubeImprovesMax[w]>=
y[a].imprLvlMin};this.isCurrentAbilityHidden=function(a){return b.tubeImprovesMax[w]<=y[a].imprLvlMin-2};this.isCurrentAbilityUpgradeable=function(a){return dg(w,a,h())};this.upgradeCurrentAbility=function(a){G();var c=w,f=h();dg(c,a,f)&&(f=Ra(c,a,f),b.abilities[c].points-=Pd(c,a,f),b.abilities[c].levels[a].lvlMax+=f,eg(c,a,b.abilities[c].levels[a].lvlMax),b.abilities[c].levels[a].ptsPrice*=Math.pow(y[a].ptsPriceRate,f),b.isAnyAbilityBought=!0,v("Tube","Upgrade",a+c,b.abilities[c].levels[a].lvlMax));
C("upgrade")};this.isCurrentAbilityAvailable=function(a){return 0<b.abilities[w].levels[a].lvl};this.isCurrentAbilityLevelMax=function(a){var c=w;return 0==b.abilities[c].levels[a].lvlMax||b.abilities[c].levels[a].lvl==b.abilities[c].levels[a].lvlMax};this.isCurrentAbilityLevelCap=function(a){return cg(w,a)};this.isAbilityLevelChangeable=function(a){return y[a].allowChangeLevel};this.setCurrentAbilityLevel=function(a,b){eg(w,a,b)};this.isCurrentAbilityActive=function(a){return-1!=b.abilities[w].queue.indexOf(a)};
this.isCurrentAbilityActiveByQueueIdx=function(a){return a==b.abilities[w].currentAbility};this.addCurrentAbilityToQueue=function(a){G();var c=w;b.abilities[c].queue[Math.min(b.abilities[c].queueSizeMax-1,b.abilities[c].queue.length)]=a};this.removeCurrentAbilityFromQueue=function(a){G();fg(w,a)};this.changeCurrentAbilityPosInQueue=function(a,c){G();var f=w,g=b.abilities[f].queue[a],e=b.abilities[f].currentAbility;e==a&&(e+=c);fg(f,a);b.abilities[f].queue.splice(a+c,0,g);b.abilities[f].currentAbility=
e};this.getQueue=function(){return b.abilities[w].queue};this.getCurrentQueueSize=function(){return b.abilities[w].queue.length};this.getCurrentQueueSizeMax=function(){return b.abilities[w].queueSizeMax}});K.controller("AchievementsController",function(){this.achievementList=S;this.achievementsLevel=function(){return b.achievementsLevel};this.achievementsMult=function(){return b.achievementsMult};this.achievementStatsDC=function(){return b.achievementStatsDC};this.getAchievementReq=function(a){return Pe(S[a],
"reqValueDC",b.achievementsLevel[a]).toString()};this.isAchievementLevelCap=function(a){return 0<S[a].levelMax&&S[a].levelMax==b.achievementsLevel[a]};this.isShowNextReward=function(a){return S[a].nextRewardFnc?!0:!1};this.getNextRewardHtml=function(a){return this.isShowNextReward(a)?S[a].nextRewardFnc():""}});K.controller("BoostDailyController",function(){this.isDlgVisible=function(){return Db};this.hideDlg=zh;this.applyAndHideDlg=Ah;this.getDaysPlayedInRow=Ee;this.getBoostType=Bh;this.isGemsReward=
function(){return b.boost.daily.generatedDailyBoost==Cb};this.getGemsValue=function(){return b.boost.daily.generatedDailyValue};this.getBoostValue=function(){return 100*b.boost.daily.generatedDailyValue};this.getBoostDayMult=ad;this.getBoostTotalValue=function(){return 100*b.boost.daily.generatedDailyValue*ad()};this.getBoostDuration=function(){return b.boost.daily.generatedDailyTime+" hour"+(1<b.boost.daily.generatedDailyTime?"s":"")};this.showPremiumConfirmDialog=Te;this.getRewardButtonText=function(){return bd()&&
!this.isGemsReward()?"Replace current reward with new one":"Get reward"}});K.controller("BuyAmountController",function(){this.buyAmountStepList=rb;this.buyAmountRelList=Fc;this.setBuyAmountValueRel=Yc;this.setBuyAmountValueStep=Zc;this.getBuyAmountObject=h;this.totalListLen=Zf;this.isBuyAmountStepPosRight=Wa;this.getBuyAmountStepHotKey=nh;this.getBuyAmountRelHotKey=oh;this.hintVisible=!1;this.setHintVisible=function(a){this.hintVisible=a};this.isHintVisible=function(){return this.hintVisible}});K.controller("CloudController",
function(){this.isCloudDialogVisible=hj;this.hideCloudDialog=jj;this.isCloudOperationsAllowed=zc;this.isCloudLoadAllowed=ej;this.isCloudSaveAllowed=Pf;this.getSaveButtonText=function(){var a;a=Ld-(new Date).getTime();a=0<a?a/1E3:0;return 0<a?"Next save to the cloud will be available in "+Math.ceil(a)+" seconds":"&nbsp;Save&nbsp;"};this.saveToCloud=cj;this.isSaveToCloudStarted=Kd;this.isSaveToCloudSuccess=aj;this.isSaveToCloudError=bj;this.isLoadFromCloudStarted=Jd;this.isLoadFromCloudSuccess=Bc;this.isLoadFromCloudEmpty=
gj;this.isLoadFromCloudError=fj;this.getCloudDataTime=kj;this.getCloudDataEnergyDC=mj;this.loadGameFromCloudData=function(){Ec=!1;Bc()&&(v("CloudLoadOK","Settings"),Fb(!1,Cc,!0),aa="")}});K.controller("DebugController",function(){this.skipTime=ua;this.outsideIdleLoopExecTimeLast=function(){return Fg};this.outsideIdleLoopExecTimeMax=function(){return Gg};this.idleExecTimeLast=function(){return Hg};this.idleExecTimeMax=function(){return Ig};this.execTimeLast=function(){return Fg+Hg};this.execTimeMax=
function(){return Gg+Ig};this.addMoney=function(a){};this.addPremium=function(a){};this.addEnergyMax=function(a){};this.saveSizeMax=function(){return bk};this.savePackedSizeMax=function(){return ck};this.getAccelerationTime=function(){return 1};this.setAccelerationTime=function(a){};this.getFixAcceleration=function(){return 0};this.setFixAcceleration=function(a){};this.accelerationTimeList=dk;this.dbgFixAccelerationList=ek;this.addDayToDailyReward=function(a){};this.isAutoPlay=function(){return Jg&&
!Kg};this.isAutoPlaySimUser=function(){return Jg&&Kg};this.toggleAutoPlay=function(a){};this.getAutoPlayTime=Si;this.dbgFakeKongregateLogin=Ti;this.dbgFakeKongregateAPIConnectionSuccess=Ui;this.dbgFakeFinishEvent=Vi;this.isCsvReady=function(){return!1};this.onCsvClick=function(){}});K.controller("EventsController",function(){this.eventsEnergyPerc=function(){return Math.floor(100*b.events.eventEnergyMult-100)};this.eventsBouncePerc=function(){return Math.floor(100*b.events.eventBounceMult-100)};this.eventsGravityPerc=
function(){return Math.floor(100*b.events.eventGravityMult-100)};this.eventsIdleMultPerc=function(){return Math.floor(100*b.events.eventIdleMult-100)};this.eventsIdleMultTimePerc=function(){return Math.floor(100*b.events.eventIdleMultTime-100)};this.eventsMetaBonusIncPerc=function(){return Math.floor(100*b.events.eventMetaBonusInc)};this.eventList=fa;this.eventItemList=mb;this.isEventActive=Wi;this.getEventTitle=Zi;this.eventOpen=Yi;this.getEventPage=Lf;this.getEventTime=function(){return ld((fa[na].finishTime-
(new Date).getTime())/1E3)};this.isEventItemActive=Hd;this.getEventItemsCollectedCnt=Mf;this.isAnyEventItem=function(a){return 0<Mf(a)};this.eventItemsExpanded=[!0];this.toggleEventItems=function(a){this.eventItemsExpanded[a]=!this.eventItemsExpanded[a]};this.getToggleButtonText=function(a){return this.eventItemsExpanded[a]?"-":"+"}});K.controller("GameController",["$scope","$interval","$http",function(a,d,c){Fb();a.kongGameURL="http://www.kongregate.com/games/almostidle/idle-bouncer";a.gameVer="1.0.0.0";
a.gameMouseDown=function(a){C("click")};a.gameMouseUp=function(a){qc=0};a.gameKeyDown=qj;a.gameKeyUp=rj;a.gameKeyPress=sj;a.isThemeCustom=Di;a.getThemeFile=Ei;a.getThemeImgDir=Za;a.energyDC=function(){return b.energyDC};a.energyMaxDC=function(){return b.energyMaxDC};a.energyPercent=function(){return b.energyDC.div(b.energyMaxDC).mul(100).toFixed(2)};a.getEnergyPerSecondDC=Cd;a.getInactiveMetaEnergy=function(){return b.reset.inactive};a.getBgClass=function(){return"bg-"+b.bgStyle};a.visualScale=function(){return ta};
a.hideSpikes=function(){return gb()};a.isResetSystemDialogVisible=li;a.hideResetSystemDialog=ni;a.processReset=function(){C("upgrade")};a.getTubeInfoType=If;a.setTubeInfoType=Qi;a.tubes=function(){return b.tubes};a.balls=function(){return b.balls};a.abilities=function(){return b.abilities};a.isNewAchievementAvailable=function(){return Eb};a.doClickCanvas=function(a){var d=a.offsetX;a=a.offsetY;var c;var e,k=m.size/2;c=d-m.centerX;e=a-m.centerY;oa&&!Qa&&Math.abs(c)<=k&&Math.abs(e)<=k?(!za&&c*c+e*e<=
k*k&&(Qa=!0,ba(m.valueDC),b.statistics.bubbleClicked++,b.achievementStatsDC[Q.achBubbleGrow]=b.achievementStatsDC[Q.achBubbleGrow].add(1),C("pop")),c=!0):c=!1;if(!c)for(e=0;6>e;e++)if(c=E[e],b.tubes[e].active&&d>c.x&&d<c.right){lg(e,(V[e].y-a)/ta);Nd(e);break}G()};a.isShowOfflineStats=function(){return gd};a.offlineMoneyEarnedDC=function(){return e.max(0,b.energyDC.sub(Ib))};a.offlineTime=function(){return Oe(Math.floor(Math.max(0,(new Date).getTime()-Le)/1E3))};a.hideOfflineStats=function(){gd=!1};
a.showDblOfflineBoostDialog=function(){a.hideOfflineStats();Fe("dblOffline")};a.isBoostDailyGenerated=function(){return b.boost.daily.isDailyBoostGenerated};a.showBoostDailyDlg=yh;a.isShowEventWelcomeMsg=function(){return Vc};a.showEventWelcomeMsg=function(){Vc=!0};a.hideEventWelcomeMsg=function(){Vc=!1};a.isShowFirstImproveDlg=function(){return pe};a.hideFirstImproveDlg=function(){pe=!1};a.isShowNewBalanceAbilityDlg=function(){return Lg};a.hideNewBalanceAbilityDlg=function(){Lg=!1};a.isShowIdleModeHelp=
function(){return ie};a.showIdleModeHelp=he;a.hideIdleModeHelp=function(){ie=!1};a.isShowChangeLog=function(){return Mg};a.hideChangeLog=function(){Mg=!1};a.isSteamVersion=!1;a.isSteamInit=Xj;a.steamName=function(){return fk};a.isKongregateVersion=!0;a.kongregateInfo=function(){return B};a.kongregateShowRegistrationBox=yj;a.isKongregate=vj;a.isKongregateAPI=la;a.isKongregateUserLoggedIn=Of;a.moneySignHTML='<img src="imgs/kred_single.png" class="premium-crystal-list-item"/>';a.convertMoney=function(a){return a};
a.boostList=O;a.isAdsAvailable=function(){var a=la();return a&&B.adsAvailable||!a&&(ea?ea.isAdAvailable():!1)};a.showBoostDialog=Fe;a.isBoostDialogVisible=Eh;a.getBoostDialogHeader=Fh;a.getBoostDialogText=Gh;a.getBoostDialogButtonText=Hh;a.closeBoostDialog=Ih;a.getBoostBtnTitle=function(a){var d=O[a].title();a=b.boost.timers[a];0<a&&(d+="<br/><small><i>Boost time remain: "+Math.floor(a)+" second"+(1<a?"s":"")+"</i></small>");return d};a.isBoostActive=ze;a.isTutorialEnabled=yd;a.isTutorialPanelActive=
Fi;a.isTutorialAnyStepActive=La;a.tutorialGetActiveStepText=Gi;a.tutorialShowContinueButton=Hi;a.tutorialOnClickContinue=Ki;a.isTutorialShowShadow=Ji;a.isTutorialStepNameActive=zd;a.isTutorialStepNameHighlight=Ii;a.tutorialFinish=function(){Df(!0)};a.hideWaitingMsg=Gf;a.isWaitingMsgVisible=Li;a.getWaitingMsgText=Mi;a.getWaitingMsgInfo=Ni;a.getWaitingMsgTimeRemain=Oi;d(function(){var a;a=(new Date).getTime();var d=Math.max(.001,(a-b.lastUpdateTime)/1E3);c&&86400<d&&(nj(d,c),d=100);var z;$a&&Ha?(z=
Ia,Ha=$a=!1,Ia=0):z=!1;!1!==z&&(d=z);b.lastUpdateTime=a;a=d;d=Math.ceil(a/1);z=100<d?a/100:1;do{z>a&&(z=a);var d=z,t;t=!1;var k=void 0,l=void 0;for(l in O)O.hasOwnProperty(l)&&0<b.boost.timers[l]&&(!t||b.boost.timers[l]<t)&&(t=b.boost.timers[l],k=l);(t=t?{key:k,time:t}:null)&&t.time<z&&(z=t.time);t=le();t<z&&(z=t);t=z;for(var l=k=void 0,q=0;q<Ge;q++)for(;;)if(k=S[q],0==k.levelMax||b.achievementsLevel[q]<k.levelMax)if(l=Pe(S[q],"reqValueDC",b.achievementsLevel[q]),null!==k.updateStatDCFnc&&(b.achievementStatsDC[q]=
k.updateStatDCFnc()),b.achievementStatsDC[q].gte(l)){b.achievementsMult[q]*=k.mult;b.achievementsLevel[q]++;if(null!==k.onLevelUpFnc)k.onLevelUpFnc();Eb=!0;b.premium.premiumMoney++;da(!0);b.achievementsLevel[q]>=S[q].trackLevel&&v("Get","Achievement",k.name+" "+b.achievementsLevel[q])}else break;else break;k=new Date;l=b.boost.daily.nextDay.y+"."+b.boost.daily.nextDay.m+"."+b.boost.daily.nextDay.d;l in te||(te[l]=new Date(b.boost.daily.nextDay.y,b.boost.daily.nextDay.m,b.boost.daily.nextDay.d));k>
te[l]&&(k=new Date,k.getFullYear()==b.boost.daily.nextDay.y&&k.getMonth()==b.boost.daily.nextDay.m&&k.getDate()==b.boost.daily.nextDay.d?b.boost.daily.daysInRow++:b.boost.daily.daysInRow=1,b.statistics.daysInRowMax<b.boost.daily.daysInRow&&(b.statistics.daysInRowMax=b.boost.daily.daysInRow),k=new Date,k=new Date(k.getFullYear(),k.getMonth(),k.getDate()+1),b.boost.daily.nextDay.d=k.getDate(),b.boost.daily.nextDay.m=k.getMonth(),b.boost.daily.nextDay.y=k.getFullYear(),b.boost.daily.isDailyBoostGenerated=
!1,Ya(!1,!1,!1));k=t;ba(td().mul(k));k=t;q=void 0;for(l=0;6>l;l++)if(b.balls[l].active){var q=l,h=k,u={bounceCnt:0,bounceEnergyDC:new e(0),totalDropHeightDC:new e(0)},p=b.balls[q],F=new e(0),w=ya(q),G=!1,x=!1,A=Math.min(cf(),b.tubes[q].height-2*p.r),r=(-p.v+Math.sqrt(p.v*p.v+2*b.gravity*(p.y-p.r)))/b.gravity;if(r>h)A=b.gravity*h*h/2+p.v*h,0<A&&w&&(p.tmpDropHeight+=A,p.heightTotalDC=p.heightTotalDC.add(A)),p.y-=A,p.v+=b.gravity*h;else{var n=void 0,h=h-r,n=p.height-p.r;if(1<n||0<b.abilities[q].autoJumpKoef)1<
n&&(u.bounceCnt=1,u.totalDropHeightDC=new e(n),b.abilities[q].energyMultDC.gt(1)&&(F=u.totalDropHeightDC.mul(b.abilities[q].energyMultDC.sub(1)),b.abilities[q].energyMultDC=new e(1),x=!0)),p.height=Math.max(A,p.bounceKoefDC.mul(n).toNumber())+p.r,0<b.abilities[q].autoJumpKoef&&(n=(b.tubes[q].height-2*p.r)*b.abilities[q].autoJumpKoef+p.r,p.height<n&&(p.height=n,b.abilities[q].autoJumpKoef=0,G=!0)),n=p.height-p.r,p.v=-Math.sqrt(2*b.gravity*n);1>=n&&(p.v=0,p.height=p.r,Gc[q]=0);p.y=p.r;Qd(q);n=p.height-
p.r;if(1<n){r=n<=A;if(!r){var H=ng(q,n,A),I=Math.sqrt(8*n/b.gravity),K=p.bounceKoefDC.sqrt().toNumber(),B=Math.floor(Qe(h,I,K)),J=!0;!isNaN(B)&&Infinity!=B&&H<B&&(r=!0);if(isNaN(B)||Infinity==B||H<B)B=H,J=!1;if(1<=B){if(J||r)h-=M(I,K,B).toNumber();u.bounceCnt+=B;u.totalDropHeightDC=u.totalDropHeightDC.add(M(n,p.bounceKoefDC,B));p.height=Math.max(A,e.pow(p.bounceKoefDC,B).mul(n).toNumber())+p.r;p.v=-Math.sqrt(2*b.gravity*(p.height-p.r))}J&&!r&&(p.y-=b.gravity*h*h/2+p.v*h,p.v+=b.gravity*h)}r&&(p.height=
A+p.r,p.v=-Math.sqrt(2*b.gravity*(p.height-p.r)),n=Math.sqrt(8*A/b.gravity),r=Math.floor(h/n),0<r&&(h-=Math.max(0,n*r),u.bounceCnt+=r,u.totalDropHeightDC=u.totalDropHeightDC.add(A*r)),0<h&&(p.y-=b.gravity*h*h/2+p.v*h,p.v+=b.gravity*h))}}ae(q);u.bounceEnergyDC=Kc(q,u.totalDropHeightDC.add(F));w?u.totalDropHeightDC.gt(0)&&(p.heightTotalDC=p.heightTotalDC.add(u.totalDropHeightDC).sub(p.tmpDropHeight),p.tmpDropHeight=0):(p.heightTotalDC=new e(0),p.tmpDropHeight=0);1==u.bounceCnt&&("off"!=b.showBounceEnergy&&
(p=F=h=void 0,"energy"==b.showBounceEnergy&&0==q?(h=E[q].x,F="left",p=15*Math.random()):"energy"==b.showBounceEnergy&&5==q?(h=E[q].right,F="right",p=15*-Math.random()):(h=V[q].x,F="center",p=30*Math.random()-15),"bat"==b.showBounceEnergy?Xd&&(F=x?Ng:gk,T.push({type:"img",img:Jc,x:h-F,y:V[q].y-F,scale:x?2:1,opacity:1,vx:p||0,vy:-70,ax:0,ay:-100,vAlpha:0,aAlpha:-2,time:1,callback:void 0})):(w=N(u.bounceEnergyDC,2,1),A=Z().bounceTextColorRGBA.slice(),n=Z().bounceTextShadow,T.push({type:"text",text:w,
x:h,y:V[q].y,font:x?"bold 24px Arial":"bold 12px Arial",isFillText:!0,fillStrokeStyle:A||[0,0,0,1],hAlign:F||"start",vAlign:"bottom",shadowColor:n||"#fff",shadowOffsX:1,shadowOffsY:1,shadowBlur:2,vx:p||0,vy:-70,ax:0,ay:-100,vAlpha:0,aAlpha:-2,time:1,callback:void 0}))),C("bounce"),x=b.abilities[q].preventWeakBubbleKoef,oa||(h=e.mul(u.bounceEnergyDC,b.reset.bubbleCapMult*b.boost.bubbleCapMult),(0==x||h.gte(Cd().mul(x)))&&Math.random()<b.reset.bubbleProb+b.boost.bubbleProbInc&&(oa=!0,za=Qa=!1,m.opacity=
0,m.size=sb,m.fontSize=Oc,m.valueDC=h,m.v=hk,m.hv=0,tg(Wc+Math.random()*ik,Og),m.startY=Og,m.hrzAccFluct=jk,m.hrzAccFluctSpeed=kk,b.statistics.bubble++)));!G||0!=u.bounceCnt&&1!=u.bounceCnt||(kb[q]=!0);q=u;0<q.bounceCnt&&(ba(q.bounceEnergyDC),b.statistics.bounce+=q.bounceCnt,b.achievementStatsDC[Q.achBouncer]=b.achievementStatsDC[Q.achBouncer].add(q.bounceCnt))}u=q=l=k=void 0;for(k=0;6>k;k++)if(ya(k)&&(l=b.abilities[k],q=b.balls[k],u=l.queue[l.currentAbility],q.heightTotalDC.gte(l.levels[u].heightDC)&&
(q.heightTotalDC.gt(l.levels[u].heightDC.mul(2*l.queueSizeMax))?q.heightTotalDC=q.heightTotalDC.mod(l.levels[u].heightDC):q.heightTotalDC=q.heightTotalDC.sub(l.levels[u].heightDC),y[u].onActivateFnc(k,l.levels[u].effectMultDC),l.currentAbility=(l.currentAbility+1)%b.abilities[k].queue.length,Qd(k),l=k,b.showAbilityEffects))){for(q=E[l].x;q<E[l].right;q+=2)u=Z().abilityProgressColorRGBA.slice(),T.push({type:"rect",isStroke:!1,x:q,y:E[l].bottom-1-Kf,width:xc,height:xc,color:u||[0,0,0,1],vx:60*Math.random()-
30||0,vy:-100*Math.random()-50||0,ax:0,ay:150,vAlpha:0,aAlpha:-.5,time:2,callback:void 0});C("ability")}k=t;q=l=void 0;for(q in T)if(T.hasOwnProperty(q))if(l=T[q],l.time<=k)l.callback&&l.callback(),T.splice(q,1);else{l.time-=k;l.x+=l.vx*k+l.ax*k*k/2;l.vx+=l.ax*k;l.y+=l.vy*k+l.ay*k*k/2;l.vy+=l.ay*k;var D;"text"==l.type?D=l.fillStrokeStyle[3]:"img"==l.type?D=l.opacity:"rect"==l.type&&(D=l.color[3]);D+=l.vAlpha*k+l.aAlpha*k*k/2;l.vAlpha+=l.aAlpha*k;D=Math.min(1,Math.max(0,D));"text"==l.type?l.fillStrokeStyle[3]=
D:"img"==l.type?l.opacity=D:"rect"==l.type&&(l.color[3]=D)}k=t;l=void 0;for(l in O)O.hasOwnProperty(l)&&0<b.boost.timers[l]&&(b.boost.timers[l]=Math.max(0,b.boost.timers[l]-k),Be(l));k=t;if(oa)if(za)0<m.opacity&&(m.opacity=Math.max(0,m.opacity-lk*k)),0==m.opacity&&(oa=!1);else if(Qa)m.fontSize+=mk*k,0<m.opacity&&(m.opacity=Math.max(0,m.opacity-nk*k)),0==m.opacity&&(oa=!1);else if(!gb()&&m.posY<=ue)za=!0,C("pop");else if(gb()&&m.posY+m.size<=ue)oa=!1;else{l=k*k/2;m.hrzAccFluct+=m.hrzAccFluctSpeed*
k+Pg*l;m.hrzAccFluctSpeed+=Pg*k;q=m.hrzAccFluct*(Math.random()-.5);tg(m.centerX+m.hv*k+q*l,m.centerY-m.v*k-Qg*l);m.v+=Qg*k;m.hv+=q*k;l=Math.max(0,m.centerY-ok)/m.startY;m.size=ve-l*pk;m.fontSize=Rg-l*qk;if(m.posX+m.size>rk&&0<m.hv||m.posX<sk&&0>m.hv)m.hv=-m.hv;1>m.opacity&&(m.opacity=Math.min(1,m.opacity+tk*k));m.valueDC=m.valueDC.add(m.valueDC.mul(uk).mul(b.achievementsMult[Q.achBubbleGrow]).mul(k))}tb()&&(b.idleEnergyTimer+=t,!ha()&&b.idleEnergyBonusDC.gt(0)&&(yb+=t,yb>=vk&&(t=e.min(b.idleEnergyBonusDC,
b.idleEnergyTransferSpeedDC.mul(yb)),b.idleEnergyBonusDC=b.idleEnergyBonusDC.sub(t),ba(t),yb=0)));t=(new Date).getTime();0<we&&(b.statistics.time+=Math.max(0,t-we));we=t;Bb();da(!1);Ne();Ci()&&(b.musicEnabled?-1!=Fa&&L[ia].playing||(Fa=(Fa+1)%xf,ia="music"+Fa,C(ia)):-1<Fa&&(ia&&L[ia].playing&&(L[ia].audio.pause(),L[ia].audio.currentTime=0,L[ia].playing=!1),ia="",Fa=-1));a-=z;z=d}while(0<a)},20);a.isDebugEnabled=!1;a.init=1}]);K.controller("IdleEnergyController",function(){this.isIdleEnergyAvailable=
tb;this.showIdleTimer=function(){return vg()||ha()};this.getIdleTimerHtml=function(){return vg()?'<span class="glyphicon glyphicon-hourglass"></span>'+Kb(le()):ha()?'<span class="glyphicon glyphicon-time"></span>'+Kb(ha()?b.idleEnergyTimer:0):""};this.showIdleEnergy=function(){return ha()||b.idleEnergyBonusDC.gt(0)};this.getIdleEnergyHtml=function(){return ha()?'Idle <span class="glyphicon glyphicon-flash"></span><b>'+N(b.idleEnergyDC.mul(je()),1,1)+'</b> (<span class="glyphicon glyphicon-flash"></span>'+
N(b.idleEnergyDC,1,1)+" &times; "+N(je(),2,1)+")":b.idleEnergyBonusDC.gt(0)?'<span class="glyphicon glyphicon-arrow-up"></span> <span class="glyphicon glyphicon-flash"></span><b>'+N(b.idleEnergyBonusDC,1,1)+'</b> <span class="glyphicon glyphicon-arrow-up"></span>':""}});K.controller("PremiumController",function(){this.premiumMoney=function(){return b.premium.premiumMoney};this.premiumEnergyMult=function(){return b.premium.premiumEnergyMult};this.premiumBounceMult=function(){return b.premium.premiumBounceMult};
this.premiumEnergyPerc=function(){return Math.floor(100*(b.premium.premiumEnergyMult-1))};this.premiumBouncePerc=function(){return Math.floor(100*(b.premium.premiumBounceMult-1))};this.premiumGravityPerc=function(){return Math.floor(100*(b.premium.premiumGravityMult-1))};this.premiumIdleMultPerc=function(){return Math.floor(100*(b.premium.premiumIdleMult-1))};this.premiumIdleMultTimePerc=function(){return Math.floor(100*(b.premium.premiumIdleMultTime-1))};this.premiumEnergyGeneratorStr=function(){var a=
"+"+b.premium.premiumEnergyGeneratorInc;b.premium.premiumEnergyGeneratorInc&&(a+=" tube");1<b.premium.premiumEnergyGeneratorInc&&(a+="s");return a};this.isPremiumPackAvailable=Re;this.isAnyPremiumSpecialPackAvailable=Xh;this.isPremiumPackTimeLimited=function(a){return!1!==od(a)};this.getPremiumPackTimeRemain=function(a){return ld(od(a))};this.premiumPackList=D;this.showPremiumDialog=Uh;this.hidePremiumDialog=Vh;this.isPremiumDialogVisible=Wh;this.buyPremiumPack=Se;this.buyPremiumPackFromEventMsg=
function(a){Vc=!1;Se(a)};this.premiumItemList=ma;this.showPremiumConfirmDialog=Te;this.hidePremiumConfirmDialog=Zh;this.clickYesPremiumConfirmDialog=function(){Mb=!1;Ue()?Ve():eb=!0};this.isPremiumConfirmDialogVisible=$h;this.getPremiumSelectedItem=function(){return ma[qa]};this.canBuyPremiumSelectedItem=Ue;this.premiumMoneyToBuySelectedItem=function(){return!1===qa?0:this.getPremiumSelectedItem().price-b.premium.premiumMoney};this.buyPremiumSelectedItem=Ve});K.controller("ResetController",function(){this.getActive=
function(){return b.reset.active};this.canProcessReset=We;this.showResetSystemDialog=mi;this.getEnergyToStartAccumulateMetaDC=ki;this.isShowEnergyRemain=function(){return b.reset.active<Xe&&!fb()};this.getBonusMult=ji;this.getTotalBonusMultPerc=function(){return 100*(b.reset.totalMult-1)};this.getResetCnt=function(){return b.statistics.reset};this.isAnyResetUpgradeBought=fb;this.getResetEnergyExtLevel=$e;this.getEnergyExtCapacityMult=function(){return 100*b.reset.energyExtCapacityMult};this.getResetEnergyExtUpgradeInc=
function(){var a=h(),a=Wb(a);return 100*(b.reset.energyExtCapacityMult*Math.pow(Sg,a)-b.reset.energyExtCapacityMult)};this.getResetEnergyExtUpgradePrice=function(){return qd(h())};this.isResetEnergyExtUpgradeable=function(){return af(h())};this.upgradeResetEnergyExt=function(){G();C("upgrade");var a=h();if(af(a)){var d=Wb(a);Y(qd(a));b.reset.energyExtLevel+=d;b.reset.energyExtUpgPrice*=Math.pow(Xb,d);b.reset.energyExtCapacityMult*=Math.pow(Sg,d);v("Upgrade","ResetSystem","Extender",b.reset.energyExtLevel)}};
this.getResetAutoJumpLevel=bf;this.getAutoJumpHeight=cf;this.getResetAutoJumpUpgradeInc=function(){var a=h(),a=Yb(a);return b.reset.autoJumpHeight*Math.pow(Tg,a)-b.reset.autoJumpHeight};this.getResetAutoJumpUpgradePrice=function(){return Nb(h())};this.isResetAutoJumpUpgradeable=function(){return df(h())};this.upgradeResetAutoJump=function(){G();C("upgrade");var a=h();df(a)&&(a=Yb(a),Y(Nb(a)),b.reset.autoJumpLevel+=a,b.reset.autoJumpUpgPrice*=Math.pow(Zb,a),b.reset.autoJumpHeight*=Math.pow(Tg,a),v("Upgrade",
"ResetSystem","AutoJump",b.reset.autoJumpLevel))};this.getBounceMult=function(){return b.reset.bounceMult};this.getResetBounceUpgradeInc=function(){var a=h(),a=$b(a);return b.reset.bounceMult*Math.pow(Ug,a)-b.reset.bounceMult};this.getResetBounceUpgradePrice=function(){return Ob(h())};this.isResetBounceUpgradeable=function(){return ef(h())};this.upgradeResetBounce=function(){G();C("upgrade");var a=h();if(ef(a)){var d=$b(a);Y(Ob(a));b.reset.bounceLevel+=d;b.reset.bounceUpgPrice*=Math.pow(ac,d);b.reset.bounceMult*=
Math.pow(Ug,d);U();v("Upgrade","ResetSystem","Bounce",b.reset.bounceLevel)}};this.getDensityMult=function(){return b.reset.densityMult};this.getResetDensityUpgradeInc=function(){var a=h(),a=bc(a);return b.reset.densityMult*Math.pow(Vg,a)-b.reset.densityMult};this.getResetDensityUpgradePrice=function(){return Pb(h())};this.isResetDensityUpgradeable=function(){return ff(h())};this.upgradeResetDensity=function(){G();C("upgrade");var a=h();if(ff(a)){var d=bc(a);Y(Pb(a));b.reset.densityLevel+=d;b.reset.densityUpgPrice*=
Math.pow(cc,d);b.reset.densityMult*=Math.pow(Vg,d);v("Upgrade","ResetSystem","Density",b.reset.densityLevel)}};this.getGravityMult=function(){return b.reset.gravityMult};this.getResetGravityUpgradeInc=function(){var a=h(),a=dc(a);return 100*(b.reset.gravityMult*Math.pow(Wg,a)-b.reset.gravityMult)};this.getResetGravityUpgradePrice=function(){return Qb(h())};this.isResetGravityUpgradeable=function(){return gf(h())};this.upgradeResetGravity=function(){G();C("upgrade");var a=h();if(gf(a)){var d=dc(a);
Y(Qb(a));b.reset.gravityLevel+=d;b.reset.gravityUpgPrice*=Math.pow(ec,d);b.reset.gravityMult*=Math.pow(Wg,d);R();v("Upgrade","ResetSystem","Gravity",b.reset.gravityLevel)}};this.getBubbleProb=function(){return 100*b.reset.bubbleProb};this.getResetBubbleProbUpgradeInc=function(){var a=h(),a=fc(a);return 100*(b.reset.bubbleProb+Xg*a-b.reset.bubbleProb)};this.getResetBubbleProbUpgradePrice=function(){return Rb(h())};this.isResetBubbleProbUpgradeable=function(){return hf(h())};this.upgradeResetBubbleProb=
function(){G();C("upgrade");var a=h();if(hf(a)){var d=fc(a);Y(Rb(a));b.reset.bubbleProbLevel+=d;b.reset.bubbleProbUpgPrice*=Math.pow(gc,d);b.reset.bubbleProb+=Xg*d;v("Upgrade","ResetSystem","BubbleProbability",b.reset.bubbleProbLevel)}};this.getBubbleCapMult=function(){return b.reset.bubbleCapMult};this.getResetBubbleCapUpgradeInc=function(){var a=h(),a=hc(a);return b.reset.bubbleCapMult*Math.pow(Yg,a)-b.reset.bubbleCapMult};this.getResetBubbleCapUpgradePrice=function(){return Sb(h())};this.isResetBubbleCapUpgradeable=
function(){return jf(h())};this.upgradeResetBubbleCap=function(){G();C("upgrade");var a=h();if(jf(a)){var d=hc(a);Y(Sb(a));b.reset.bubbleCapLevel+=d;b.reset.bubbleCapUpgPrice*=Math.pow(ic,d);b.reset.bubbleCapMult*=Math.pow(Yg,d);v("Upgrade","ResetSystem","BubbleCapacity",b.reset.bubbleCapLevel)}};this.getResetRemoveSpikesPrice=vi;this.isResetRemoveSpikesBought=gb;this.isResetRemoveSpikeUpgradeable=kf;this.upgradeResetRemoveSpikes=function(){G();kf()&&(b.reset.removeSpikes=!0,Y(rd),v("Upgrade","ResetSystem",
"RemoveSpikes"));C("upgrade")};this.getIdleMult=function(){return b.reset.idleMult-1};this.getResetIdleMultUpgradeInc=function(){var a=h(),a=jc(a);return b.reset.idleMult*Math.pow(Zg,a)-b.reset.idleMult};this.getResetIdleMultUpgradePrice=function(){return Tb(h())};this.isResetIdleMultUpgradeable=function(){return lf(h())};this.upgradeResetIdleMult=function(){G();C("upgrade");var a=h();if(lf(a)){var d=jc(a);Y(Tb(a));Da();b.reset.idleMultLevel+=d;b.reset.idleMultUpgPrice*=Math.pow(kc,d);b.reset.idleMult*=
Math.pow(Zg,d);v("Upgrade","ResetSystem","IdleMult",b.reset.idleMultLevel)}};this.getIdleMultTime=function(){return b.reset.idleMultTime};this.getResetIdleMultTimeUpgradeInc=function(){var a=h(),a=lc(a);return b.reset.idleMultTime+$g*a-b.reset.idleMultTime};this.getResetIdleMultTimeUpgradePrice=function(){return Ub(h())};this.isResetIdleMultTimeUpgradeable=function(){return mf(h())};this.upgradeResetIdleMultTime=function(){G();C("upgrade");var a=h();if(mf(a)){var d=lc(a);Y(Ub(a));b.reset.idleMultTimeLevel+=
d;b.reset.idleMultTimeUpgPrice*=Math.pow(mc,d);b.reset.idleMultTime+=$g*d;v("Upgrade","ResetSystem","IdleMultTime",b.reset.idleMultTimeLevel)}};this.isResetEnergyGeneratorAvailable=nf;this.getResetEnergyGeneratorLevel=Ja;this.getResetEnergyGeneratorNextTubeImproveLevel=yi;this.getResetEnergyGeneratorLevelMax=of;this.getResetEnergyGeneratorValueDC=td;this.getResetEnergyGeneratorLevelUpgradeInc=function(){return hb(h())};this.getResetEnergyGeneratorVisualValueAfterUpgradeDC=function(){var a=h(),a=hb(a);
return qf(Ja()+a)};this.getResetEnergyGeneratorUpgradePrice=function(){return Vb(h())};this.isResetEnergyGeneratorUpgradeable=function(){return sf(h())};this.upgradeResetEnergyGenerator=function(){G();C("upgrade");var a=h();if(sf(a)){var d=hb(a);Y(Vb(a));b.reset.energyGeneratorUpgPrice*=Math.pow(oc,d);b.reset.energyGeneratorLevel+=d;v("Upgrade","ResetSystem","EnergyGenerator",Ja())}}});K.controller("SettingsController",["$timeout",function(a){this.getNumNotation=function(){return b.numberNotation};
this.setNumNotation=Sh;this.bounceEnergyTypes=["energy","bat","off"];this.sfxEnabled=!0;this.getSfxEnabled=function(){this.sfxEnabled=b.sfxEnabled};this.setSfxEnabled=function(){b.sfxEnabled=this.sfxEnabled};this.sfxVolume=1;this.getSfxVolume=function(){this.sfxVolume=Math.floor(100*b.sfxVolume)};this.setSfxVolume=function(){var a=this.sfxVolume/100;a!=b.sfxVolume&&(b.sfxVolume=a);b.sfxEnabled=0<this.sfxVolume;this.getSfxEnabled()};this.musicEnabled=!0;this.getMusicEnabled=function(){this.musicEnabled=
b.musicEnabled};this.setMusicEnabled=function(){b.musicEnabled=this.musicEnabled};this.musicVolume=1;this.getMusicVolume=function(){this.musicVolume=Math.floor(100*b.musicVolume)};this.setMusicVolume=function(){var a=this.musicVolume/100;a!=b.musicVolume&&(b.musicVolume=a,-1<Fa&&(L[ia].audio.volume=a));b.musicEnabled=0<this.musicVolume;this.getMusicEnabled()};this.fullscreen=!1;this.getFullScreen=function(){this.fullscreen=b.fullscreen};this.setFullScreen=function(){b.fullscreen=this.fullscreen};
this.keepWindowSize=!1;this.getKeepWindowSize=function(){this.keepWindowSize=b.keepWindowSize};this.setKeepWindowSize=function(){b.keepWindowSize=this.keepWindowSize};this.getShowBounceEnergy=function(){return b.showBounceEnergy};this.setShowBounceEnergy=function(a){b.showBounceEnergy=a};this.coloredUpgrades=!1;this.getColoredUpgrades=function(){this.coloredUpgrades=b.coloredUpgrades};this.setColoredUpgrades=function(){b.coloredUpgrades=this.coloredUpgrades};this.showUpgradeCntInTab=!0;this.getShowUpgradeCntInTab=
function(){this.showUpgradeCntInTab=b.showUpgradeCntInTab};this.setShowUpgradeCntInTab=function(){b.showUpgradeCntInTab=this.showUpgradeCntInTab};this.showAbilityEffects=!0;this.getShowAbilityEffects=function(){this.showAbilityEffects=b.showAbilityEffects};this.setShowAbilityEffects=function(){b.showAbilityEffects=this.showAbilityEffects};this.showBallStyles=function(){return b.isAnyTubeImproved};this.showBallFireStyle=function(){return 6<pa};this.getBallStyle=wc;this.setBallStyle=Mj;this.ballStyleList=
vc;this.bgStyles=["off","halloween"];this.getBgStyle=function(){return b.bgStyle};this.setBgStyle=function(a){b.bgStyle=a};this.showSaveResultTimeout=0;this.saveResultOK=!1;this.saveGame=function(){da(!1,!0);this.saveResultOK=rc;this.showSaveResultTimeout=(new Date).getTime()+3E3};this.isSaveResultVisible=function(){return(new Date).getTime()<this.showSaveResultTimeout};this.getSaveButtonText=function(){return this.isSaveResultVisible()?this.saveResultOK?"Success":"ERROR!":"Local save game"};this.getSaveButtonStyle=
function(){return this.isSaveResultVisible()?this.saveResultOK?"btn-success":"btn-danger":"btn-default"};this.showCloudDialog=ij;this.showHardResetDlg=!1;this.hardResetDlg=function(){this.showHardResetDlg=!0};this.hardResetConfirm=function(a){a&&(Fb(!0),v("HardReset","Settings"));this.showHardResetDlg=!1};this.selectedTheme=jb();this.onThemeChanged=function(){zf(this.selectedTheme)};this.themeList=Af;this.getTheme=jb;this.setTheme=zf;this.isShowImportWarning=function(){return""!=b.kongUserId||""!=
b.kongUser};this.selectOnClick=function(a){a.target.select()};this.serializedSaveStr="";this.saveStrOk=!0;this.updateSaveStr=function(){this.serializedSaveStr=xd();this.saveStrOk=!0};this.buttonLoadFromStr=function(){this.serializedSaveStr&&"ok"==ed(this.serializedSaveStr,!0)?(this.saveStrOk=!0,v("ImportOK","Settings"),Fb(!1,this.serializedSaveStr),this.getSfxEnabled(),this.getSfxVolume(),this.getFullScreen(),this.getKeepWindowSize(),this.getMusicEnabled(),this.getMusicVolume(),this.getShowBounceEnergy(),
this.getColoredUpgrades(),this.getShowUpgradeCntInTab(),this.getShowAbilityEffects(),this.selectedTheme=jb()):(this.saveStrOk=!1,v("ImportFail","Settings"))};this.isBuyAmountStepPosRight=Wa;this.setBuyAmountStepPosRight=mh}]);K.controller("StatisticsController",function(){this.statisticsList=function(){return sc};this.statistics=function(){return b.statistics};this.getActiveTime=function(){return Oe(Math.floor(b.statistics.time/1E3))};this.getBigValueDCRank=zj;this.getTotalEnergyMult=function(){return(new e(b.gravity/
Lc)).mul(b.reset.densityMult).mul(b.reset.totalMult).mul(b.premium.premiumEnergyMult*b.events.eventEnergyMult*b.boost.energyMult)};this.getTotalGravityMult=function(){return b.gravity/Lc};this.getTotalBounceMult=function(){return b.reset.bounceMult*b.premium.premiumBounceMult*b.events.eventBounceMult};this.getIdleEnergyMultTotal=function(){return Ta()-1};this.getIdleEnergyMultTimeTotal=ke;this.getIdleEnergyMultMaxDC=Qj;this.isBoostDailyActive=bd;this.getBoostDailyType=Ch;this.getBoostDailyTotalValue=
function(){return 100*b.boost.daily.selectedDailyValue};this.getBoostDailyDuration=function(){return ld(b.boost.timers.dailyBoost)};this.getDaysPlayedInRow=Ee});var ca="Main";K.controller("TabsController",function(){xe(ca);this.select=xe;this.isSelected=function(a){"Achievements"==ca&&(Eb=0);return ca==a}});var H="Main";K.controller("TabsUpgradeController",function(){va(H);this.select=va;this.isSelected=ph});K.controller("UpgradeController",function(){this.getUpgradeColorStyle=function(a){return b.coloredUpgrades?
{"background-color":Bd[a],color:mg[a]}:{}};this.showUpgradeCntInTab=function(){return b.showUpgradeCntInTab};this.getCapacityLevel=function(){return b.energyLevelDC};this.canUpgradeCapacity=function(){return canUpgradeCapacity(h())};this.canUpgradeCapacityAmount=function(a){return canUpgradeCapacity(ja(a,h().step))};this.getUpgradeCapacityPriceDC=function(){return getUpgradeCapacityPriceDC(h())};this.capacityUpgradeIncDC=function(){return capacityUpgradeIncDC(h())};this.upgradeCapacity=function(){upgradeCapacityAndResetIdle(h())};
this.upgradeCapacityAmount=function(a){upgradeCapacityAndResetIdle(ja(a,h().step))};this.getTubeBuyPriceDC=Rj;this.canBuyTube=Qc;this.buyTube=function(a){G();ne(a);C("upgrade")};this.isTubeImproveButtonVisible=function(a){if(Ca)a=Sc(a);else{var d=0==a?5:a-1;vb[a]||(vb[a]=0==a&&b.tubes[d].active&&b.tubes[a].improvementLevel<=b.tubes[d].improvementLevel||0<a&&b.tubes[d].active&&b.tubes[a].improvementLevel<=b.tubes[d].improvementLevel-1||.95<b.energyMaxDC.e/b.tubes[a].improvePriceDC.e);a=vb[a]}return a};
this.getTubeImprovePriceDC=Rc;this.canImproveTube=function(a){return Ca?Sc(a):xb(a)};this.improveTube=function(a){G();oe(a,Ca);C("upgrade")};this.getImproveText=function(a){return Ca&&Sc(a)?"Regress":xb(a)?"Improve":'<span class="glyphicon glyphicon-flash"></span>'+N(Rc(a))};this.setShowAmplifierValueAsMult=Sj;this.isShowAmplifierValueAsMult=function(){return b.showAmplifierLevelAsMult};this.getAmplifierPrefix=function(){return this.isShowAmplifierValueAsMult()?"&times;":'<span class="glyphicon glyphicon-flash"></span>'};
this.getTubeAmplifierLevel=Bg;this.getTubeAmplifierLevelsFromPrevSuperUpgrade=Vj;this.getTubeAmplifierLevelSuperUpgradeStep=Uj;this.getTubeAmplifierNextSuperMultDC=Wj;this.getTubeAmplifierLevelUpgradeInc=function(a){return Va(a,h())};this.getTubeAmplifierValue=function(a){return this.isShowAmplifierValueAsMult()?b.tubes[a].amplifierDC:Kc(a,b.tubes[a].height-2*b.balls[a].r)};this.getTubeAmplifierIncDC=function(a){if(this.isShowAmplifierValueAsMult()){var d=h();a=re(a,Va(a,d)).amplDC.sub(b.tubes[a].amplifierDC)}else{var d=
h(),c=Kc(a,b.tubes[a].height-2*b.balls[a].r);a=re(a,Va(a,d)).amplDC.div(b.tubes[a].amplifierDC).mul(c).sub(c)}return a};this.getTubeAmplifierUpgradePriceDC=function(a){return qe(a,h())};this.isTubeAmplifierUpgradeable=function(a){return Cg(a,h())};this.upgradeTubeAmplifier=Vf;this.getTubeHeightMax=function(){return Ua};this.isTubeHeightMax=Dg;this.getTubeHeightUpgradeInc=function(a){return Uc(a,h())};this.getTubeHeightUpgradePriceDC=function(a){return se(a,h())};this.isTubeHeightUpgradeable=function(a){return Eg(a,
h())};this.upgradeTubeHeight=Yf;this.getBallSizeMax=be;this.isBallSizeMax=pg;this.getBallSizeUpgradeInc=function(a){return Mc(a,h())};this.getBallSizeUpgradePriceDC=function(a){return ce(a,h())};this.isBallSizeUpgradeable=function(a){return rg(a,h())};this.upgradeBallSize=Xf;this.getBallBounceCnt=function(a){return b.balls[a].bounceCnt*$d()};this.getBallBounceUpgradeInc=function(a){return Nc(a,h())*$d()};this.getBallBounceUpgradePriceDC=function(a){return ee(a,h())};this.isBallBounceUpgradeable=function(a){return sg(a,
h())};this.upgradeBallBounce=Wf;this.getBallBounceTime=function(a){var d;d=b.balls[a];var c=b.tubes[a].height-2*d.r;a=ng(a,c);c=Math.sqrt(8*c/b.gravity);d=d.bounceKoefDC.sqrt().toNumber();d=M(c,d,a).toNumber();return Kb(d)};this.isAbilitiesTabVisible=function(){return b.isAnyTubeImproved};this.getEnergyUpsAvail=function(){var a=H;H="Main";for(var d=0,c=0;6>c;c++)(b.tubes[c].active&&this.isTubeAmplifierUpgradeable(c)||0<c&&!b.tubes[c].active&&b.tubes[c-1].active&&this.canBuyTube(c))&&d++;H=a;return d};
this.getBounceUpsAvail=function(){var a=H;H="BallBounce";for(var d=0,c=0;6>c;c++)b.balls[c].active&&this.isBallBounceUpgradeable(c)&&d++;H=a;return d};this.getBallSizeUpsAvail=function(){var a=H;H="BallSize";for(var d=0,c=0;6>c;c++)b.balls[c].active&&this.isBallSizeUpgradeable(c)&&d++;H=a;return d};this.getTubeHeightUpsAvail=function(){var a=H;H="TubeHeight";for(var d=0,c=0;6>c;c++)b.tubes[c].active&&this.isTubeHeightUpgradeable(c)&&d++;H=a;return d}});var qh=0,rh=2,ye="K M B T Qa Qt Sx Sp Oc Nn Dc UDc DDc TDc QaDc QtDc SxDc SpDc OcDc NnDc Vi UVi DVi TVi QaVi QtVi SxVi SpVi OcVi NnVi Tg UTg DTg TTg QaTg QtTg SxTg SpTg OcTg NnTg Qd UQd DQd TQd QaQd QtQd SxQd SpQd OcQd NnQd Qq UQq DQq TQq QaQq QtQq SxQq SpQq OcQq NnQq Sg USg DSg TSg QaSg QiSg SxSg SpSg OcSg NnSg St USt DSt TSt QaSt QtSt SxSt SpSt OcSt NnSt Og UOg DOg TOg QaOg QtOg SxOg SpOg OcOg NnOg".split(" "),
sh=ye.length;K.filter("bignum",function(){function a(a,b,f){return N(a,b,f)}a.$stateful=!0;return a});var uh=.1,th=5,Cb=-1,wh=5,vh=10,Ae=7,te={},Db=!1,cd=!1,I="",lj="January February March April May June July August September October November December".split(" "),cb=[],md=0,db=[],nd=0,fd=!1,gd=!1,Ib=new e(0),Le=0,Vc=!1,Mg=!1,pe=!1,Lg=!1,b={gameId:"IdleBouncerHalloween",saveVer:0,numberNotation:"suffix",showBounceEnergy:"bat",coloredUpgrades:!1,showUpgradeCntInTab:!0,showAbilityEffects:!0,isAnyTubeImproved:!1,
ballStyle:"auto",bgStyle:"halloween",theme:"night",buyAmountStepPosRight:!0,musicEnabled:!0,sfxEnabled:!0,musicVolume:.3,sfxVolume:1,fullscreen:!1,keepWindowSize:!1,windowWidth:0,windowHeight:0,windowMaximized:!1,balls:[],tubes:[],showAmplifierLevelAsMult:!0,virtTubeIdMax:0,firstStartTime:(new Date).getTime(),lastUpdateTime:(new Date).getTime(),premium:{},kongUserId:"",kongUser:"",events:{eventEnergyMult:1,eventBounceMult:1,eventGravityMult:1,eventIdleMult:1,eventIdleMultTime:1,eventMetaBonusInc:0,
eventItems:[],eventBoughtItems:[],transferredEventBonus:{eventEnergyMult:1,eventBounceMult:1,eventGravityMult:1,eventIdleMult:1,eventIdleMultTime:1,eventMetaBonusInc:0}},achievementsLevel:[],achievementsMult:[],achievementStatsDC:[],tutorial:{},statistics:{}},Eb=0,Hb="",J={saveVer:-1,eventParams:b},eb=!1,Mb=!1,qa=!1,Ye=Math.pow(10,10),Xe=.005,Xb=1.1,oi=Math.log(Xb),Sg=1.1,ai=1,Zb=2,pi=Math.log(Zb),Tg=2,bi=5,ec=1.27,si=Math.log(ec),Wg=1.1,ci=4,cc=1.27,ri=Math.log(cc),Vg=2,di=2,ac=2,qi=Math.log(ac),
Ug=2,ei=10,gc=2,ti=Math.log(gc),Xg=.01,fi=10,ic=1.17,ui=Math.log(ic),Yg=2,rd=10,gi=2,kc=1.18,wi=Math.log(kc),Zg=1.5,hi=4,mc=1.05,xi=Math.log(mc),$g=1,ii=1,oc=1.07,Ai=Math.log(oc),zi=1E25,nc=3,rf=7-nc,pd=!1,ud="eventEnergyMult eventBounceMult eventGravityMult eventIdleMult eventIdleMultTime eventMetaBonusInc".split(" "),vf=ud.length,qc=(new Date).getTime()+6E4,wd=(new Date).getTime()+2E3,rc=!0,L={},ia="",Fa=-1,wf=!1,sc,we=0,Gb=!1,Hf="Waiting...",Ad="",Oa=0,tc=null,xc=3,Kf=Math.floor(xc/2),xa=400,sa=
566,ab=null,ra,Jb,kd,T=[],Pa=453,Ri=1,Jg=!1,Kg=!1;new e(0);var dk=[1,2,5,10,60,120,360,720,1440,3600,1E4],ek=[.1,.2,.5,1,2,5,10,60,600,3600,28800,86400],Fg=0,Gg=0,Hg=0,Ig=0,bk=0,ck=0,mb=[{eventCode:"stval",title:"Quiver",img:"imgs/events/stvalentine/quiver.png",imgIcon:"imgs/events/stvalentine/quiver.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"stval",title:"Bouncy Arrow",img:"imgs/events/stvalentine/arrow01.png",
imgIcon:"imgs/events/stvalentine/arrow01.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;U()}},{eventCode:"stval",title:"Gravity Arrow",img:"imgs/events/stvalentine/arrow02.png",imgIcon:"imgs/events/stvalentine/arrow02.png",desc:'Add <span class="num">+10%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.1;R()}},{eventCode:"stval",title:"Idle Arrow",img:"imgs/events/stvalentine/arrow03.png",imgIcon:"imgs/events/stvalentine/arrow03.png",
desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){Da();b.events.eventIdleMult+=1}},{eventCode:"stval",title:"Energy Arrow",img:"imgs/events/stvalentine/arrow04.png",imgIcon:"imgs/events/stvalentine/arrow04.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"stval",title:"Meta Arrow",img:"imgs/events/stvalentine/arrow05.png",imgIcon:"imgs/events/stvalentine/arrow05.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',
order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}},{eventCode:"easter",title:"Basket",img:"imgs/events/easter/basket.png",imgIcon:"imgs/events/easter/basket.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"easter",title:"Bouncy Egg",img:"imgs/events/easter/basket1.png",imgIcon:"imgs/events/easter/basket1_icon.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=
1;U()}},{eventCode:"easter",title:"Gravity Egg",img:"imgs/events/easter/basket2.png",imgIcon:"imgs/events/easter/basket2_icon.png",desc:'Add <span class="num">+20%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.2;R()}},{eventCode:"easter",title:"Idle Egg",img:"imgs/events/easter/basket3.png",imgIcon:"imgs/events/easter/basket3_icon.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){Da();b.events.eventIdleMult+=1}},{eventCode:"easter",
title:"Energy Egg",img:"imgs/events/easter/basket4.png",imgIcon:"imgs/events/easter/basket4_icon.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"easter",title:"Meta Egg",img:"imgs/events/easter/basket5.png",imgIcon:"imgs/events/easter/basket5_icon.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}},{eventCode:"halloween",title:"Bucket",img:"imgs/events/halloween/bucket.png",
imgIcon:"imgs/events/halloween/bucket.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"halloween",title:"Bouncy Candy",img:"imgs/events/halloween/candy1.png",imgIcon:"imgs/events/halloween/candy1_icon.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;U()}},{eventCode:"halloween",title:"Gravity Candy",img:"imgs/events/halloween/candy2.png",imgIcon:"imgs/events/halloween/candy2_icon.png",
desc:'Add <span class="num">+20%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.2;R()}},{eventCode:"halloween",title:"Idle Candy",img:"imgs/events/halloween/candy3.png",imgIcon:"imgs/events/halloween/candy3_icon.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){Da();b.events.eventIdleMult+=1}},{eventCode:"halloween",title:"Energy Candy",img:"imgs/events/halloween/candy4.png",imgIcon:"imgs/events/halloween/candy4_icon.png",
desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"halloween",title:"Meta Candy",img:"imgs/events/halloween/candy5.png",imgIcon:"imgs/events/halloween/candy5_icon.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}}],$i=mb.length,fa=[{code:"halloween",title:"Halloween Event",page:"halloween.html",itemStartId:12,itemsCnt:6,finishTime:(new Date(2017,
10,21)).getTime()},{code:"easter",title:"Easter Event",page:"event.html",itemStartId:6,itemsCnt:6,finishTime:(new Date(2017,4,1)).getTime()},{code:"stval",title:"Saint Valentine Event",page:"stval.html",itemStartId:0,itemsCnt:6,finishTime:(new Date(2017,1,24)).getTime()}],Xi=!0,na=0,y={powerfulBounce:{name:"Powerful bounce",descFnc:function(a){return'Next bounce energy will be multiplied by <span class="num">'+this.visualiseEffectFnc(a)+"</span>"},passiveAbility:!1,imprLvlMin:1,ptsPrice:1,ptsPriceRate:1,
levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new e(7E3+4E3*(a-1))},effectMultDCFnc:function(a){return new e(50*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return"&times;"+N(a,0,0)},onActivateFnc:function(a,d){b.abilities[a].energyMultDC=b.abilities[a].energyMultDC.eq(1)?new e(d):b.abilities[a].energyMultDC.add(d)}},autoJump:{name:"Auto jump",descFnc:function(a){return a.lt(1)?'Throws the jack-o\'-lantern to <span class="num">'+this.visualiseEffectFnc(a)+"</span> of the maximum height":
"Throws the jack-o'-lantern to the maximum height"},passiveAbility:!1,imprLvlMin:2,ptsPrice:1,ptsPriceRate:1,levelMax:5,allowChangeLevel:!0,heightDCFnc:function(a){return new e(1E4*a)},effectMultDCFnc:function(a){return new e(.0625*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return a.mul(100).toString()+"%"},onActivateFnc:function(a,d){b.abilities[a].autoJumpKoef=Math.max(b.abilities[a].autoJumpKoef,d.toNumber())}},powerfulBounceAll:{name:"Mass powerful bounce",descFnc:function(a){return'Next bounce energy for all jack-o\'-lanterns will be multiplied by <span class="num">'+
this.visualiseEffectFnc(a)+"</span>"},passiveAbility:!1,imprLvlMin:3,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new e(4E4+16E3*(a-1))},effectMultDCFnc:function(a){return new e(50*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return"&times;"+N(a,0,0)},onActivateFnc:function(a,d){for(var c=0;6>c;c++)b.abilities[c].energyMultDC=b.abilities[c].energyMultDC.eq(1)?new e(d):b.abilities[c].energyMultDC.add(d)}},autoJumpAll:{name:"Mass auto jump",descFnc:function(a){return a.lt(1)?
'Throws all jack-o\'-lanterns to <span class="num">'+this.visualiseEffectFnc(a)+"</span> of the maximum height":"Throws all jack-o'-lanterns to the maximum height"},passiveAbility:!1,imprLvlMin:4,ptsPrice:1,ptsPriceRate:1,levelMax:5,allowChangeLevel:!0,heightDCFnc:function(a){return new e(3E4*a)},effectMultDCFnc:function(a){return new e(.0625*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return a.mul(100).toString()+"%"},onActivateFnc:function(a,d){for(var c=0;6>c;c++)b.abilities[c].autoJumpKoef=
Math.max(b.abilities[c].autoJumpKoef,d.toNumber())}},bounceAutoUpgrade:{name:"Bounce auto upgrade",descFnc:function(a){return'Buy bounce upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:5,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new e(1E4+5E3*(a-1))},effectMultDCFnc:function(a){return new e(Math.pow(.8,a))},
visualiseEffectFnc:function(a){return N(a.mul(100),2)+"%"},onActivateFnc:function(a,b){fe(a,.01,b.toNumber())}},ballSizeAutoUpgrade:{name:"Jack-o'-lantern size auto upgrade",descFnc:function(a){return'Buy jack-o\'-lantern size upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:6,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new e(2E4+
6E3*(a-1))},effectMultDCFnc:function(a){return new e(Math.pow(.8,a))},visualiseEffectFnc:function(a){return N(a.mul(100),2)+"%"},onActivateFnc:function(a,b){de(a,.01,b.toNumber())}},tubeHeightAutoUpgrade:{name:"Height auto upgrade",descFnc:function(a){return'Buy height upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:7,ptsPrice:1,ptsPriceRate:1,levelMax:0,
allowChangeLevel:!1,heightDCFnc:function(a){return new e(1E4+5E3*a)},effectMultDCFnc:function(a){return new e(Math.pow(.7,a))},visualiseEffectFnc:function(a){return N(a.mul(100),2)+"%"},onActivateFnc:function(a,b){Pc(a,.01,b.toNumber())}},amplAutoUpgrade:{name:"Amplifier auto upgrade",descFnc:function(a){return'Buy amplifier upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,
imprLvlMin:8,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new e(8E4+4E4*(a-1))},effectMultDCFnc:function(a){return new e(Math.pow(.8,a))},visualiseEffectFnc:function(a){return N(a.mul(100),2)+"%"},onActivateFnc:function(a,b){Tc(a,.01,b.toNumber())}},freeAmplAutoUpgrade:{name:"Free amplifier auto upgrade",descFnc:function(a){return'Do <span class="num">'+this.visualiseEffectFnc(a)+"</span> amplifier upgrade"+(a.gt(1)?"s":"")+" for this tube for free"},passiveAbility:!1,
imprLvlMin:9,ptsPrice:1,ptsPriceRate:1,levelMax:20,allowChangeLevel:!1,heightDCFnc:function(a){return new e(1E5+5E4*(a-1))},effectMultDCFnc:function(a){return new e(a)},visualiseEffectFnc:function(a){return a.toString()},onActivateFnc:function(a,b){Tc(a,b.toNumber(),0)}},queueInc:{name:"Increase queue",descFnc:function(a){return'Increase queue size up to <span class="num">'+this.visualiseEffectFnc(a)+"</span> abilities"},passiveAbility:!0,imprLvlMin:10,ptsPrice:2,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,
heightDCFnc:function(a){return new e(1)},initEffectMultDC:new e(1),effectMultDCFnc:function(a){return new e(a+1)},visualiseEffectFnc:function(a){return a.toString()},onActivateFnc:function(a,d){b.abilities[a].queueSizeMax=d.toNumber()}},preventWeakBubble:{name:"Prevent weak ghost",descFnc:function(a){return'Excludes this tube from ghost generation if generated ghost contains less than <span class="num">'+this.visualiseEffectFnc(a)+"</span> of the current energy per second."},passiveAbility:!0,imprLvlMin:11,
ptsPrice:2,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new e(1)},effectMultDCFnc:function(a){return new e(Math.pow(100,a-1)/100)},visualiseEffectFnc:function(a){return N(a.mul(100),0)+"%"},onActivateFnc:function(a,d){b.abilities[a].preventWeakBubbleKoef=d.toNumber()}}},Q={achEvent:0,achBouncer:1,achEnergyStorage:2,achBubbleGrow:3},S=[{name:"Big Jack-o'-Lantern",descr:"It gives you special event items at each achievement level. The size of your biggest jack-o'-lantern counts towards this achievement.",
trackLevel:1,reqValueDC:[],reqValueDCFnc:function(a){return new e(70+115*a)},levelMax:0,updateStatDCFnc:function(){for(var a=new e(b.achievementStatsDC[Q.achEvent]),d=0;6>d;d++)b.tubes[d].active&&a.lt(b.balls[d].r)&&(a=new e(b.balls[d].r));return a},onLevelUpFnc:function(){b.achievementsLevel[Q.achEvent]<=fa[na].itemsCnt?uf(b.achievementsLevel[Q.achEvent]-1+fa[na].itemStartId,!1):(b.premium.premiumMoney+=b.achievementsLevel[Q.achEvent]-1,da(!0))},nextRewardFnc:function(){var a=fa[na].itemsCnt,d=b.achievementsLevel[Q.achEvent];
if(d<a){for(var c="",f,g=d;g<a;g++)f=mb[g+fa[na].itemStartId],c+=g==d?"<b>"+f.title+"</b>. "+f.desc:"<br/><small>Big jack-o'-lantern "+(g+1)+" reward: <b>"+f.title+"</b>. "+f.desc+"</small>";return c+="<br/><small>Big jack-o'-lantern "+(a+1)+' reward: <img src="imgs/'+Za()+'/premium.svg" class="premium-crystal-list-item"/>'+a}return'<img src="imgs/'+Za()+'/premium.svg" class="premium-crystal-list-item"/>'+d+"<br/><small>Big jack-o'-lantern "+(d+2)+' reward: <img src="imgs/'+Za()+'/premium.svg" class="premium-crystal-list-item"/>'+
(d+1)},hideMult:!0,mult:1,multDecDigits:0},{name:"Super bouncer",descr:'It makes your jack-o\'-lanterns bounce upgrade <span class="num">20%</span> cheaper at each achievement level. Continue bouncing to get this achievement.',trackLevel:5,reqValueDC:[],reqValueDCFnc:function(a){return new e(100*(Math.pow(3,a+1)-2))},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:function(){for(var a=0;6>a;a++)b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(S[Q.achBouncer].mult)},mult:.8,multDecDigits:3},
{name:"Meta-energy refund",descr:"It gives your free meta-energy refund at each achievement level. Continue spending the energy to get this achievement.",trackLevel:7,reqValueDC:[],reqValueDCFnc:function(a){var b=new e(1);b.e=Math.pow(2,a);return b},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:function(){b.reset.freeRefundCnt++},hideMult:!0,mult:1,multDecDigits:0},{name:"Ghost buster",descr:'It makes a ghost grow <span class="num">20%</span> faster at each achievement level. Continue catching ghosts to get this achievement.',
trackLevel:5,reqValueDC:[],reqValueDCFnc:function(a){return new e(5*(Math.pow(2,a+1)-1))},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:null,mult:1.2,multDecDigits:3}],Ge=S.length,vc={auto:{name:"classic",type:"bitmap",drawFnc:function(a,d,c,f,g,e,t){b.tubes[d].improvementLevel>d?ig(a,d,c,f,g,e,t):hg(a,d,c,f,g,e,t)},colors:"#F99233 #F9DF46 #33F87F #E833F9 #35A3F6 #AE6623".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},nofire:{name:"no fire",type:"bitmap",drawFnc:hg,colors:"#F99233 #F9DF46 #33F87F #E833F9 #35A3F6 #AE6623".split(" "),
textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},fire:{name:"with fire",type:"bitmap-fire",drawFnc:ig,colors:"#F99233 #F9DF46 #33F87F #E833F9 #35A3F6 #AE6623".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")}},wa=[{title:"Bounce",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.bounceMult*=a+1;U()},onDeactivateFnc:function(a){b.boost.bounceMult/=a+1;U()}},{title:"Gravity",valueMin:.1,valueMax:.4,onActivateFnc:function(a){b.boost.gravityMult*=a+1;R()},onDeactivateFnc:function(a){b.boost.gravityMult/=
a+1;R()}},{title:"Energy",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.energyMult*=a+1},onDeactivateFnc:function(a){b.boost.energyMult/=a+1}},{title:"Density",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.densityMult*=a+1},onDeactivateFnc:function(a){b.boost.densityMult/=a+1}},{title:"Ghost probability",valueMin:.01,valueMax:.03,onActivateFnc:function(a){b.boost.bubbleProbInc+=a},onDeactivateFnc:function(a){b.boost.bubbleProbInc-=a}},{title:"Ghost power",valueMin:.5,valueMax:2,
onActivateFnc:function(a){b.boost.bubbleCapMult*=a+1},onDeactivateFnc:function(a){b.boost.bubbleCapMult/=a+1}}],xh=wa.length,O={bounce:{title:function(){return'Increase bounce <span class="num">x10</span> for <span class="num">10</span> minutes'},dlgText:function(){return'increase bounce <span class="num">x10</span> for <span class="num">10</span> minutes'},available:function(){return!0},unavailableText:"",reward:function(){b.boost.bounceMult*=10;U()},rewardTime:600,rewardEnd:function(){b.boost.bounceMult/=
10;U()}},gravity:{title:function(){return'Increase gravity <span class="num">+50%</span> for <span class="num">5</span> minutes'},dlgText:function(){return'increase gravity <span class="num">x50</span> for <span class="num">5</span> minutes'},available:function(){return!0},unavailableText:"",reward:function(){b.boost.gravityMult*=1.5;R()},rewardTime:300,rewardEnd:function(){b.boost.gravityMult/=1.5;R()}},time:{title:function(){return'Time warp <span class="num">15</span> minutes'},dlgText:function(){return'jump into the future by <span class="num">15</span> minutes'},
available:function(){return og()},unavailableText:"All balls are in the idle state. Start bouncing to activate time warp.",reward:function(){ua(900,!0)},rewardTime:0,rewardEnd:null},dblOffline:{hidden:!0,title:function(){return"Double offline energy"},dlgText:function(){return'increase offline energy <span class="num">x2</span>'},available:function(){return b.energyDC.gt(Ib)},unavailableText:"",reward:function(){ba(b.energyDC.sub(Ib))},rewardTime:0,rewardEnd:null},dailyBoost:{hidden:!0,title:function(){return""},
dlgText:function(){return""},available:function(){return!1},unavailableText:"",reward:function(){wa[b.boost.daily.selectedDailyBoost].onActivateFnc(b.boost.daily.selectedDailyValue)},rewardTime:86400,rewardEnd:function(){wa[b.boost.daily.selectedDailyBoost].onDeactivateFnc(b.boost.daily.selectedDailyValue)}}},rb=[1,20,40,160,640,1280],Xa=rb.length,Th=Math.max(2E9,1E6*rb[Xa-1]),Fc=[{value:0,text:"exact"},{value:-1,text:"min"},{value:.1,text:"10%"},{value:.5,text:"50%"},{value:1,text:"max"}],Ab=Fc.length,
Zf=Xa+Ab,D={halpackspec:{title:"One-Time deal for Halloween Event players.<br/><i>Bonus: +50% Energy included!</i>",buyOnce:!0,price:39,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){b.premium.premiumEnergyMult+=.5}},halpackidle:{title:"Special Deal: Idle Halloween.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>",buyOnce:!0,price:69,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){Da();
b.premium.premiumIdleMult+=5;b.premium.premiumIdleMultTime+=5;b.premium.premiumBounceMult+=5;U()}},halpackquick:{title:"Special Deal: Quick Halloween.<br/><i>Bonus: +100% Gravity included!</i>",buyOnce:!0,price:129,premiumMoneyBase:200,premiumMoney:200,premiumBonusPercent:0,onBuyFnc:function(){b.premium.premiumGravityMult+=1;R()}},pack1:{title:"",buyOnce:!1,price:49,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},pack2:{title:"",buyOnce:!1,price:99,premiumMoneyBase:200,premiumMoney:220,
premiumBonusPercent:10},pack3:{title:"",buyOnce:!1,price:199,premiumMoneyBase:400,premiumMoney:480,premiumBonusPercent:20},pack4:{title:"",buyOnce:!1,price:499,premiumMoneyBase:1E3,premiumMoney:1300,premiumBonusPercent:30},pack5:{title:"",buyOnce:!1,price:999,premiumMoneyBase:2E3,premiumMoney:3E3,premiumBonusPercent:50}},ma=[{name:"Re-roll reward value",desc:"Re-roll reward value.",descInactive:"",price:1,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){Ya(!1,!0,!1)}},{name:"Re-roll reward duration",
desc:"Re-roll reward duration.",descInactive:"",price:1,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){Ya(!1,!1,!0)}},{name:"Re-roll reward type and value",desc:"Re-roll reward type and value.",descInactive:"",price:2,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){Ya(!0,!0,!1)}},{name:"Re-roll reward type, value and duration",desc:"Re-roll reward type, value and duration.",descInactive:"",price:3,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){Ya(!0,
!0,!0)}},{name:"FREE Meta-energy refund",desc:"Refunds all meta-energy upgrades to be able to re-distribute meta-energy.",descInactive:"You should have meta-energy upgrades to use meta-energy refund.",price:0,availCntFnc:function(){return b.reset.freeRefundCnt},active:function(){return 0<b.reset.freeRefundCnt&&fb()},hideInactive:!0,onBuyFnc:function(){Ze()}},{name:"Meta-energy refund",desc:"Refunds all meta-energy upgrades to be able to re-distribute meta-energy.",descInactive:"You should have meta-energy upgrades to use meta-energy refund.",
price:1,active:function(){return 0>=b.reset.freeRefundCnt&&fb()},hideInactive:!0,onBuyFnc:function(){Ze()}},{name:"FREE abilities refund",desc:"Refunds all ability upgrades to be able to re-distribute ability points.",descInactive:"",price:0,availCntFnc:function(){return b.abilitiesFreeRefundCnt},active:function(){return 0<b.abilitiesFreeRefundCnt&&Od()},hideInactive:!0,onBuyFnc:function(){bg()}},{name:"Abilities refund",desc:"Refunds all ability upgrades to be able to re-distribute ability points.",
descInactive:"",price:1,active:function(){return 0>=b.abilitiesFreeRefundCnt&&Od()},hideInactive:!0,onBuyFnc:function(){bg()}},{name:"Quick Upgrade",desc:"Do all upgrades you can afford for everything at no cost.",price:10,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){var a,d=new e(b.energyDC),c=ja(1,1);for(a=0;6>a;a++)if(!b.tubes[a].active&&Qc(a)&&(ne(a),b.energyDC=new e(d)),b.tubes[a].active){for(;xb(a);)oe(a),b.energyDC=new e(d);de(a,c);b.energyDC=new e(d);Tc(a,c);b.energyDC=
new e(d);Pc(a,c);b.energyDC=new e(d);fe(a,c);b.energyDC=new e(d)}}},{name:"Add energy",desc:'Increase your energy amount <span class="num">&times;1000</span>.',price:10,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.energyDC=b.energyDC.mul(1E3)}},{name:"Bounce +100%",desc:'Add permanent <span class="num">+100%</span> to bounce. Stacks additively.',price:20,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumBounceMult+=1;U()}},{name:"Bounce +500%",desc:'Add permanent <span class="num">+500%</span> to bounce. Stacks additively.',
price:60,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumBounceMult+=5;U()}},{name:"Gravity +10%",desc:'Add permanent <span class="num">+10%</span> to the gravity. Stacks additively.',price:30,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumGravityMult+=.1;R()}},{name:"Gravity +50%",desc:'Add permanent <span class="num">+50%</span> to the gravity. Stacks additively.',price:90,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumGravityMult+=
.5;R()}},{name:"Energy Multiplier +100%",desc:'Add permanent <span class="num">+100%</span> to received energy. Stacks additively.',price:100,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyMult+=1}},{name:"Energy Multiplier +500%",desc:'Add permanent <span class="num">+500%</span> to received energy. Stacks additively.',price:300,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyMult+=5}},{name:"Idle Bonus Multiplier +100%",
desc:'Add permanent <span class="num">+100%</span> to idle bonus multiplier. Stacks additively.',price:30,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){Da();b.premium.premiumIdleMult+=1},onHelpFnc:he},{name:"Idle Bonus Multiplier +500%",desc:'Add permanent <span class="num">+500%</span> to idle bonus multiplier. Stacks additively.',price:90,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){Da();b.premium.premiumIdleMult+=5},onHelpFnc:he},{name:"Idle Time +100%",desc:'Add permanent <span class="num">+100%</span> to idle multiplier growth time. Stacks additively.',
descInactive:'You should have <i>Idle bonus multiplier</i> greater than <span class="num">zero</span>.',price:30,active:function(){return 1<Ta()},hideInactive:!1,onBuyFnc:function(){b.premium.premiumIdleMultTime+=1}},{name:"Idle Time +500%",desc:'Add permanent <span class="num">+500%</span> to idle multiplier growth time. Stacks additively.',price:90,active:function(){return 1<Ta()},hideInactive:!0,onBuyFnc:function(){b.premium.premiumIdleMultTime+=5}},{name:"Time Travel 1 Hour",desc:'Jump into the future by <span class="num">1</span> hour.',
price:10,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){Sa();ua(3600,!0)}},{name:"Time Travel 4 Hours",desc:'Jump into the future by <span class="num">4</span> hours.',price:20,active:function(){return!0},hideInactive:!0,onBuyFnc:function(){Sa();ua(14400,!0)}},{name:"Time Travel 12 Hours",desc:'Jump into the future by <span class="num">12</span> hours.',price:30,active:function(){return!0},hideInactive:!0,onBuyFnc:function(){Sa();ua(43200,!0)}},{name:"Time Travel 1 Day",desc:'Jump into the future by <span class="num">1</span> day.',
price:40,active:function(){return!0},hideInactive:!0,onBuyFnc:function(){Sa();ua(86400,!0)}},{name:"Time Travel 3 Days",desc:'Jump into the future by <span class="num">3</span> days.',price:60,active:function(){return!0},hideInactive:!0,onBuyFnc:function(){Sa();ua(259200,!0)}},{name:"Time Travel 7 Days",desc:'Jump into the future by <span class="num">7</span> days.',price:100,active:function(){return!0},hideInactive:!0,onBuyFnc:function(){Sa();ua(604800,!0)}}],ib={bounce:{file:"halloween_pumpkin_bounce.ogg",
isSFX:!0},pop:{file:"halloween_ghost_click.ogg",isSFX:!0},ability:{file:"firework.ogg",isSFX:!0},click:{file:"click.wav",isSFX:!0},upgrade:{file:"upgrade.ogg",isSFX:!0},music0:{file:"dancing-skeletons.ogg",isSFX:!1},music1:{file:"catch-the-mystery.ogg",isSFX:!1},music2:{file:"the-haunted-castle.ogg",isSFX:!1}},xf=3,ah=[255,0,0,1],bh=[0,0,0,1],ch=[0,0,0,1],dh=[0,0,0,1],eh=[255,0,0,1],fh=[238,238,238,1],gh=[255,255,255,1],hh=[238,238,238,1],ih=[255,0,0,1],jh=[131,131,128,1],kh=[255,255,255,1],lh=[131,
131,128,1],Af={"default":{name:"Default",file:"",imgDir:"theme-default",circleStrokeColor:"#000",tubeRectColor:"#000",abilityProgressColor:"#f00",abilityProgressColorRGBA:ah,bounceTextColorRGBA:bh,bounceTextShadow:"#aaa",qteTextColorRGBA:ch,tutorialTextColorRGBA:dh},bootstrap3d:{name:"3D",file:"bootstrap-theme.min.css",imgDir:"theme-default",circleStrokeColor:"#000",tubeRectColor:"#000",abilityProgressColor:"#f00",abilityProgressColorRGBA:ah,bounceTextColorRGBA:bh,bounceTextShadow:"#aaa",qteTextColorRGBA:ch,
tutorialTextColorRGBA:dh},dark:{name:"Dark",file:"theme-dark.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#eee",abilityProgressColor:"#f00",abilityProgressColorRGBA:eh,bounceTextColorRGBA:fh,bounceTextShadow:"#555",qteTextColorRGBA:gh,tutorialTextColorRGBA:hh},dark3d:{name:"Dark 3D",file:"theme-dark-3d.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#eee",abilityProgressColor:"#f00",abilityProgressColorRGBA:eh,bounceTextColorRGBA:fh,bounceTextShadow:"#555",
qteTextColorRGBA:gh,tutorialTextColorRGBA:hh},night:{name:"Night",file:"theme-night.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#838380",abilityProgressColor:"#f00",abilityProgressColorRGBA:ih,bounceTextColorRGBA:jh,bounceTextShadow:"#555",qteTextColorRGBA:kh,tutorialTextColorRGBA:lh},aqua:{name:"Aqua",file:"theme-aqua.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#838380",abilityProgressColor:"#f00",abilityProgressColorRGBA:ih,bounceTextColorRGBA:jh,
bounceTextShadow:"#555",qteTextColorRGBA:kh,tutorialTextColorRGBA:lh}},Id={20:2,40:3,80:4,160:16,320:128,640:32768,1280:1E8},pb=1280,ob={},nb=0,xg=[[1,16,1442],[1,16,1540],[1,35,3601],[1,77,3817],[2,77,4032],[4,170,8489]],Na=[{name:"start",activeTabName:!1,activateFnc:function(){return!0},activateOnce:!0,continueButton:!1,finishFnc:function(){return og()},text:"",hidePanel:!0,highlightElements:!1}],Ef=Na.length,ea=null,dj=6E4,Ld=0,Ba="",aa="",Cc="",Dc={},Ec=!1,pj=3600,oj="https://api.almostidle.com/timestamp.php",
$a=!1,Ha=!1,Md=0,Ia=0,Ca=!1,Cj=.0644,W=null,ka=!1,He=!1,Ga=!1,Lh=5E3,tj=3E4,wj=1E3,B={isGuest:!0,userId:!1,userName:"",token:"",adsAvailable:!1},Aj=Math.log(1.00000002),w=-1,Hc=[],Td=[],Rd=!1,Sd=!1,Ic=[],Wd=[],Ud=!1,Vd=!1,kg=Math.log(32),Nj=Math.log(1.04),Bd,mg,Jc,Xd=!1,Yd=!1,Ng=16,gk=Ng/2,Gc=[],kb=[],Qg=20,hk=50,jk=1E3,kk=0,Pg=50,tk=.4,nk=.8,lk=4,Oc=5,Rg=12,qk=Rg-Oc,mk=10,sb=30,ve=100,pk=ve-sb,uk=.3,Wc=sb/2,ik=xa-Wc-Wc,Og=sa-Wc,sk=0,rk=xa-1,ue=0,ok=ue+ve/2,oa=!1,Qa=!1,za=!1,m={posX:0,posY:0,size:sb,
fontSize:Oc,opacity:0,valueDC:new e(0)},lb,Gd=!1,ge=!1,yc=100,Pi=3,Lc=500,ug=120,Pj=ug/2,Oj=5,vk=.5,ie=!1,yb=0,Ua,yg=xa-2-30,V,E,ta=1,zg=Math.log(1.08),Tj=Math.log(1.09),wb=[],Ea=0,ub,vb,pa=0,fk="",Rf="https://api.almostidle.com/",Aa=!1,qb=null,Ka=function(){function a(a,b){if(!c[a]){c[a]={};for(var d=0;d<a.length;d++)c[a][a.charAt(d)]=d}return c[a][b]}var b=String.fromCharCode,c={},f={compressToBase64:function(a){if(null==a)return"";a=f._compress(a,6,function(a){return"abcdefghqEPQRSTrstuvwxyzijklmnFGHIJKLMNOop0147852963ABCDUVWXYZ+/=".charAt(a)});
switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:f._decompress(b.length,32,function(d){return a("abcdefghqEPQRSTrstuvwxyzijklmnFGHIJKLMNOop0147852963ABCDUVWXYZ+/=",b.charAt(d))})},compressToUTF16:function(a){return null==a?"":f._compress(a,15,function(a){return b(a+32)})+" "},decompressFromUTF16:function(a){return null==a?"":""==a?null:f._decompress(a.length,16384,function(b){return a.charCodeAt(b)-
32})},compressToUint8Array:function(a){a=f.compress(a);for(var b=new Uint8Array(2*a.length),d=0,c=a.length;d<c;d++){var e=a.charCodeAt(d);b[2*d]=e>>>8;b[2*d+1]=e%256}return b},decompressFromUint8Array:function(a){if(null===a||void 0===a)return f.decompress(a);for(var c=Array(a.length/2),e=0,k=c.length;e<k;e++)c[e]=256*a[2*e]+a[2*e+1];var l=[];c.forEach(function(a){l.push(b(a))});return f.decompress(l.join(""))},compressToEncodedURIComponent:function(a){return null==a?"":f._compress(a,6,function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(a)})},
decompressFromEncodedURIComponent:function(b){if(null==b)return"";if(""==b)return null;b=b.replace(/ /g,"+");return f._decompress(b.length,32,function(d){return a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",b.charAt(d))})},compress:function(a){return f._compress(a,16,function(a){return b(a)})},_compress:function(a,b,d){if(null==a)return"";var c,e,f={},h={},m="",p="",F="",v=2,w=3,x=2,A=[],r=0,n=0,y;for(y=0;y<a.length;y+=1)if(m=a.charAt(y),Object.prototype.hasOwnProperty.call(f,
m)||(f[m]=w++,h[m]=!0),p=F+m,Object.prototype.hasOwnProperty.call(f,p))F=p;else{if(Object.prototype.hasOwnProperty.call(h,F)){if(256>F.charCodeAt(0)){for(c=0;c<x;c++)r<<=1,n==b-1?(n=0,A.push(d(r)),r=0):n++;e=F.charCodeAt(0);for(c=0;8>c;c++)r=r<<1|e&1,n==b-1?(n=0,A.push(d(r)),r=0):n++,e>>=1}else{e=1;for(c=0;c<x;c++)r=r<<1|e,n==b-1?(n=0,A.push(d(r)),r=0):n++,e=0;e=F.charCodeAt(0);for(c=0;16>c;c++)r=r<<1|e&1,n==b-1?(n=0,A.push(d(r)),r=0):n++,e>>=1}v--;0==v&&(v=Math.pow(2,x),x++);delete h[F]}else for(e=
f[F],c=0;c<x;c++)r=r<<1|e&1,n==b-1?(n=0,A.push(d(r)),r=0):n++,e>>=1;v--;0==v&&(v=Math.pow(2,x),x++);f[p]=w++;F=String(m)}if(""!==F){if(Object.prototype.hasOwnProperty.call(h,F)){if(256>F.charCodeAt(0)){for(c=0;c<x;c++)r<<=1,n==b-1?(n=0,A.push(d(r)),r=0):n++;e=F.charCodeAt(0);for(c=0;8>c;c++)r=r<<1|e&1,n==b-1?(n=0,A.push(d(r)),r=0):n++,e>>=1}else{e=1;for(c=0;c<x;c++)r=r<<1|e,n==b-1?(n=0,A.push(d(r)),r=0):n++,e=0;e=F.charCodeAt(0);for(c=0;16>c;c++)r=r<<1|e&1,n==b-1?(n=0,A.push(d(r)),r=0):n++,e>>=1}v--;
0==v&&(v=Math.pow(2,x),x++);delete h[F]}else for(e=f[F],c=0;c<x;c++)r=r<<1|e&1,n==b-1?(n=0,A.push(d(r)),r=0):n++,e>>=1;v--;0==v&&x++}e=2;for(c=0;c<x;c++)r=r<<1|e&1,n==b-1?(n=0,A.push(d(r)),r=0):n++,e>>=1;for(;;)if(r<<=1,n==b-1){A.push(d(r));break}else n++;return A.join("")},decompress:function(a){return null==a?"":""==a?null:f._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(a,c,e){var f=[],l=4,h=4,m=3,u="",p=[],v,w,y,x,A,r=e(0),n=c,B=1;for(v=0;3>v;v+=1)f[v]=v;
u=0;y=Math.pow(2,2);for(x=1;x!=y;)w=r&n,n>>=1,0==n&&(n=c,r=e(B++)),u|=(0<w?1:0)*x,x<<=1;switch(u){case 0:u=0;y=Math.pow(2,8);for(x=1;x!=y;)w=r&n,n>>=1,0==n&&(n=c,r=e(B++)),u|=(0<w?1:0)*x,x<<=1;A=b(u);break;case 1:u=0;y=Math.pow(2,16);for(x=1;x!=y;)w=r&n,n>>=1,0==n&&(n=c,r=e(B++)),u|=(0<w?1:0)*x,x<<=1;A=b(u);break;case 2:return""}v=f[3]=A;for(p.push(A);;){if(B>a)return"";u=0;y=Math.pow(2,m);for(x=1;x!=y;)w=r&n,n>>=1,0==n&&(n=c,r=e(B++)),u|=(0<w?1:0)*x,x<<=1;switch(A=u){case 0:u=0;y=Math.pow(2,8);for(x=
1;x!=y;)w=r&n,n>>=1,0==n&&(n=c,r=e(B++)),u|=(0<w?1:0)*x,x<<=1;f[h++]=b(u);A=h-1;l--;break;case 1:u=0;y=Math.pow(2,16);for(x=1;x!=y;)w=r&n,n>>=1,0==n&&(n=c,r=e(B++)),u|=(0<w?1:0)*x,x<<=1;f[h++]=b(u);A=h-1;l--;break;case 2:return p.join("")}0==l&&(l=Math.pow(2,m),m++);if(f[A])u=f[A];else if(A===h)u=v+v.charAt(0);else return null;p.push(u);f[h++]=v+u.charAt(0);l--;v=u;0==l&&(l=Math.pow(2,m),m++)}}};return f}();K.directive("mPreventDefault",function(){return function(a,b,c){b.on("click",function(a){a.preventDefault()})}});
angular.module("ui.bootstrap.m",["ui.bootstrap.m.tpls","ui.bootstrap.m.progressbar"]);angular.module("ui.bootstrap.m.tpls",["uibm/template/progressbar/progressbar.html"]);angular.module("ui.bootstrap.m.progressbar",[]).constant("uibmProgressConfig",{animate:!0,max:new e(100)}).controller("UibmProgressController",["$scope","$attrs","uibmProgressConfig",function(a,b,c){function f(){return angular.isDefined(a.maxParam)?new e(a.maxParam):new e(c.max)}var g=this,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):
c.animate;this.bars=[];a.max=f();this.addBar=function(a,b,c){h||b.css({transition:"none"});this.bars.push(a);a.max=f();a.title=c&&angular.isDefined(c.title)?c.title:"progressbar";a.$watch("value",function(b){a.recalculatePercentage()});a.recalculatePercentage=function(){var b=g.bars.reduce(function(a,b){b.percent=e.mul(100,b.value).div(b.max).toFixed(2);return a+b.percent},0);100<b&&(a.percent-=b-100)};a.$on("$destroy",function(){b=null;g.removeBar(a)})};this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),
1);this.bars.forEach(function(a){a.recalculatePercentage()})};a.$watch("maxParam",function(a){g.bars.forEach(function(a){a.max=f();a.recalculatePercentage()})})}]).directive("uibmProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibmProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uibm/template/progressbar/progressbar.html",link:function(a,b,c,e){e.addBar(a,angular.element(b.children()[0]),{title:c.title})}}});angular.module("uibm/template/progressbar/progressbar.html",
[]).run(["$templateCache",function(a){a.put("uibm/template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}"></div><div class="progress-text" ng-transclude></div></div>\n')}])})();
