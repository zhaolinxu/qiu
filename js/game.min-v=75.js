(function(){function ab(){return b.buyAmountStepPosRight}function zh(a){b.buyAmountStepPosRight=a}function Cb(a){return"Hotkey: "+(9>a?a+1:9==a?0:"-")}function Ah(a){return ab()?Cb(a+Db):Cb(a)}function Bh(a){return ab()?Cb(a):Cb(a+bb)}function Z(a,b){return{rel:a,step:b}}function bd(){return"Main"==aa?"U"+F:"Reset"==aa?"Reset":"Main"}function cd(a){var e=bd();e in b.buyAmountValue||(b.buyAmountValue[e]=Z(0,1));b.buyAmountValue[e].rel=a}function dd(a){var e=bd();e in b.buyAmountValue||(b.buyAmountValue[e]=
Z(0,1));b.buyAmountValue[e].step=a}function l(){var a=bd();return a in b.buyAmountValue?b.buyAmountValue[a]:Z(0,1)}function ed(a){return 1<=a?Z(0,a):0==a?Z(1,1):Z(a,1)}function De(a){aa=a;b.tutorial.lastClickEvent="clickTab"+aa;Eb();b.tutorial.lastClickEvent=""}function Ch(a){return F==a}function ya(a){F=a;b.tutorial.lastClickEvent="clickUpgradeTab"+F;Eb();b.tutorial.lastClickEvent=""}function J(a,e,c,d){"undefined"===typeof e&&(e=Dh);"undefined"===typeof c&&(c=Eh);"undefined"===typeof d&&(d=b.numberNotation);
a=new g(a);var f=g.abs(a);if(f.gte(1E3)){var u=!1;if("sci"!=d){f=Math.floor(f.e/3)-1;u=3*(f+1);if("engineering"==d)return a.e-=u,a.toFixed(c)+"E"+u;if(f>=Fh)u=!0;else return a.e-=u,a.toFixed(c)+(4>f?"":" ")+Ee[f]}if(u||"sci"==d)return a.toExponential(c)}return a.toFixed(e)}function fd(){return Math.min(Gh,1+(b.boost.daily.daysInRow-1)*Hh)}function gd(){return Fe("dailyBoost")}function cb(a,e,c){if(0==b.boost.daily.daysInRow%Ge)b.boost.daily.isDailyBoostGenerated||(b.boost.daily.generatedDailyBoost=
Fb,b.boost.daily.generatedDailyValue=Math.min(Ih,b.boost.daily.daysInRow/Ge-1+Jh),b.boost.daily.isDailyBoostGenerated=!0);else{if(!b.boost.daily.isDailyBoostGenerated||a)b.boost.daily.generatedDailyBoost=Math.floor(Math.random()*Kh);if(!b.boost.daily.isDailyBoostGenerated||e)b.boost.daily.generatedDailyValue=Math.random()*(za[b.boost.daily.generatedDailyBoost].valueMax-za[b.boost.daily.generatedDailyBoost].valueMin)+za[b.boost.daily.generatedDailyBoost].valueMin;if(!b.boost.daily.isDailyBoostGenerated||
c)b.boost.daily.generatedDailyTime=Math.floor(24*Math.random())+1;b.boost.daily.isDailyBoostGenerated=!0}}function Lh(){Gb=!0}function Mh(){Gb=!1}function Nh(){Gb=!1;b.boost.daily.isDailyBoostGenerated&&(b.boost.daily.generatedDailyBoost==Fb?b.premium.premiumMoney+=b.boost.daily.generatedDailyValue:(gd()&&(b.boost.timers.dailyBoost=0,He("dailyBoost")),A="dailyBoost",b.boost.daily.selectedDailyBoost=b.boost.daily.generatedDailyBoost,b.boost.daily.selectedDailyValue=b.boost.daily.generatedDailyValue*
fd(),L.dailyBoost.rewardTime=3600*b.boost.daily.generatedDailyTime,Ie()),b.boost.daily.isDailyBoostGenerated=!1,W(!0));C("upgrade")}function Je(a){return a==Fb?'<img src="imgs/'+Ke()+'/premium.svg" class="premium-crystal"/>':za[a].title}function Oh(){return Je(b.boost.daily.generatedDailyBoost)}function Ph(){return Je(b.boost.daily.selectedDailyBoost)}function Le(){return b.boost.daily.daysInRow}function Fe(a){return 0<b.boost.timers[a]}function He(a){0==b.boost.timers[a]&&L[a].rewardEnd&&L[a].rewardEnd()}
function Me(a){A=a;hd=!0}function Qh(){return hd}function Rh(){return ba?"Watch ads to get valuable boosts":"Visit a website and click any game to get the reward"}function Sh(){return A?(ba?"Watch an ad and ":"Visit a website and click any game to ")+L[A].dlgText():""}function Th(){return ba?"Watch an ad":"Visit a website"}function Uh(a){hd=!1;a?ca()?(I.adsAvailable&&N.mtx.showIncentivizedAd(),x("Started","Boosts",A)):(da&&da.openAdUrl(),x("AIStarted_"+da.getAdlId(),"Boosts",A)):x("DialogCancel",
"Boosts",A)}function Ie(){A&&(0==b.boost.timers[A]&&L[A].reward(),0<L[A].rewardTime&&(b.boost.timers[A]+=L[A].rewardTime),A="")}function Hb(a,e,c){"undefined"===typeof e&&(e="");"undefined"===typeof c&&(c=!1);for(var d in db)db.hasOwnProperty(d)&&Vh(d);Ne||(Ne=!0,!(ba=-1!=window.location.search.indexOf("kongregate=1"))||ca()||Ja||(Ja=!0,id("Starting KongregateAPI...","",Wh,Xh),Ib=!0));Ka=eb=!1;La=0;b.buyAmountValue={};b.achievementsLevel=[];b.achievementsMult=[];b.achievementStatsDC=[];for(d=0;d<
Oe;d++)b.achievementsLevel[d]=0,b.achievementsMult[d]=X[d].mult?1:0,b.achievementStatsDC[d]=new g(0);Jb=!1;b.achievementsSingleTaken={};b.reset={resetCnt:0,freeRefundCnt:0,active:0,inactive:0,inactiveTotal:0,bonusMult:.2};Pe();fb();d=new Date;d=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1);b.boost={bounceMult:1,gravityMult:1,energyMult:1,densityMult:1,bubbleProbInc:0,bubbleCapMult:1,idleMult:1,idleTimeInc:0,timers:{},daily:{nextDay:{d:d.getDate(),m:d.getMonth(),y:d.getFullYear()},daysInRow:0,
isDailyBoostGenerated:!1,generatedDailyBoost:0,generatedDailyValue:0,generatedDailyTime:0,selectedDailyBoost:0,selectedDailyValue:0}};for(var f in L)L.hasOwnProperty(f)&&(b.boost.timers[f]=0);b.premium={premiumMoney:0,isSpecPackBought:{},boughtPackList:{},premiumEnergyMult:1,premiumBounceMult:1,premiumGravityMult:1,premiumIdleMult:1,premiumIdleMultTime:1,premiumEnergyGeneratorInc:0};pa=!1;b.tutorial={enabled:!0,activeId:-1,finishedIds:[],lastClickEvent:""};Kb={energyDC:{name:"Total energy collected",
showRank:!0,bigNumLoDigits:2},metaEnergy:{name:"Total meta-energy activated",bigNumLoDigits:2},bounce:{name:"Total bounces",bigNumLoDigits:0},bubble:{name:"Total bubbles spawned",bigNumLoDigits:0},bubbleClicked:{name:"Total bubbles clicked",bigNumLoDigits:0},reset:{name:"Total resets",showRank:!1,bigNumLoDigits:0},resetRefund:{name:"Total reset refunds",showRank:!1,bigNumLoDigits:0},improvementMax:{name:"Maximal tube improvement level",showRank:!1,bigNumLoDigits:0},time:{name:"Total active game time",
showRank:!1,bigNumLoDigits:0},daysInRowMax:{name:"Maximal days played in a row",showRank:!1,bigNumLoDigits:0}};b.statistics={};for(var u in Kb)Kb.hasOwnProperty(u)&&(b.statistics[u]=Qe(u)?new g(0):0);Re(!0);Se(!0);Te();Ue();Ve();if(a||"ok"!=jd(e,!1,c))if(b.lastUpdateTime=(new Date).getTime(),b.saveTimestamp=0,b.cloudSaveTimestamp=0,b.uniqueSaveGameId=0,a)try{window.localStorage.removeItem("IdleBouncerStV"),b.eventParams&&delete b.eventParams}catch(h){}else Ma=We(),Lb=!c&&!e,kd=(new Date).getTime()+
1E4;else e||(ld=!0,Mb=new g(b.energyDC),Xe=b.lastUpdateTime);Q();fb();md();Ye();nd();od();ba||da||(a=Yh,e=new Zh,e.init(a),da=e);S=[];null==gb&&(gb=document.getElementById("canvas"),qa=gb.getContext("2d"),Nb=document.getElementById("canvas-bottom"),pd=Nb.getContext("2d"),gb.width=Aa,gb.height=ra,Nb.width=Aa,Nb.height=ra);Na();qd();sa=!1;$h();Ze()}function ai(a){b.numberNotation=a;x("NumNotation","Settings",a)}function bi(){W(!1,!0);window.location.href="index.html?rnd="+Math.random()+(ba?"&kongregate=1":
"")}function $e(a){var b=Math.floor(a/3600).toString(),c=Math.floor(a%3600/60).toString();a=(a%60).toString();1==a.length&&(a="0"+a);1==c.length&&(c="0"+c);1==b.length&&(b="0"+b);return b+":"+c+":"+a}function hb(a){var b;100>a?b="second":6E3>a?(a/=60,b="minute"):18E4>a?(a/=3600,b="hour"):864E3>a?(a/=86400,b="day"):3024E3>a?(a/=604800,b="week"):31536E3>a?(a/=2592E3,b="month"):(a/=31536E3,b="year");return a.toFixed(1)+" "+b+"s"}function rd(a){var b=Math.floor(a/86400),c=Math.floor(a)%60,d=Math.floor(a/
60)%60;a=Math.floor(a/3600)%24;var f="";0<b&&(f+=b+" day",1<b&&(f+="s"),f+=" ");10>a&&(f+="0");f+=a+":";10>d&&(f+="0");f+=d+":";10>c&&(f+="0");return f+=c.toString()}function af(a,b,c){var d=a[b],f=d.length;if(c<f)return new g(d[c]);a=a[b+"Fnc"];if(null!==a)return a(c);if(0==f)return new g(0);if(1==f)return new g(d[0]);a=d[f-2];d=d[f-1];return a.isZero()?new g(d):d.mul(g.pow(d.div(a),c-f+1))}function ea(a,b){"object"!==typeof b&&(b=ed(b));return 0<b.rel&&1>b.rel?a*b.rel:a}function Ob(a,b){"object"!==
typeof b&&(b=ed(b));return 0<b.rel&&1>b.rel?g.mul(a,b.rel):new g(a)}function O(a,b,c,d,f,u,h){"object"!==typeof c&&(c=ed(c));var k=c.rel;c=c.step;b>bf&&(c=1,-1==k&&(k=0));0<k||-1==k?(a=1==k||-1==k?new g(a):g.mul(a,k),f=Math.floor(sd(a,f,u,h))):f=c;if(-1!=k&&0<d&&f>d)return d;0==k?b=f:(k=-1==k?c:f<c?c:f,1==c?b=k:(k=Math.floor((b+k)/c)*c,b=k>b?k-b:0));return 0==d?b:Math.min(d,b)}function E(a,b,c){if(1==b)return g.mul(a,c);var d=a.toString()+";"+b.toString()+";"+c.toString();if(d in ib)return ib[d];
1E5<td&&(ib=[],td=0);ib[d]=g.mul(a,g.sub(1,g.pow(b,c))).div(g.sub(1,b));td++;return ib[d]}function sd(a,b,c,d){if(1==c)return g.div(a,b).toNumber();d=d||Math.log(c);var f=a.toString()+";"+b.toString()+";"+c.toString();if(f in jb)return jb[f];1E5<ud&&(jb=[],ud=0);jb[f]=g.ln(g.sub(1,g.mul(a,g.sub(1,c)).div(b))).div(d).toNumber();ud++;return jb[f]}function ci(){kb=!0}function di(){kb=!1}function ei(){return kb}function vd(a){return K[a].finishTime?(K[a].finishTime-(new Date).getTime())/1E3:!1}function wd(a){var e=
vd(a);return!K[a].hide&&!b.premium.isSpecPackBought[a]&&(!1===e||0<e)}function fi(){for(var a in K)if(K.hasOwnProperty(a)&&K[a].buyOnce&&wd(a))return!0;return!1}function cf(a){kb=!1;var b=[a];ca()&&N.mtx.purchaseItems(b,gi);x("BuyStart","Premium",a,K[a].price)}function df(a){Pb=!0;pa=a}function hi(){Pb=!1}function ii(){return Pb}function ef(){return!1!==pa&&b.premium.premiumMoney>=ka[pa].price}function ff(){var a=pa;if(b.premium.premiumMoney>=ka[a].price){b.premium.premiumMoney-=ka[a].price;if(ka[a].onBuyFnc)ka[a].onBuyFnc();
W(!0);x("BuyItem","Premium",ka[a].name,ka[a].price)}pa=!1;C("upgrade")}function xd(){return Math.max(0,35-b.premium.premiumEnergyGeneratorInc)}function gf(){return Math.floor(xd()/5)}function Pe(){b.reset.energyExtLevel=5<=b.achievementsLevel[P.achEnergyStorage]?1:0;b.reset.energyExtUpgPrice=ji;b.reset.energyExtCapacityMult=.1;b.reset.gravityLevel=0;b.reset.gravityUpgPrice=ki;b.reset.gravityMult=1;b.reset.densityLevel=0;b.reset.densityUpgPrice=li;b.reset.densityMult=1;b.reset.bounceLevel=0;b.reset.bounceUpgPrice=
mi;b.reset.bounceMult=1;b.reset.bubbleProbLevel=0;b.reset.bubbleProbUpgPrice=ni;b.reset.bubbleProb=.01;b.reset.bubbleCapLevel=0;b.reset.bubbleCapUpgPrice=oi;b.reset.bubbleCapMult=1;b.reset.removeSpikes=!1;b.reset.idleMultLevel=0;b.reset.idleMultUpgPrice=hf;b.reset.idleMult=1;b.reset.idleMultTimeLevel=0;b.reset.idleMultTimeUpgPrice=jf;b.reset.idleMultTime=1;b.reset.energyGeneratorLevel=0;b.reset.energyGeneratorUpgPrice=yd}function Qb(){return 1<=b.reset.inactive}function kf(){b.reset.active+=b.reset.inactive;
b.statistics.metaEnergy+=b.reset.inactive;b.reset.inactiveTotal+=b.reset.inactive;b.reset.inactive=0;b.reset.resetCnt++;b.statistics.reset++;fb()}function lf(){return b.reset.bonusMult+b.events.eventMetaBonusInc}function fb(){b.reset.totalMult=1+b.reset.active*lf()}function pi(){return g.max(0,g.pow(10,b.reset.inactiveTotal+mf).mul(nf).sub(b.statistics.energyDC))}function fa(a){b.reset.active-=a;fb()}function qi(){return Rb}function ri(){Qb()&&(Rb=!0)}function si(){Rb=!1}function Sb(){return 1<Tb()||
b.reset.bounceLevel||b.reset.densityLevel||b.reset.gravityLevel||b.reset.bubbleProbLevel||b.reset.bubbleCapLevel||b.reset.removeSpikes||b.reset.idleMultLevel||b.reset.idleMultTimeLevel||b.reset.energyGeneratorLevel}function of(){if(Sb()){b.statistics.resetRefund++;0<b.reset.freeRefundCnt&&b.reset.freeRefundCnt--;var a=Tb()-1,e=b.reset.bounceLevel,c=b.reset.densityLevel,d=b.reset.gravityLevel,f=b.reset.bubbleProbLevel,g=b.reset.bubbleCapLevel,h=b.reset.removeSpikes,k=b.reset.idleMultLevel,q=b.reset.idleMultTimeLevel,
m=b.reset.energyGeneratorLevel;b.reset.gravityMult=1;Pe();Q();M();0<a&&(b.reset.active+=Ub(a));0<e&&(b.reset.active+=Vb(e));0<c&&(b.reset.active+=Wb(c));0<d&&(b.reset.active+=Xb(d));0<f&&(b.reset.active+=Yb(f));0<g&&(b.reset.active+=Zb(g));h&&(b.reset.active+=$b);0<k&&(b.reset.active+=ac(k));0<q&&(b.reset.active+=bc(q));0<m&&(b.reset.active+=cc(m));fb()}}function Tb(){return b.reset.energyExtLevel}function dc(a){return O(b.reset.active,Tb(),a,0,b.reset.energyExtUpgPrice,ec,ti)}function Ub(a){a=dc(a);
return 1>=a?b.reset.energyExtUpgPrice:E(b.reset.energyExtUpgPrice,ec,a).toNumber()}function pf(a){return 0<dc(a)&&ea(b.reset.active,a)>=Ub(a)}function fc(a){return O(b.reset.active,b.reset.bounceLevel,a,0,b.reset.bounceUpgPrice,gc,ui)}function Vb(a){a=fc(a);return 1>=a?b.reset.bounceUpgPrice:E(b.reset.bounceUpgPrice,gc,a).toNumber()}function qf(a){return 0<fc(a)&&ea(b.reset.active,a)>=Vb(a)}function hc(a){return O(b.reset.active,b.reset.densityLevel,a,0,b.reset.densityUpgPrice,ic,vi)}function Wb(a){a=
hc(a);return 1>=a?b.reset.densityUpgPrice:E(b.reset.densityUpgPrice,ic,a).toNumber()}function rf(a){return 0<hc(a)&&ea(b.reset.active,a)>=Wb(a)}function jc(a){return O(b.reset.active,b.reset.gravityLevel,a,0,b.reset.gravityUpgPrice,kc,wi)}function Xb(a){a=jc(a);return 1>=a?b.reset.gravityUpgPrice:E(b.reset.gravityUpgPrice,kc,a).toNumber()}function sf(a){return 0<jc(a)&&ea(b.reset.active,a)>=Xb(a)}function lc(a){return O(b.reset.active,b.reset.bubbleProbLevel,a,0,b.reset.bubbleProbUpgPrice,mc,xi)}
function Yb(a){a=lc(a);return 1>=a?b.reset.bubbleProbUpgPrice:E(b.reset.bubbleProbUpgPrice,mc,a).toNumber()}function tf(a){return 0<lc(a)&&ea(b.reset.active,a)>=Yb(a)}function nc(a){return O(b.reset.active,b.reset.bubbleCapLevel,a,0,b.reset.bubbleCapUpgPrice,oc,yi)}function Zb(a){a=nc(a);return 1>=a?b.reset.bubbleCapUpgPrice:E(b.reset.bubbleCapUpgPrice,oc,a).toNumber()}function uf(a){return 0<nc(a)&&ea(b.reset.active,a)>=Zb(a)}function zi(){return $b}function lb(){return b.reset.removeSpikes}function vf(){return!lb()&&
b.reset.active>=$b}function pc(a){return O(b.reset.active,b.reset.idleMultLevel,a,0,b.reset.idleMultUpgPrice,qc,Ai)}function ac(a){a=pc(a);return 1>=a?b.reset.idleMultUpgPrice:E(b.reset.idleMultUpgPrice,qc,a).toNumber()}function wf(a){return 0<pc(a)&&ea(b.reset.active,a)>=ac(a)}function rc(a){return O(b.reset.active,b.reset.idleMultTimeLevel,a,0,b.reset.idleMultTimeUpgPrice,sc,Bi)}function bc(a){a=rc(a);return 1>=a?b.reset.idleMultTimeUpgPrice:E(b.reset.idleMultTimeUpgPrice,sc,a).toNumber()}function xf(a){return 0<
rc(a)&&ea(b.reset.active,a)>=bc(a)}function yf(){return b.tubeImprLevelMax>=tc}function ta(){return b.reset.energyGeneratorLevel}function zf(){return Math.max(0,b.tubeImprLevelMax-tc+1)}function Ci(){return Math.max(b.tubeImprLevelMax+2,tc+1)}function Af(){return new g(b.reset.totalMult*b.premium.premiumEnergyMult*b.events.eventEnergyMult*b.boost.energyMult)}function Bf(a){if(0==a)return new g(0);var e=b.premium.premiumEnergyGeneratorInc;return a<=Cf?g.pow(Di,a+e).mul(Af()):mb(e%6+6*(a-Cf+1+Math.floor(e/
6))).mul(10).mul(Af())}function zd(){return Bf(ta())}function nb(a){var e=zf()-ta();return 0<e?O(b.reset.active,ta(),a,e,b.reset.energyGeneratorUpgPrice,uc,Ei):0}function cc(a){a=nb(a);return 1>=a?b.reset.energyGeneratorUpgPrice:E(b.reset.energyGeneratorUpgPrice,uc,a).toNumber()}function Df(a){return 0<nb(a)&&yf()&&ea(b.reset.active,a)>=cc(a)}function Ef(a,e){var c=Ff(a);if(29==a.saveVer)return c;var d=b,f;0==a.saveVer&&(d=c,d.saveVer=1,d.showBounceEnergy=!0,d.isAnyTubeImproved=!1,d.ballStyle="ball");
1==a.saveVer&&(d!=c&&(d=c),d.saveVer=2,d.statistics.resetRefund=0,d.buyAmountValue={});2==a.saveVer&&(d!=c&&(d=c),d.saveVer=3,d.tubeInfo="percent",d.coloredUpgrades=!1,d.showUpgradeCntInTab=!0);3==a.saveVer&&(d!=c&&(d=c),d.saveVer=4,d.reset.removeSpikes=!1);4==a.saveVer&&(d!=c&&(d=c),d.saveVer=5,d.gameId="IdleBouncer",d.kongUserId="",d.idleEnergyDC=new g(0),d.idleEnergyTimer=-Ad,d.idleEnergyBonusDC=new g(0),d.idleEnergyTransferSpeedDC=new g(0),d.reset.idleMultLevel=0,d.reset.idleMultUpgPrice=hf,d.reset.idleMult=
1,d.reset.idleMultTimeLevel=0,d.reset.idleMultTimeUpgPrice=jf,d.reset.idleMultTime=1,d.premium.premiumIdleMult=1,d.premium.premiumIdleMultTime=1,f=d.premium.isSpecPackBought,d.premium.isSpecPackBought={},f&&(d.premium.isSpecPackBought.packspec=!0));if(5==a.saveVer){d!=c&&(d=c);d.saveVer=6;5<=d.achievementsLevel[P.achEnergyStorage]&&(0==d.reset.energyExtLevel?d.reset.energyExtLevel=1:d.reset.active++);f=10*Math.max(0,d.statistics.resetRefund-1);var u=Math.max(0,d.statistics.resetRefund-1-d.statistics.reset);
d.reset.freeRefundCnt=Math.max(0,1+d.statistics.reset-d.statistics.resetRefund);d.premium.premiumMoney+=f-u}6==a.saveVer&&(d!=c&&(d=c),d.saveVer=7,d.events={eventEnergyMult:1,eventBounceMult:1,eventGravityMult:1,eventIdleMult:1,eventIdleMultTime:1,eventMetaBonusInc:0,eventItems:[]},d.boost.gravityMult=1);7==a.saveVer&&(d!=c&&(d=c),d.saveVer=8,d.virtTubeIdMax=0,d.premium.isSpecPackBought.packidle&&(d.premium.isSpecPackBought.packidlen=!0));if(8==a.saveVer){d!=c&&(d=c);d.saveVer=9;d.reset.freeRefundCnt++;
d.tubeImprLevelMax=d.tubes[0].improvementLevel;for(f=1;6>f;f++)d.tubes[f].active&&d.tubes[f].improvementLevel>d.tubeImprLevelMax&&(d.tubeImprLevelMax=d.tubes[f].improvementLevel);d.statistics.improvementMax=0==d.tubeImprLevelMax?0:d.tubeImprLevelMax+1;d.reset.energyGeneratorLevel=0;d.reset.energyGeneratorUpgPrice=yd;d.reset.energyGeneratorValueDC=new g(0);d.premium.premiumEnergyGeneratorInc=0;d.theme="default";d.events.stvAchLevels||(d.events.stvAchLevels=[0,0,0,0])}9==a.saveVer&&(d!=c&&(d=c),d.saveVer=
10,d.reset.freeRefundCnt++,f=d.reset.energyGeneratorLevel,0<f&&(d.reset.active+=1==f?1:E(1,1.1,f).toNumber(),d.reset.energyGeneratorLevel=0,d.reset.energyGeneratorUpgPrice=yd,d.reset.energyGeneratorValueDC=new g(0)));10==a.saveVer&&(d!=c&&(d=c),d.saveVer=11,f=new Date,d.boost={bounceMult:1,gravityMult:1,energyMult:1,densityMult:1,bubbleProbInc:0,bubbleCapMult:1,idleMult:1,idleTimeInc:0,timers:{},daily:{nextDay:{d:f.getDate(),m:f.getMonth(),y:f.getFullYear()},daysInRow:0,isDailyBoostGenerated:!1,generatedDailyBoost:0,
generatedDailyValue:0,generatedDailyTime:0,selectedDailyBoost:0,selectedDailyValue:0}},d.boost.timers.dailyBoost=0,d.statistics.daysInRowMax=0,d.events.eventBoughtItems=[]);if(11==a.saveVer){d!=c&&(d=c);d.saveVer=12;delete d.reset.energyGeneratorValueDC;d.tubeImprovesMax=[];d.abilitiesFreeRefundCnt=1+d.tubeImprLevelMax;d.isAnyAbilityBought=!1;d.abilities=[];for(f=0;6>f;f++){d.tubeImprovesMax[f]=d.tubes[f].improvementLevel;d.balls[f].heightTotalDC=new g(0);d.balls[f].tmpDropHeight=0;d.abilities[f]=
{points:d.tubeImprovesMax[f],levels:{},queueSizeMax:1,queue:[],currentAbility:0,autoJumpKoef:0,energyMultDC:new g(1)};for(var h in w)w.hasOwnProperty(h)&&(d.abilities[f].levels[h]={lvlMax:0,lvl:0,ptsPrice:w[h].ptsPrice,heightDC:new g(0),effectMultDC:w[h].initEffectMultDC?new g(w[h].initEffectMultDC):new g(0)});delete d.tubes[f].improveButtonVisible;d.tubes[f].improvePriceDC=mb(f+6*(d.tubes[f].improvementLevel+1)).mul(10)}h=d.reset.densityLevel;f=d.reset.gravityLevel;var u=d.reset.idleMultLevel,k=
d.reset.energyGeneratorLevel;d.reset.freeRefundCnt++;if(0<k){d.reset.active+=E(.5,1.01,k).toNumber();4<k&&(k=4+Math.floor((k-4)/6));var q=sd(d.reset.active,1,1.07);k>q&&(k=q);d.reset.active-=E(1,1.07,k).toNumber();d.reset.energyGeneratorUpgPrice=Math.pow(1.07,k);d.reset.energyGeneratorLevel=k}0<u&&(d.reset.active+=E(2,1.2,u).toNumber(),d.reset.active-=E(2,1.18,u).toNumber(),d.reset.idleMultUpgPrice=2*Math.pow(1.18,u));0<h&&(d.reset.active+=E(4,1.3,h).toNumber(),d.reset.active-=E(4,1.27,h).toNumber(),
d.reset.densityUpgPrice=4*Math.pow(1.27,h));0<f&&(d.reset.active+=E(5,1.3,f).toNumber(),d.reset.active-=E(5,1.27,f).toNumber(),d.reset.gravityUpgPrice=5*Math.pow(1.27,f));0<d.tubeImprLevelMax&&(--d.reset.inactiveTotal,Bd=!0)}12==a.saveVer&&(d!=c&&(d=c),d.saveVer=13,d.showAbilityEffects=!0);if(13==a.saveVer)for(d!=c&&(d=c),d.saveVer=14,d.firstStartTime=(new Date).getTime(),d.abilitiesFreeRefundCnt++,f=0;6>f;f++){if(8<d.tubeImprovesMax[f]){k=d.tubes[f].improvementLevel;h=f+6*k;u=mb(h).mul(10);if(3<
f||0<k)u=vc[f][k]?u.mul(vc[f][k]):u.mul(13500).mul(g.exp(.23*(h-12)));d.tubes[f].amplifierUpgPriceDC=u.mul(g.pow(1.15,d.tubes[f].amplifierLevel-1))}d.abilities[f].currentAbility=Math.max(0,Math.min(d.abilities[f].queue.length-1,d.abilities[f].currentAbility))}if(14==a.saveVer){d!=c&&(d=c);d.saveVer++;0<d.tubeImprLevelMax&&(d.reset.inactiveTotal--,d.abilitiesFreeRefundCnt++);for(f=0;6>f;f++)d.abilities[f].preventWeakBubbleKoef=0,d.abilities[f].levels.preventWeakBubble={lvlMax:0,lvl:0,ptsPrice:w.preventWeakBubble.ptsPrice,
heightDC:new g(0),effectMultDC:new g(0)};d.bgStyle="off"}if(15==a.saveVer)for(d!=c&&(d=c),d.saveVer++,f=0;6>f;f++)d.abilities[f].levels.preventWeakBubble.ptsPrice=2,0<d.abilities[f].levels.preventWeakBubble.lvlMax&&(d.abilities[f].points+=d.abilities[f].levels.preventWeakBubble.lvlMax);16==a.saveVer&&(d!=c&&(d=c),d.saveVer++);17==a.saveVer&&(d!=c&&(d=c),d.saveVer++,d.buyAmountValue={});18==a.saveVer&&(d!=c&&(d=c),d.saveVer++,d.buyAmountStepPosRight=!0);19==a.saveVer&&(d!=c&&(d=c),d.saveVer++);20==
a.saveVer&&(d!=c&&(d=c),d.saveVer++,d.achievementsSingleTaken={},d.statistics.metaEnergy=d.reset.active);21==a.saveVer&&(d!=c&&(d=c),d.saveVer++,d.musicEnabled=!0,d.sfxEnabled=!0);22==a.saveVer&&(d!=c&&(d=c),d.saveVer++,d.musicVolume=.3,d.sfxVolume=1);23==a.saveVer&&(d!=c&&(d=c),d.saveVer++,d.fullscreen=!1,d.keepWindowSize=!1,d.windowWidth=0,d.windowHeight=0,d.windowMaximized=!1);24==a.saveVer&&(d!=c&&(d=c),d.saveVer++);25==a.saveVer&&(d!=c&&(d=c),d.saveVer++,d.cloudAutoSaveEnabled=!0,d.saveTimestamp=
0,d.cloudSaveTimestamp=0,d.uniqueSaveGameId=0);26==a.saveVer&&(d!=c&&(d=c),d.saveVer++);27==a.saveVer&&(d!=c&&(d=c),d.saveVer++);28==a.saveVer&&(d!=c&&(d=c),d.saveVer++,e||(Ma=wd("packstv2")));return d}function Cd(a){a=Oa.compressToBase64(a);for(var b=0,c=a.length-1;0<=c;c--)b+=a.charCodeAt(c)+7;return a+"$"+b.toString(36)}function Gf(a){if(!a)return"";if("{"==a[0])return a;var b=a.indexOf("$");if(-1==b)return decodeURIComponent(unescape(window.atob(a)));var c=a.substr(0,b);a=a.substr(b+1);a=parseInt(a,
36);for(b=c.length-1;0<=b;b--)a-=c.charCodeAt(b)+7;if(0==a)return Oa.decompressFromBase64(c);throw Error("wrong checksum");}function jd(a,e,c){"undefined"===typeof a&&(a="");"undefined"===typeof e&&(e=!1);"undefined"===typeof c&&(c=!1);try{var d=""!=a,f=d?Gf(a):Gf(window.localStorage.IdleBouncer);if(f){var f=JSON.parse(f),g=I.userId,h=I.userName;if(d&&!c&&(f.gameId&&"IdleBouncer"!=f.gameId||f.kongUserId&&f.kongUserId!=g||!f.kongUserId&&f.kongUser&&f.kongUser!=h))return"error";e?c&&(la=Ef(f,e)):b=
Ef(f,e);return"ok"}return"empty"}catch(k){return Dd((d?c?"Cloud":"Import":"Load")+(e?" check":"")+" error"+(k.message?" ("+k.message+")":""),!1),"error"}}function W(a,e){a&&(Ed=wc=0);var c=(new Date).getTime();if(e||c>=Ed&&c>=wc||c>=xc){Ed=c+2E3;wc=c+6E4;Hf(!1);var d=Cd(JSON.stringify(b));yc=!0;try{window.localStorage.IdleBouncer=d,e&&d!=window.localStorage.IdleBouncer&&(yc=!1)}catch(f){yc=!1}sa&&b.cloudAutoSaveEnabled&&c>=xc&&If(!0)}}function Hf(a){0==b.uniqueSaveGameId&&(b.uniqueSaveGameId=Math.random()+
1);b.saveTimestamp=(new Date).getTime();a&&(b.cloudSaveTimestamp=b.saveTimestamp)}function Fd(){xc=(new Date).getTime()+6E4}function Vh(a){a in G||(G[a]={audio:new Audio,loaded:!1,playing:!1},G[a].audio.onloadeddata=function(){G[a].loaded=!0},G[a].audio.onended=function(){G[a].playing=!1},G[a].audio.src=(db[a].isSFX?"sfx/":"snd/")+db[a].file)}function C(a){var e=db[a].isSFX;G[a].loaded&&(e&&b.sfxEnabled||!e&&b.musicEnabled)&&(G[a].audio.currentTime=0,G[a].audio.volume=e?b.sfxVolume:b.musicVolume,
G[a].audio.play(),G[a].playing=!0)}function Fi(){if(Jf)return!0;for(var a=0;a<Kf;a++)if(!G["music"+a].loaded)return!1;return Jf=!0}function Lf(a){b.theme!=a&&(b.theme=a,Na())}function ob(){return b.theme}function T(){return Mf[ob()]}function Gi(){return"default"!=ob()}function Hi(){return T().file}function Ke(){return T().imgDir}function Gd(){return b.tutorial.enabled}function Pa(){return Gd()&&-1!=b.tutorial.activeId}function Ii(){return Pa()&&!Qa().hidePanel}function Qa(){return Pa()?Ra[b.tutorial.activeId]:
null}function Nf(){var a=Qa();return null!=a&&a.activeTabName&&aa!=a.activeTabName}function Ji(){var a=Qa();return null==a?"":Nf()?"Click on the "+a.activeTabName+" tab.":a.text}function Ki(){var a=Qa();return null==a?!1:a.continueButton&&!Nf()}function Of(a){return Pa()&&Ra[b.tutorial.activeId].name==a}function Li(a){return Of(a)&&Ra[b.tutorial.activeId].highlightElements}function Mi(){var a=Qa();return null!=a&&a.highlightElements}function Ni(){Pf()}function Qf(a){b.tutorial.enabled=!1;a?x("ClickSkip",
"Tutorial","SkipOnStep"+b.tutorial.activeId,b.tutorial.activeId):x("Finish","Tutorial","FullTutorial")}function Pf(a){var e;"undefined"===typeof a?(e=Qa(),a=b.tutorial.activeId):e=Ra[a];null!=e&&(e.activateOnce&&(b.tutorial.finishedIds[a]=e.name),b.tutorial.activeId=-1,a==Rf-1?Qf(!1):Eb())}function Sf(a){var e=Ra[a];if(Pa())e.finishFnc()&&(x("FinishStep","Tutorial",e.name,a),Pf(a));else if(e.activateFnc())return b.tutorial.activeId=a,!0;return!1}function Eb(){if(Gd())if(Pa())Sf(b.tutorial.activeId);
else for(var a=0;a<Rf&&(a in b.tutorial.finishedIds||!Sf(a));a++);}function Tf(a){if(Ib){var b=!0;null!=zc&&(b=zc(a||!1));b&&(Ib=!1,Hd="",Sa=0,zc=null)}}function Oi(){0<Sa&&(new Date).getTime()>=Sa&&Tf(!0);return Ib}function Pi(){return Uf}function Qi(){return Hd}function Ri(){return 0==Sa?"":Math.ceil((Sa-(new Date).getTime())/1E3)}function id(a,b,c,d){Uf=a;Hd=b||"";Sa=c?(new Date).getTime()+c:0;zc=d||null}function Na(){pd.clearRect(0,0,Aa,ra);for(var a=pd,e,c=0;6>c;c++)if(b.tubes[c].active){e=D[c];
var d=a,f=e.x,g=e.y,h=e.width;e=e.height;d.fillStyle="#fff";d.strokeStyle=T().tubeRectColor;d.strokeRect(Math.floor(f),Math.floor(g),Math.floor(h),Math.floor(e))}}function qd(){qa.clearRect(0,0,Aa,ra);var a=qa;if(Of("start")){var e="Click here to drop a ball.; Each bounce gives you energy.;  Spend it to upgrade;   the tube amplifier and height,;    the ball size and bounce.;     Sell tubes to get meta-energy;      and use it to change the world!".split(";"),c={x:50,y:Ta,font:"bold 14px Arial",isFillText:!0,
fillStrokeStyle:T().tutorialTextColorRGBA.slice(),hAlign:"start",vAlign:"top",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,shadowBlur:0},d;for(d in e)e.hasOwnProperty(d)&&(c.text=e[d],Ac(a,c),c.y+=14);a.fillStyle="#f00";a.strokeStyle="#f00";a.lineWidth=2;a.beginPath();a.moveTo(49,11+Ta);a.lineTo(20,60+Ta);a.stroke();a.beginPath();a.moveTo(20,50+Ta);a.lineTo(20,60+Ta);a.lineTo(29,55+Ta);a.fill();a.lineWidth=1}for(var a=qa,f,g=0;6>g;g++)d=b.balls[g],d.active&&(f=Y[g].x,e=Y[g].y-d.y*ua-.5,c=Math.max(1,
d.r*ua),Bc[Cc()].drawFnc(a,g,f,e,c,b.tubes[g].improvementLevel,Id[g]),pb[g]&&(0>d.v?(f=T().bounceTextColorRGBA.slice(),f[3]=Math.max(0,Math.min(1,1-d.y/d.height)),a.fillStyle="rgba("+f.join(",")+")",a.fillRect(D[g].x,e+c,D[g].width,1)):pb[g]=!1));var a=qa,h;for(h in S)if(S.hasOwnProperty(h))switch(e=S[h],S[h].type){case "text":Ac(a,e);break;case "img":a.globalAlpha=e.opacity;1==e.scale?a.drawImage(e.img,e.x,e.y):a.drawImage(e.img,e.x,e.y,e.img.width*e.scale,e.img.height*e.scale);a.globalAlpha=1;break;
case "rect":c="rgba("+e.color.join(",")+")",e.isStroke?(a.strokeStyle=c,a.strokeRect(e.x,e.y,e.width,e.height)):(a.fillStyle=c,a.fillRect(e.x,e.y,e.width,e.height))}h=qa;e=Jd();if(0<e)for(c=0;6>c;c++)b.tubes[c].active&&("percent"==Vf()?(a=Math.floor(1E3*Kd(c).div(e).toNumber())/10,Wf(h,Y[c].x,Y[c].y,12,a+"%")):Wf(h,Y[c].x,Y[c].y,9,J(Kd(c),1,0)));h=qa;for(a=0;6>a;a++)Ba(a)&&(e=h,c=a,d=Math.min(1,Ld(c).div(Md(c)).toNumber()),d=Math.floor(D[c].width*d),g=D[c].x+Math.floor((D[c].width-d)/2),c=D[c].bottom-
1-Xf,e.fillStyle=T().abilityProgressColor,e.fillRect(g,c,d,Dc));h=qa;Nd&&ma&&(a=Math.floor(m.size),h.globalAlpha=m.opacity,Ca?h.drawImage(qb,100*(1+Math.floor(Si*(1-m.opacity))),0,Ec,Ec,Math.floor(m.posX),Math.floor(m.posY),a,a):Ua||h.drawImage(qb,0,0,Ec,Ec,Math.floor(m.posX),Math.floor(m.posY),a,a),Ca||(a={x:Math.floor(m.centerX),y:Math.floor(m.centerY),font:"bold "+Math.floor(m.fontSize)+"px Arial",isFillText:!0,fillStrokeStyle:T().qteTextColorRGBA.slice(),hAlign:"center",vAlign:"middle",shadowColor:"#fff",
shadowOffsX:0,shadowOffsY:0,shadowBlur:0},a.text=J(m.valueDC,1,1),Ac(h,a)),h.globalAlpha=1)}function Ac(a,b){a.font=b.font;a.textBaseline=b.vAlign;a.textAlign=b.hAlign;a.shadowColor=b.shadowColor;a.shadowOffsetX=b.shadowOffsX;a.shadowOffsetY=b.shadowOffsY;a.shadowBlur=b.shadowBlur;var c="rgba("+b.fillStrokeStyle.join(",")+")";b.isFillText?(a.fillStyle=c,a.fillText(b.text,Math.floor(b.x),Math.floor(b.y))):(a.strokeStyle=c,a.strokeText(b.text,Math.floor(b.x),Math.floor(b.y)))}function Vf(){return b.tubeInfo}
function Ti(a){b.tubeInfo=a}function Wf(a,b,c,d,f){b={x:b,y:c+Ui,font:"bold "+d+"px Arial",isFillText:!0,fillStrokeStyle:T().bounceTextColorRGBA.slice(),hAlign:"center",vAlign:"top",shadowColor:"#fff",shadowOffsX:0,shadowOffsY:0,shadowBlur:0};b.text=f;Ac(a,b)}function Vi(){return 0}function va(a,e){e&&(b.lastUpdateTime=(new Date).getTime()-1E3*a)}function Wi(){}function Xi(){}function Yf(){return rb[Fc].page+"?rnd="+Math.random()+(ba?"&kongregate=1":"")+""}function We(){return Yi&&0<(rb[Fc].finishTime-
(new Date).getTime())/1E3}function Zi(){W(!1,!0);window.location.href=Yf()}function $i(){return rb[Fc].title}function Da(a){return b.events.eventItems[a]?!0:!1}function Gc(a,e){Da(a)||(b.events.eventItems[a]=!0,b.events.eventBoughtItems[a]=e?!0:!1,wa[a].addFnc(),W(!0))}function Zf(a){for(var b=0,c=0;c<sb;c++)wa[c].eventCode==a&&Da(c)&&b++;return b}function Yh(a){if("started"==a)x("AIAdOpened_"+da.getAdlId(),"Boosts",A);else if("finished"==a)x("AIAdCompleted_"+da.getAdlId(),"Boosts",A),Ie(),W(!0);
else if("cancelled"==a||"error"==a)x("AIAdAbandoned_"+da.getAdlId(),"Boosts",A),A=""}function Hc(){return!Od()&&!Pd()&&!1===Ea&&$f()}function ag(){return(new Date).getTime()>Qd&&Hc()}function Pd(){return"started"==Fa}function aj(){return"ok"==Fa}function bj(){return"error"==Fa}function cj(a,e){Fa=a?"ok":"error";a?sa=!0:(b.cloudSaveTimestamp=bg,Dd("Cloud save error ("+e+")",!1));W(!1,!0)}function If(a){if(ag()){Fa="";Fd();bg=b.cloudSaveTimestamp;Hf(!0);var e;e=Oa.compressToBase64("e8g"+I.userId+"u8t");
var c=Oa.compressToBase64("uie"+I.userId+"s75"),d=Cd(JSON.stringify(b)),f=cj;!1===Ea?(Ea="save",f&&(tb=f),Ic(cg+"save.php",dg,"game="+encodeURIComponent("IdleBouncer")+"&user="+encodeURIComponent(e)+"&pass="+encodeURIComponent(c)+"&data="+encodeURIComponent(d)),e=!0):e=!1;e&&(a||(Qd=(new Date).getTime()+6E4),Fa="started",Od()||(U=""))}}function dj(){return Hc()}function Od(){return"started"==U}function Jc(){return"ok"==U}function ej(){return"error"==U}function fj(){return"empty"==U}function gj(a,
e){U=a?"ok":"error";if(a){var c=jd(e,!0,!0);"ok"==c?(Kc=e,Lb?(Lb=!1,(new Date).getTime()<=kd?eg():ub=!0):la.uniqueSaveGameId&&la.uniqueSaveGameId==b.uniqueSaveGameId&&la.cloudSaveTimestamp&&b.cloudSaveTimestamp==la.cloudSaveTimestamp&&(sa=!0)):(Kc="",la={},U="empty"==c?"empty":"error")}else Kc="",la={},"user not found"==e||"no data"==e?U="empty":Dd("Cloud load error ("+e+")",!1);"empty"==U&&(sa=!0);Lb=!1}function fg(){if(Hc()){U="";Fd();var a;a=Oa.compressToBase64("e8g"+I.userId+"u8t");var b=Oa.compressToBase64("uie"+
I.userId+"s75"),c=gj;!1===Ea?(Ea="load",c&&(tb=c),Ic(cg+"load.php",dg,"game="+encodeURIComponent("IdleBouncer")+"&user="+encodeURIComponent(a)+"&pass="+encodeURIComponent(b)),a=!0):a=!1;a&&(U="started",Pd()||(Fa=""))}}function eg(){Jc()&&(x("CloudLoadOK","Settings"),Hb(!1,Kc,!0),U="",sa=!0,Fd())}function hj(){return ub}function ij(){ub=!0;fg()}function jj(){ub=!1}function kj(){var a;if(Jc()){a=new Date(la.lastUpdateTime);var b=a.getMonth(),c="0"+a.getHours(),d="0"+a.getMinutes(),f="0"+a.getSeconds();
a=lj[b]+" "+a.getDate()+", "+a.getFullYear()+" "+c.substr(-2)+":"+d.substr(-2)+":"+f.substr(-2)}else a="n/a";return a}function mj(){return Jc()?la.energyDC:"n/a"}function nj(){if(sa){var a=sa?Math.max(0,xc-(new Date).getTime())/1E3:0;return 0<a?'<span class="text-success">active</span>, next auto-save in '+hb(a):'<span class="text-success">active</span>'}return'<span class="text-danger">inactive</span>, <i>save to the cloud to activate</i>'}function Qe(a){var b=a.length;return 1<b&&"D"===a[b-2]&&
"C"===a[b-1]}function Ff(a){if(Array.isArray(a)||"object"==typeof a)for(var b in a)if(a.hasOwnProperty(b))if(Qe(b))if(Array.isArray(a[b]))for(var c in a[b])a[b].hasOwnProperty(c)&&(a[b][c]=new g(a[b][c]));else a[b]=new g(a[b]);else a[b]=Ff(a[b]);return a}function oj(a,b){eb||(eb=!0,Ka=!1,La=a,b.get(pj).then(function(a){Ka=!0;Rd=a.data;a=(new Date).getTime()/1E3;a=Math.max(.1,a-Rd);a<qj||(La=Math.max(.1,La-a))},function(a){Ka=!0;Rd=0}))}function $h(){if(!gg){ga("set","appName","Idle Bouncer");ga("set",
"appVersion","1.3.2.1");var a=document.referrer;try{window.parent!=window&&(a=window.parent.document.referrer)&&ga("set","referrer",a)}catch(b){}ga("send","pageview");x("Version","Game","1.3.2.1");setTimeout(function(){ba?x("Site","Game","kongregate.com "+(ca()?"API":"no API")):x("Site","Game","other")},2E4);/^(https?:\/\/)?[^/]*kongregate\.com(\/.*)?$/i.test(a)?x("SiteHost","Game","kongregate.com"):x("SiteHost","Game","other");gg=!0}}function x(a,b,c,d,f){b||(b="Event");d&&(d=parseInt(d,10),d=isNaN(d)?
0:d);window.ga?(a={eventCategory:b,eventAction:a},c&&(a.eventLabel=c),d&&(a.eventValue=d),f&&(a.nonInteraction=f),ga("send","event",a)):window._gaq&&_gaq.push(["_trackEvent",b,a,c,d,f])}function Dd(a,b){ga("send","exception",{exDescription:a,exFatal:b})}function rj(a){if("ShiftLeft"==a.code||"ShiftRight"==a.code)Ga=!0}function sj(a){if("ShiftLeft"==a.code||"ShiftRight"==a.code)Ga=!1}function tj(a){var e=/Digit(\d+)/.exec(a.code),c="-"==a.key;if(e||c)e=c?10:0==e[1]?9:e[1]-1,Ga?0<=e&&6>e&&(hg()?v=e:
"Main"==aa&&("Main"==F?ig(e):"BallBounce"==F?jg(e):"BallSize"==F?kg(e):"TubeHeight"==F&&lg(e))):0<=e&&e<mg&&(ab()?e<Db?cd(Lc[e].value):dd(vb[e-Db]):e<bb?dd(vb[e]):cd(Lc[e-bb].value));else if("Main"==aa)switch(a.code){case "Backquote":Sd(Z(1,l().step));break;case "KeyQ":case "KeyA":ya("Main");break;case "KeyW":case "KeyZ":ya("BallBounce");break;case "KeyE":ya("BallSize");break;case "KeyR":ya("TubeHeight");break;case "KeyT":b.isAnyTubeImproved&&ya("Abilities")}}function Xh(){return Ja?(id("Starting KongregateAPI... FAILED",
'<div class="text-center">May be your ad blocker or security preferences prevent the game connecting to Kongregate servers.<br/>Try disabling your ad blocker or adding exceptions for kongregate.com and then refresh game page.<br/>Chrome has begun blocking Flash by default, please <a href="https://helpx.adobe.com/flash-player/kb/enabling-flash-player-chrome.html" target="_blank">enable flash</a> and try again.</div>',uj,vj),!1):!0}function vj(){Ja=!1;return!0}function wj(){return ba}function ca(){if(!ba)return!1;
if(N)return!0;try{if(window.parent.kongregate)return N=window.parent.kongregate,Ja&&(Ja=!1,id("Starting KongregateAPI... SUCCESS","",xj)),ng(),N.services.addEventListener("login",yj),kd=(new Date).getTime()+1E4,!0}catch(a){}return!1}function yj(a){ng()}function ng(){I.isGuest=N.services.isGuest();I.userId=N.services.getUserId();I.userName=N.services.getUsername();I.token=N.services.getGameAuthToken();I.isGuest||(od(),fg())}function $f(){return ca()&&!I.isGuest}function zj(){ca()&&N.services.showRegistrationBox()}
function og(a){a=new g(a);var b=1<a.e?Math.log(a.e)/Aj:0;return Math.max(0,a.e<b?a.e:Math.floor(b))}function pg(a){var b=1<a?Math.log(a)/Bj:0;return Math.max(0,a<b?Math.floor(a):Math.floor(b))}function gi(a){a.success&&(od(),x("BuyConfirm","Premium"))}function od(){ca()&&N.mtx.requestUserItemList(null,Cj)}function Cj(a){if(a.success){for(var e=!1,c=0;c<a.data.length;c++){var d=a.data[c],f="k"+d.id;if(d.identifier in K&&!(f in b.premium.boughtPackList)){e=b.premium.boughtPackList[f]=d.identifier;if(e in
K){b.premium.premiumMoney+=K[e].premiumMoney;if(K[e].onBuyFnc)K[e].onBuyFnc();K[e].buyOnce&&(b.premium.isSpecPackBought[e]=!0);b.kongUserId=I.userId;b.kongUser=I.userName;C("upgrade")}var e=!0,g=Dj*K[d.identifier].price;x("BuySuccess","Premium",d.identifier,K[d.identifier].price);var h=g,k={id:f,affiliation:"Kongregate"};h&&(k.revenue=h);ga("ecommerce:addTransaction",k);h=d.identifier;d={id:f,name:d.identifier};h&&(d.sku=h);d.category="premium packs";g&&(d.price=g);d.quantity=1;ga("ecommerce:addItem",
d);ga("ecommerce:send")}}e&&W(!0)}}function Ej(a,b,c){c&&!Td&&c.version&&"1.3.2.1"<c.version&&(Ud=Td=!0);Vd=!1}function Ze(){setTimeout(function(){Td||(Vd||(Vd=!0,qg(Fj+Gj,Ej)),Ze())},3E5)}function Se(a){a&&(b.abilitiesFreeRefundCnt=1);b.isAnyAbilityBought=!1;b.abilities=[];for(a=0;6>a;a++){b.abilities[a]={points:b.tubeImprovesMax[a],levels:{},queueSizeMax:1,queue:[],currentAbility:0,autoJumpKoef:0,energyMultDC:new g(1),preventWeakBubbleKoef:0};for(var e in w)w.hasOwnProperty(e)&&(b.abilities[a].levels[e]=
{lvlMax:0,lvl:0,ptsPrice:w[e].ptsPrice,heightDC:new g(0),effectMultDC:w[e].initEffectMultDC?new g(w[e].initEffectMultDC):new g(0)});var c=a;b.abilities[c].energyMultDC=new g(1);Wd(c)}}function Wd(a){b.abilities[a].autoJumpKoef=0;b.balls[a].tmpDropHeight=0}function rg(a){return b.abilities[a].points}function sg(){0<b.abilitiesFreeRefundCnt&&(b.abilitiesFreeRefundCnt+=-1);Se(!1)}function Xd(){return b.isAnyAbilityBought}function Ba(a){return 0<b.abilities[a].queue.length}function Hj(a){return Ba(a)?
w[b.abilities[a].queue[b.abilities[a].currentAbility]].name:""}function Md(a){return Ba(a)?b.abilities[a].levels[b.abilities[a].queue[b.abilities[a].currentAbility]].heightDC:new g(0)}function Ij(a){v=a}function Jj(){v=-1}function Kj(){return v}function hg(){return-1!=v}function tg(a,e){var c=w[e].levelMax;return 0<c&&c==b.abilities[a].levels[e].lvlMax}function Va(a,e,c){return tg(a,e)?0:O(b.abilities[a].points,b.abilities[a].levels[e].lvl,c,0==w[e].levelMax?0:w[e].levelMax-b.abilities[a].levels[e].lvlMax,
b.abilities[a].levels[e].ptsPrice,w[e].ptsPriceRate)}function Yd(a,e,c){c=Va(a,e,c);return 1>=c?b.abilities[a].levels[e].ptsPrice:E(b.abilities[a].levels[e].ptsPrice,w[e].ptsPriceRate,c).toNumber()}function ug(a,e,c){return 0<Va(a,e,c)&&ea(b.abilities[a].points,c)>=Yd(a,e,c)}function vg(a,e,c){var d=b.abilities[a].levels[e];if(d.lvl!=c&&(c>d.lvlMax?c=d.lvlMax:1>c&&(c=1),d.lvl=c,d.heightDC=w[e].heightDCFnc(c),d.effectMultDC=w[e].effectMultDCFnc(c),w[e].passiveAbility))w[e].onActivateFnc(a,d.effectMultDC)}
function wg(a,e){b.abilities[a].queue.splice(e,1);b.abilities[a].currentAbility>=e&&0<b.abilities[a].currentAbility&&b.abilities[a].currentAbility--}function Zd(a){var e=b.balls[a],e=e.height-e.r;Mc[a]=1<e?Md(a).sub(Ld(a)).toNumber()*Math.sqrt(8/(b.gravity*e)):0}function xg(a){if(Ba(a)){var e=b.balls[a];if(1<e.height-e.r)return Mc[a]}return 0}function Lj(a,b){a.onload=function(){$d[b]=!0;for(var a=0;6>a;a++)if(!$d[a])return;ae=!0;be=!1}}function yg(a){var e=b.tubes[a].amplifierUpgPriceDC,c=b.tubes[a].improvementLevel,
d=e.mul(10),f=5,u=1;if(0<c){var c=e.mul(g.pow(1.15,10999)),h=d.mul(g.pow(100,b.tubes[a].ballSizeMax-5));c.lt(h)&&(f=Math.max(f,b.tubes[a].ballSizeMax-Math.floor(g.ln(c.div(d)).toNumber()/zg)),u=f/5,u*=u*u)}e=e.mul(b.achievementsMult[P.achBouncer]);b.balls[a]={active:b.tubes[a].active,height:f,y:f,r:f,v:0,heightTotalDC:new g(0),tmpDropHeight:0,sizeUpgPriceDC:d,weight:u,bounceCnt:10,bounceKoefDC:ce(10),bounceUpgPriceDC:e};Mc[a]=0;pb[a]=!1}function de(){return b.reset.bounceMult*b.boost.bounceMult*b.premium.premiumBounceMult*
b.events.eventBounceMult}function ce(a){return g.pow(.01,g.div(1,g.mul(a,de())))}function M(){for(var a=0;6>a;a++)b.balls[a].bounceKoefDC=ce(b.balls[a].bounceCnt)}function Ag(a,e){b.balls[a].height=e;b.balls[a].y=e;b.balls[a].v=0;ee(a);Zd(a);pb[a]=!1}function ee(a){if(b.balls[a].height<b.balls[a].r)b.balls[a].height=b.balls[a].r;else{var e=b.tubes[a].height-b.balls[a].r;b.balls[a].height>e&&(b.balls[a].height=e)}b.balls[a].y>b.balls[a].height?(b.balls[a].y=b.balls[a].height,b.balls[a].v=0):b.balls[a].y<
b.balls[a].r&&(b.balls[a].y=b.balls[a].r,b.balls[a].v=0)}function Cc(){return b.ballStyle}function Mj(a){b.ballStyle=a;nd()}function nd(){Id=Bc[Cc()].colors;Bg=Bc[Cc()].textColors}function p(a,b,c,d,f,g){a.fillStyle=f||"#ff0";a.strokeStyle=g||T().circleStrokeColor;a.beginPath();a.arc(b,c,d,0,2*Math.PI,!0);a.fill();a.stroke()}function Cg(a,e){var c=b.balls[a];return 1<e?g.log(1/e,c.bounceKoefDC).trunc().toNumber():0}function Nc(a,e){return b.tubes[a].amplifierDC.mul(b.gravity/Oc).mul(e).div(100).mul(b.balls[a].weight).mul(b.reset.densityMult).mul(b.reset.totalMult).mul(b.premium.premiumEnergyMult*
b.events.eventEnergyMult*b.boost.energyMult*b.boost.densityMult)}function Wa(){for(var a=0;6>a;a++)Ag(a,b.tubes[a].height)}function Dg(){for(var a=0;6>a;a++)if(0!=b.balls[a].v||1<b.balls[a].height-b.balls[a].r)return!0;return!1}function Ld(a){return b.balls[a].heightTotalDC}function fe(a){return b.tubes[a].ballSizeMax}function Eg(a){return fe(a)<=b.balls[a].r}function Fg(a){return fe(a)-b.balls[a].r}function Pc(a,e){return O(b.energyDC,b.balls[a].r,e,Fg(a),b.balls[a].sizeUpgPriceDC,100,zg)}function ge(a,
e){var c=Pc(a,e);return 1>=c?new g(b.balls[a].sizeUpgPriceDC):E(b.balls[a].sizeUpgPriceDC,100,c)}function Gg(a,e){if(!b.tubes[a].active)return!1;var c=Pc(a,e);return!Eg(a)&&0<c&&Fg(a)>=c&&Ob(b.energyDC,e).gte(ge(a,e))}function he(a,e,c){"undefined"===typeof c&&(c=1);var d=0<c&&1!=c;d&&(b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.mul(c));if(0==c||Gg(a,e)){var f=Pc(a,e);0<c&&R(ge(a,e).neg());b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.mul(g.pow(100,f));e=1+f/b.balls[a].r;b.balls[a].weight=
b.balls[a].weight*e*e*e;b.balls[a].r+=f;ee(a)}d&&(b.balls[a].sizeUpgPriceDC=b.balls[a].sizeUpgPriceDC.div(c))}function kg(a){B();he(a,l());C("upgrade")}function Qc(a,e){return O(b.energyDC,b.balls[a].bounceCnt,e,0,b.balls[a].bounceUpgPriceDC,1.03,Nj)}function ie(a,e){var c=Qc(a,e);return 1>=c?new g(b.balls[a].bounceUpgPriceDC):E(b.balls[a].bounceUpgPriceDC,1.03,c)}function Hg(a,e){return b.tubes[a].active?0<Qc(a,e)&&Ob(b.energyDC,e).gte(ie(a,e)):!1}function je(a,e,c){"undefined"===typeof c&&(c=1);
var d=0<c&&1!=c;d&&(b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(c));if(0==c||Hg(a,e)){var f=Qc(a,e);0<c&&R(ie(a,e).neg());b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(g.pow(1.03,f));b.balls[a].bounceCnt+=f;b.balls[a].bounceKoefDC=ce(b.balls[a].bounceCnt)}d&&(b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.div(c))}function jg(a){B();je(a,l());C("upgrade")}function Ue(){Ca=Ua=ma=!1;m={posX:0,posY:0,size:wb,fontSize:Rc,opacity:0,valueDC:new g(0)};Nd||ke||(ke=!0,
qb=new Image,qb.onload=function(){Nd=!0;ke=!1},qb.src="imgs/bubble-anim.png")}function Ig(a,b){var c=Math.floor(m.size/2);m.posX=a-c;m.posY=b-c;m.centerX=a;m.centerY=b}function Q(){b.gravity=Oc*b.reset.gravityMult*b.premium.premiumGravityMult*b.events.eventGravityMult*b.boost.gravityMult}function Te(){b.energyDC=new g(0);b.energyMaxDC=new g(100);b.energyLevelDC=new g(0);b.energyUpgPrice=b.achievementsMult[P.achEnergyStorage];b.energyExtRemain=0}function R(a){a=new g(a);b.energyMaxDC.isFinite()||(b.energyMaxDC=
new g(100));b.energyDC.isFinite()||(b.energyDC=new g(b.energyMaxDC));a.isFinite()||(a=new g(b.energyMaxDC));if(a.gt(0)){var e=a;ha()&&(b.idleEnergyDC=b.idleEnergyDC.add(e))}var e=b.energyDC.add(a),c=new g(0);if(e.gt(b.energyMaxDC)&&(c=e.sub(b.energyMaxDC),e=new g(b.energyMaxDC),0<b.reset.energyExtLevel)){var c=c.add(b.energyExtRemain),d=b.energyUpgPrice/b.reset.energyExtCapacityMult,f=1+d,u=c.div(f).trunc();b.energyMaxDC=b.energyMaxDC.add(u);e=new g(b.energyMaxDC);6>b.energyMaxDC.e?(b.energyExtRemain=
c.sub(u.mul(f)).toNumber(),b.energyExtRemain>=d&&(b.energyMaxDC=b.energyMaxDC.add(1),e=e.add(b.energyExtRemain-d),b.energyExtRemain=0)):b.energyExtRemain=0}a.gt(0)&&(b.statistics.energyDC=b.statistics.energyDC.add(e).sub(b.energyDC));b.energyDC=new g(e);a.lt(0)&&(b.achievementStatsDC[P.achEnergyStorage]=b.achievementStatsDC[P.achEnergyStorage].sub(a));b.statistics.energyDC.gt(0)&&(a=g.log10(g.div(b.statistics.energyDC,nf)).toNumber()-b.reset.inactiveTotal,0<a&&(b.reset.inactive=a))}function Sc(a){var e=
new g(0);if("object"===typeof a&&a.step){var c=a.rel,d=a.step;b.energyLevelDC.gt(bf)&&(d=1,-1==c&&(c=0));if(1==c)e=b.energyDC.div(b.energyUpgPrice).trunc(),e.mul(b.energyUpgPrice).gt(b.energyDC)&&(e=e.mul(.999999).trunc());else if(0<c)e=b.energyDC.mul(c).div(b.energyUpgPrice).trunc();else if(0==c)return new g(d);a=b.energyLevelDC;e=-1==c?new g(d):e;c=d;1==c?a=new g(e):(e=g.add(a,e).div(c).trunc().mul(c),a=e.gt(a)?g.sub(e,a):new g(0));return a}return new g(a)}function le(a){return g.max(1,Sc(a)).mul(b.energyUpgPrice)}
function me(a){a=Sc(a);var e=le(a);return a.gt(0)&&e.gt(0)&&b.energyDC.gte(e)}function Jg(a){if(me(a)){var e=Sc(a);b.energyLevelDC=b.energyLevelDC.add(e);b.energyMaxDC=b.energyMaxDC.add(e);R(le(a).neg())}}function Sd(a){B();Jg(a);C("upgrade")}function Kd(a){var e=new g(0);if(b.tubes[a].active){var c=b.balls[a].height-b.balls[a].r;1<c&&(e=Nc(a,c).div(Math.sqrt(8*c/b.gravity)))}return e}function Jd(){for(var a=new g(zd()),b=0;6>b;b++)a=a.add(Kd(b));return a}function ne(){oe=!0}function Ve(){b.idleEnergyDC=
new g(0);b.idleEnergyBonusDC=new g(0);b.idleEnergyTransferSpeedDC=new g(0);B()}function na(){Xa()||Ve()}function B(){ha()&&(b.idleEnergyBonusDC=b.idleEnergyDC.mul(pe()),b.idleEnergyTransferSpeedDC=b.idleEnergyBonusDC.div(Oj),b.idleEnergyDC=new g(0));b.idleEnergyTimer=-Ad}function Ya(){return b.reset.idleMult*b.premium.premiumIdleMult*b.events.eventIdleMult*b.boost.idleMult}function qe(){return(b.reset.idleMultTime+b.boost.idleTimeInc)*b.premium.premiumIdleMultTime*b.events.eventIdleMultTime}function Xa(){return 1<
Ya()}function re(){return Xa()&&0>b.idleEnergyTimer?-b.idleEnergyTimer:1E300}function Kg(){var a=re();return 0<a&&a<=Pj}function ha(){return Xa()&&0<=b.idleEnergyTimer}function Qj(){return g.pow(Ya(),qe()).sub(1)}function pe(){return ha()?g.pow(Ya(),Math.min(qe(),(ha()?b.idleEnergyTimer:0)/3600)).sub(1):new g(0)}function Re(a){if(a)for(b.tubeInfo="percent",b.tubeImprLevelMax=0,b.tubeImprovesMax=[],a=0;6>a;a++)b.tubeImprovesMax[a]=0;xa=0;b.tubes=[];Y=[];D=[];xb=[];yb=[];for(a=0;6>a;a++)Lg(a,0==a,0);
md();se(2E3);b.balls=[];for(a=0;6>a;a++)yg(a);b.balls[0].active=!0;nd();if(!ae&&!be)for(be=!0,a=0;6>a;a++)Tc[a]=new Image,$d[a]=!1,Lj(Tc[a],a),Tc[a].src="imgs/classicballs/ball"+(a+1)+".png"}function mb(a){return 0==a?new g(1):g.pow(10,6>a?5+(10+5*(a-2))*(a-1)/2:Math.floor(55+(50+.2*(a-6))*(a-5)/2))}function Lg(a,e,c){var d=a+6*c,f=mb(d),u=f.mul(10),h=36+10*d,k=new g(u);if(3<a||0<c)k=vc[a][c]?k.mul(vc[a][c]):k.mul(2E4).mul(g.exp(.5*Math.pow(d-12,.808)));var q=50+10*d,m=new g(k);if(0<c){for(var l=
h,n=1;6>n;n++)l+=36+10*(d+n);d=Math.floor((ra-13-53)/(Mg/l));l=k.mul(g.pow(1.15,10999));n=m.mul(g.pow(1.1,d-q));l.lt(n)&&(q=Math.max(q,d-Math.floor(g.ln(l.div(m)).toNumber()/Ng)))}b.tubes[a]={active:e,improvementLevel:c,improvePriceDC:mb(a+6*(c+1)).mul(10),width:h,ballSizeMax:h/2-3,height:q,heightUpgPriceDC:m,amplifierLevel:1,amplifierDC:new g(f),amplifierUpgPriceDC:new g(k),amplifierIncDC:new g(f)};xb[a]=new g(u);yb[a]=!1}function Ye(){for(var a=xa=0;6>a;a++)xa<b.tubes[a].improvementLevel&&(xa=b.tubes[a].improvementLevel)}
function se(a){if(a>Ha){0==Ha&&(zb[1]={multDC:new g(b.tubes[0].amplifierDC),incDC:new g(b.tubes[0].amplifierIncDC)},Ha=1);for(var e,c=new g(zb[Ha].multDC),d=new g(zb[Ha].incDC),f=Ha+1;f<=a;f++){c=c.add(d);if(0==f%ia[0].level)for(var u=Og;0<=u;u--)if(e=ia[u],0==f%e.level){c=c.mul(e.mult);d=d.mul(e.mult);break}zb[f]={multDC:new g(c),incDC:new g(d)}}Ha=a}return zb[a]}function md(){var a,e=!1,c=0;for(a=0;6>a;a++)c+=b.tubes[a].width,0<b.tubes[a].improvementLevel&&(e=!0);ua=e?Mg/c:1;Za=Math.floor((ra-13-
53)/ua);for(a=0;6>a;a++)e=Za-b.tubes[a].height,0>e?Uc(a,e):Pg(a)}function Pg(a){D[a]={width:b.tubes[a].width*ua,height:b.tubes[a].height*ua};D[a].x=0==a?1:D[a-1].right+6;D[a].bottom=ra-13;D[a].y=D[a].bottom-D[a].height;D[a].right=D[a].x+D[a].width;Y[a]={x:D[a].x+D[a].width/2,y:D[a].bottom}}function Rj(a){return xb[a]}function Vc(a){return xb[a].lte(b.energyDC)}function te(a){var e=b.tubes[a];!e.active&&Vc(a)&&(e.active=!0,b.balls[a].active=!0,R(xb[a].neg()),Na(),x("Buy","Game","Tube"+a))}function Wc(a){return b.tubes[a].improvePriceDC}
function Ab(a){return Wc(a).lte(b.energyDC)}function Xc(a){return 0<b.tubes[a].improvementLevel&&10>xa-b.tubes[a].improvementLevel}function ue(a,e){if(e&&Xc(a)||Ab(a)){var c;e||R(Wc(a).neg());var d=b.tubes[a].improvementLevel+(e?-1:1);Lg(a,!0,d);yg(a);b.abilities[a].energyMultDC=new g(1);Wd(a);md();Na();b.isAnyTubeImproved||(ve=b.isAnyTubeImproved=!0);d>b.tubeImprLevelMax&&(b.abilitiesFreeRefundCnt+=d-b.tubeImprLevelMax,b.tubeImprLevelMax=d,b.statistics.improvementMax=d+1);d>b.tubeImprovesMax[a]&&
(b.abilities[a].points+=d-b.tubeImprovesMax[a],b.tubeImprovesMax[a]=d);if(d>xa){xa=d;var f;for(c=0;6>c;c++)for(f=!0;f&&c!=a&&10<xa-b.tubes[c].improvementLevel;)b.tubes[c].active?Ab(c)?ue(c,!1):f=!1:Vc(c)?te(c):f=!1}else e&&Ye();c=a+6*d;b.virtTubeIdMax<c&&(b.virtTubeIdMax=c,0==a&&x("Improve","Game","VirtualTube"+c))}}function Sj(a){b.showAmplifierLevelAsMult=a}function Qg(a){return b.tubes[a].amplifierLevel}function $a(a,e){return O(b.energyDC,Qg(a),e,0,b.tubes[a].amplifierUpgPriceDC,1.15,Tj)}function we(a,
e){var c=$a(a,e);return 1>=c?new g(b.tubes[a].amplifierUpgPriceDC):E(b.tubes[a].amplifierUpgPriceDC,1.15,c)}function Rg(a,e){return b.tubes[a].active?0<$a(a,e)&&Ob(b.energyDC,e).gte(we(a,e)):!1}function Uj(){return ia[0].level}function Vj(a){return b.tubes[a].amplifierLevel%ia[0].level}function Wj(a){var e=ia[0].mult;a=Math.ceil((b.tubes[a].amplifierLevel+1)/ia[0].level)*ia[0].level;for(var c=Og;0<c;c--)if(0==a%ia[c].level){e=ia[c].mult;break}return e}function xe(a,e){var c=new g(b.tubes[a].amplifierDC),
d=new g(b.tubes[a].amplifierIncDC);if(0<e)var f=b.tubes[a].amplifierLevel,u=f+e,f=se(f),u=se(u),c=c.div(f.multDC).mul(u.multDC),d=d.div(f.incDC).mul(u.incDC);return{amplDC:c,incDC:d}}function Yc(a,e,c){"undefined"===typeof c&&(c=1);var d=0<c&&1!=c;d&&(b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.mul(c));if(0==c||Rg(a,e)){e=$a(a,e);0<c&&R(we(a,e).neg());b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.mul(g.pow(1.15,e));var f=xe(a,e);b.tubes[a].amplifierDC=f.amplDC;b.tubes[a].amplifierIncDC=
f.incDC;b.tubes[a].amplifierLevel+=e}d&&(b.tubes[a].amplifierUpgPriceDC=b.tubes[a].amplifierUpgPriceDC.div(c))}function ig(a){B();Yc(a,l());C("upgrade")}function Zc(a,e){return O(b.energyDC,b.tubes[a].height,e,Za-b.tubes[a].height,b.tubes[a].heightUpgPriceDC,1.1,Ng)}function ye(a,e){var c=Zc(a,e);return 1>=c?new g(b.tubes[a].heightUpgPriceDC):E(b.tubes[a].heightUpgPriceDC,1.1,c)}function Sg(a){return Za<=b.tubes[a].height}function Tg(a,e){if(!b.tubes[a].active)return!1;var c=Zc(a,e);return!Sg(a)&&
0<c&&Za-b.tubes[a].height>=c&&Ob(b.energyDC,e).gte(ye(a,e))}function Uc(a,e,c){"undefined"===typeof c&&(c=1);var d=0<c&&1!=c;d&&(b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.mul(c));if(0==c||0>e||Tg(a,e))e=0>e?e:Zc(a,e),0<c&&0<e&&R(ye(a,e).neg()),b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.mul(g.pow(1.1,e)),b.tubes[a].height+=e,Pg(a),Na();d&&(b.tubes[a].heightUpgPriceDC=b.tubes[a].heightUpgPriceDC.div(c))}function lg(a){B();Uc(a,l());C("upgrade")}function Xj(){return!1}function Zh(){var a=
this;a.adsUrl="https://r.almostidle.com/";a.storageClientId="AiAdsClientId";a.clientId=0;a.adId=0;a.adlId=0;a.getAdIntervalMsec=1E4;a.checkStatusIntervalMsec=1E3;a.adStatus="";a.cbStatusChanged=null;a.getAdlId=function(){return a.adlId};a.isAdAvailable=function(){return 0<a.adId};a.getAdId=function(){var b=function(b,e,f){if(f){if(0==a.clientId||a.clientId!=f.cid)a.clientId=f.cid,window.localStorage[a.storageClientId]=a.clientId;a.adId=f.aid;a.adlId=f.adlid}else a.adId=0;0==a.adId&&setTimeout(a.getAdId,
a.getAdIntervalMsec)};a.isAdAvailable()||qg(a.adsUrl+"get.php?cid="+a.clientId,b)};a.checkAdStatus=function(){var b=function(b,e,f){a.adStatus!=f&&(a.adStatus=f,null!=a.cbStatusChanged&&a.cbStatusChanged(f));"init"==f||"started"==f?setTimeout(a.checkAdStatus,a.checkStatusIntervalMsec):(a.adId=0,a.getAdId())};a.isAdAvailable()&&Ic(a.adsUrl+"info.php?aid="+a.adId,b)};a.init=function(b){a.cbStatusChanged=b;b=window.localStorage[a.storageClientId];"undefined"!==b&&(a.clientId=b);a.getAdId()};a.getAdUrl=
function(){return a.isAdAvailable()?a.adsUrl+"open.php?aid="+a.adId:""};a.openAdUrl=function(){var b=a.getAdUrl();b&&(window.open(b,"_blank"),a.checkAdStatus())}}function dg(a,b,c){b=!1;var d=a.toString()+" "+c;if(200==a&&c)if(0==c.indexOf("error"))d=c.substr(6);else if("load"==Ea||"ok"==c)b=!0;Ea=!1;tb&&(tb(b,b?c:d),tb=null)}function Yj(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}return"undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:
!1}function Ic(a,b,c){var d=Yj();d.onreadystatechange=function(){4==d.readyState&&b(d.status,d.getAllResponseHeaders(),d.responseText)};a+=(-1==a.indexOf("?")?"?":"&")+"rnd="+Math.random();c?(d.open("POST",a),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(c)):(d.open("GET",a),d.send(null))}function qg(a,b,c){Ic(a,function(a,c,g){var h;try{h=JSON.parse(g)}catch(k){h={}}b(a,c,h)},c)}window.location.search&&window.location.search.replace("?","").split("&").reduce(function(a,
b){var c=b.split("=");a[decodeURIComponent(c[0])]=decodeURIComponent(c[1]);return a},{});var H=angular.module("game",["ngAnimate","ngSanitize","ui.bootstrap.m"]),g=new Decimal.clone({precision:10,toExpPos:10,toExpNeg:-7,modulo:Decimal.ROUND_DOWN});H.controller("AbilitiesController",function(){this.isAnyAbilityBought=Xd;this.isAnyAbilityActive=Ba;this.getAbilityPoints=rg;this.getActiveAbilityName=Hj;this.getTotalDropHeightDC=Ld;this.getActiveAbilityHeightMaxDC=Md;this.getActiveAbilityEstTime=xg;this.getActiveAbilityEstTimeStr=
function(a){return hb(xg(a))};this.showTubeAbilityDlg=Ij;this.hideTubeAbilityDlg=Jj;this.isTubeAbilityDlgVisible=hg;this.abilityList=w;this.getAbilityName=function(a){return w[a].name};this.getAbilityLevelMax=function(a){return 0==w[a].levelMax?"":" (max "+w[a].levelMax+")"};this.getSelectedTubeId=Kj;this.isSelectedTubeFirst=function(){return 0==v};this.isSelectedTubeLast=function(){return 5==v};this.getCurrentAbilityPoints=function(){return rg(v)};this.getCurrentAbilityDescr=function(a){var c=v;
return w[a].descFnc(0<b.abilities[c].levels[a].lvl?b.abilities[c].levels[a].effectMultDC:w[a].effectMultDCFnc(1))};this.getCurrentAbilityLevel=function(a){return b.abilities[v].levels[a].lvl};this.getCurrentAbilityLevelMax=function(a){return b.abilities[v].levels[a].lvlMax};this.getCurrentAbilityHeightDC=function(a){return b.abilities[v].levels[a].heightDC};this.abilExampleVisible=!1;this.setAbilityExampleVisible=function(a){this.abilExampleVisible=a};this.isAbilityExampleVisible=function(){return this.abilExampleVisible};
this.abilDescVisible={};for(var a in w)w.hasOwnProperty(a)&&(this.abilDescVisible[a]=!1);this.toggleAbilityDescrVisible=function(a){this.abilDescVisible[a]=!this.abilDescVisible[a]};this.isAbilityDescrVisible=function(a){return this.abilDescVisible[a]};this.getCurrentVisualAbilityEffectMultDC=function(a){return w[a].visualiseEffectFnc(b.abilities[v].levels[a].effectMultDC)};this.getCurrentAbilityLevelUpgradeInc=function(a){return Va(v,a,l())};this.getCurrentVisualAbilityEffectMultUpgradeIncDC=function(a){var c;
c=v;var d=l();c=(d=Va(c,a,d))?w[a].effectMultDCFnc(b.abilities[c].levels[a].lvlMax+d).sub(b.abilities[c].levels[a].effectMultDC):new g(0);a=w[a].visualiseEffectFnc(c);return c.lt(0)?a:"+"+a};this.getCurrentAbilityHeightUpgradeIncDC=function(a){var c=v,d=l();return(d=Va(c,a,d))?w[a].heightDCFnc(b.abilities[c].levels[a].lvlMax+d).sub(b.abilities[c].levels[a].heightDC):new g(0)};this.getCurrentAbilityUpgradePrice=function(a){return Yd(v,a,l())};this.isCurrentAbilityCanBeBought=function(a){return b.tubeImprovesMax[v]>=
w[a].imprLvlMin};this.isCurrentAbilityHidden=function(a){return b.tubeImprovesMax[v]<=w[a].imprLvlMin-2};this.isCurrentAbilityUpgradeable=function(a){return ug(v,a,l())};this.upgradeCurrentAbility=function(a){B();var c=v,d=l();ug(c,a,d)&&(d=Va(c,a,d),b.abilities[c].points-=Yd(c,a,d),b.abilities[c].levels[a].lvlMax+=d,vg(c,a,b.abilities[c].levels[a].lvlMax),b.abilities[c].levels[a].ptsPrice*=Math.pow(w[a].ptsPriceRate,d),b.isAnyAbilityBought=!0,x("Tube","Upgrade",a+c,b.abilities[c].levels[a].lvlMax));
C("upgrade")};this.isCurrentAbilityAvailable=function(a){return 0<b.abilities[v].levels[a].lvl};this.isCurrentAbilityLevelMax=function(a){var c=v;return 0==b.abilities[c].levels[a].lvlMax||b.abilities[c].levels[a].lvl==b.abilities[c].levels[a].lvlMax};this.isCurrentAbilityLevelCap=function(a){return tg(v,a)};this.isAbilityLevelChangeable=function(a){return w[a].allowChangeLevel};this.setCurrentAbilityLevel=function(a,b){vg(v,a,b)};this.isCurrentAbilityActive=function(a){return-1!=b.abilities[v].queue.indexOf(a)};
this.isCurrentAbilityActiveByQueueIdx=function(a){return a==b.abilities[v].currentAbility};this.addCurrentAbilityToQueue=function(a){B();var c=v;b.abilities[c].queue[Math.min(b.abilities[c].queueSizeMax-1,b.abilities[c].queue.length)]=a};this.removeCurrentAbilityFromQueue=function(a){B();wg(v,a)};this.changeCurrentAbilityPosInQueue=function(a,c){B();var d=v,f=b.abilities[d].queue[a],g=b.abilities[d].currentAbility;g==a&&(g+=c);wg(d,a);b.abilities[d].queue.splice(a+c,0,f);b.abilities[d].currentAbility=
g};this.getQueue=function(){return b.abilities[v].queue};this.getCurrentQueueSize=function(){return b.abilities[v].queue.length};this.getCurrentQueueSizeMax=function(){return b.abilities[v].queueSizeMax}});H.controller("AchievementsController",function(){this.achievementList=X;this.achievementsLevel=function(){return b.achievementsLevel};this.achievementsMult=function(){return b.achievementsMult};this.achievementStatsDC=function(){return b.achievementStatsDC};this.getAchievementReq=function(a){return af(X[a],
"reqValueDC",b.achievementsLevel[a]).toString()};this.isAchievementLevelCap=function(a){return 0<X[a].levelMax&&X[a].levelMax==b.achievementsLevel[a]}});H.controller("BoostDailyController",function(){this.isDlgVisible=function(){return Gb};this.hideDlg=Mh;this.applyAndHideDlg=Nh;this.getDaysPlayedInRow=Le;this.getBoostType=Oh;this.isGemsReward=function(){return b.boost.daily.generatedDailyBoost==Fb};this.getGemsValue=function(){return b.boost.daily.generatedDailyValue};this.getBoostValue=function(){return 100*
b.boost.daily.generatedDailyValue};this.getBoostDayMult=fd;this.getBoostTotalValue=function(){return 100*b.boost.daily.generatedDailyValue*fd()};this.getBoostDuration=function(){return b.boost.daily.generatedDailyTime+" hour"+(1<b.boost.daily.generatedDailyTime?"s":"")};this.showPremiumConfirmDialog=df;this.getRewardButtonText=function(){return gd()&&!this.isGemsReward()?"Replace current reward with new one":"Get reward"}});H.controller("BuyAmountController",function(){this.buyAmountStepList=vb;this.buyAmountRelList=
Lc;this.setBuyAmountValueRel=cd;this.setBuyAmountValueStep=dd;this.getBuyAmountObject=l;this.totalListLen=mg;this.isBuyAmountStepPosRight=ab;this.getBuyAmountStepHotKey=Ah;this.getBuyAmountRelHotKey=Bh;this.hintVisible=!1;this.setHintVisible=function(a){this.hintVisible=a};this.isHintVisible=function(){return this.hintVisible}});H.controller("CloudController",function(){this.isCloudDialogVisible=hj;this.hideCloudDialog=jj;this.isCloudOperationsAllowed=Hc;this.isCloudLoadAllowed=dj;this.isCloudSaveAllowed=
ag;this.getSaveButtonText=function(){var a;a=Qd-(new Date).getTime();a=0<a?a/1E3:0;return 0<a?"Next save to the cloud will be available in "+Math.ceil(a)+" seconds":"&nbsp;Save&nbsp;"};this.saveToCloud=function(){If(!1)};this.isSaveToCloudStarted=Pd;this.isSaveToCloudSuccess=aj;this.isSaveToCloudError=bj;this.isLoadFromCloudStarted=Od;this.isLoadFromCloudSuccess=Jc;this.isLoadFromCloudEmpty=fj;this.isLoadFromCloudError=ej;this.getCloudDataTime=kj;this.getCloudDataEnergyDC=mj;this.loadGameFromCloudData=
function(){ub=!1;eg()}});H.controller("DebugController",function(){this.skipTime=va;this.outsideIdleLoopExecTimeLast=function(){return Ug};this.outsideIdleLoopExecTimeMax=function(){return Vg};this.idleExecTimeLast=function(){return Wg};this.idleExecTimeMax=function(){return Xg};this.execTimeLast=function(){return Ug+Wg};this.execTimeMax=function(){return Vg+Xg};this.addMoney=function(a){};this.addPremium=function(a){};this.addEnergyMax=function(a){};this.saveSizeMax=function(){return Zj};this.savePackedSizeMax=
function(){return ak};this.getAccelerationTime=function(){return 1};this.setAccelerationTime=function(a){};this.getFixAcceleration=function(){return 0};this.setFixAcceleration=function(a){};this.accelerationTimeList=bk;this.dbgFixAccelerationList=ck;this.addDayToDailyReward=function(a){};this.isAutoPlay=function(){return Yg&&!Zg};this.isAutoPlaySimUser=function(){return Yg&&Zg};this.toggleAutoPlay=function(a){};this.getAutoPlayTime=Vi;this.dbgFakeKongregateLogin=Wi;this.dbgFakeKongregateAPIConnectionSuccess=
Xi;this.isCsvReady=function(){return!1};this.onCsvClick=function(){}});H.controller("EventsController",function(){this.eventsEnergyPerc=function(){return Math.floor(100*b.events.eventEnergyMult-100)};this.eventsBouncePerc=function(){return Math.floor(100*b.events.eventBounceMult-100)};this.eventsGravityPerc=function(){return Math.floor(100*b.events.eventGravityMult-100)};this.eventsIdleMultPerc=function(){return Math.floor(100*b.events.eventIdleMult-100)};this.eventsIdleMultTimePerc=function(){return Math.floor(100*
b.events.eventIdleMultTime-100)};this.eventsMetaBonusIncPerc=function(){return Math.floor(100*b.events.eventMetaBonusInc)};this.eventList=rb;this.eventItemList=wa;this.isEventActive=We;this.getEventTitle=$i;this.eventOpen=Zi;this.getEventPage=Yf;this.getEventTime=function(){return rd((rb[Fc].finishTime-(new Date).getTime())/1E3)};this.isEventItemActive=Da;this.getEventItemsCollectedCnt=Zf;this.isAnyEventItem=function(a){return 0<Zf(a)};this.eventItemsExpanded=[!0];this.toggleEventItems=function(a){this.eventItemsExpanded[a]=
!this.eventItemsExpanded[a]};this.getToggleButtonText=function(a){return this.eventItemsExpanded[a]?"-":"+"}});H.controller("GameController",["$scope","$interval","$http",function(a,e,c){Hb();a.kongGameURL="https://www.kongregate.com/games/almostidle/idle-bouncer";a.gameVer="1.3.2.1";a.gameMouseDown=function(a){C("click")};a.gameMouseUp=function(a){wc=0};a.gameKeyDown=rj;a.gameKeyUp=sj;a.gameKeyPress=tj;a.isThemeCustom=Gi;a.getThemeFile=Hi;a.getThemeImgDir=Ke;a.energyDC=function(){return b.energyDC};
a.energyMaxDC=function(){return b.energyMaxDC};a.energyPercent=function(){return b.energyDC.div(b.energyMaxDC).mul(100).toFixed(2)};a.getEnergyPerSecondDC=Jd;a.getInactiveMetaEnergy=function(){return b.reset.inactive};a.getBgClass=function(){return"bg-"+b.bgStyle};a.visualScale=function(){return ua};a.hideSpikes=function(){return lb()};a.isResetSystemDialogVisible=qi;a.hideResetSystemDialog=si;a.processReset=function(){Rb=!1;Qb()&&(B(),Xa()&&b.idleEnergyBonusDC.gt(0)&&(R(b.idleEnergyBonusDC),b.idleEnergyBonusDC=
new g(0)),kf(),b.reset.freeRefundCnt++,0==b.statistics.reset&&x("Reset","ResetSystem","Active",b.reset.active),Re(!1),Te(),Ue(),S=[],qd(),Na());C("upgrade")};a.getTubeInfoType=Vf;a.setTubeInfoType=Ti;a.tubes=function(){return b.tubes};a.balls=function(){return b.balls};a.abilities=function(){return b.abilities};a.isNewAchievementAvailable=function(){return Jb};a.doClickCanvas=function(a){var c=a.offsetX;a=a.offsetY;var e;var h,g=m.size/2;e=c-m.centerX;h=a-m.centerY;ma&&!Ua&&Math.abs(e)<=g&&Math.abs(h)<=
g?(!Ca&&e*e+h*h<=g*g&&(Ua=!0,R(m.valueDC),b.statistics.bubbleClicked++,b.achievementStatsDC[P.achBubbleGrow]=b.achievementStatsDC[P.achBubbleGrow].add(1),C("pop")),e=!0):e=!1;if(!e)for(h=0;6>h;h++)if(e=D[h],b.tubes[h].active&&c>e.x&&c<e.right){Ag(h,(Y[h].y-a)/ua);Wd(h);break}B()};a.isShowOfflineStats=function(){return ld};a.offlineMoneyEarnedDC=function(){return g.max(0,b.energyDC.sub(Mb))};a.offlineTime=function(){return $e(Math.floor(Math.max(0,(new Date).getTime()-Xe)/1E3))};a.hideOfflineStats=
function(){ld=!1};a.showDblOfflineBoostDialog=function(){a.hideOfflineStats();Me("dblOffline")};a.isNewVersion=function(){return Ud};a.reloadGame=bi;a.isBoostDailyGenerated=function(){return!Ud&&b.boost.daily.isDailyBoostGenerated};a.showBoostDailyDlg=Lh;a.isShowEventWelcomeMsg=function(){return Ma};a.showEventWelcomeMsg=function(){Ma=!0};a.hideEventWelcomeMsg=function(){Ma=!1};a.isShowFirstImproveDlg=function(){return ve};a.hideFirstImproveDlg=function(){ve=!1};a.isShowNewBalanceAbilityDlg=function(){return Bd};
a.hideNewBalanceAbilityDlg=function(){Bd=!1};a.isShowIdleModeHelp=function(){return oe};a.showIdleModeHelp=ne;a.hideIdleModeHelp=function(){oe=!1};a.isShowChangeLog=function(){return $g};a.hideChangeLog=function(){$g=!1};a.isSteamVersion=!1;a.isSteamInit=Xj;a.steamName=function(){return dk};a.isKongregateVersion=!0;a.kongregateInfo=function(){return I};a.kongregateShowRegistrationBox=zj;a.isKongregate=wj;a.isKongregateAPI=ca;a.isKongregateUserLoggedIn=$f;a.moneySignHTML='<img src="imgs/kred_single.png" class="premium-crystal-list-item"/>';
a.convertMoney=function(a){return a};a.boostList=L;a.isAdsAvailable=function(){var a=ca();return a&&I.adsAvailable||!a&&(da?da.isAdAvailable():!1)};a.showBoostDialog=Me;a.isBoostDialogVisible=Qh;a.getBoostDialogHeader=Rh;a.getBoostDialogText=Sh;a.getBoostDialogButtonText=Th;a.closeBoostDialog=Uh;a.getBoostBtnTitle=function(a){var c=L[a].title();a=b.boost.timers[a];0<a&&(c+="<br/><small><i>Boost time remain: "+Math.floor(a)+" second"+(1<a?"s":"")+"</i></small>");return c};a.isBoostActive=Fe;a.isTutorialEnabled=
Gd;a.isTutorialPanelActive=Ii;a.isTutorialAnyStepActive=Pa;a.tutorialGetActiveStepText=Ji;a.tutorialShowContinueButton=Ki;a.tutorialOnClickContinue=Ni;a.isTutorialShowShadow=Mi;a.isTutorialStepNameHighlight=Li;a.tutorialFinish=function(){Qf(!0)};a.hideWaitingMsg=Tf;a.isWaitingMsgVisible=Oi;a.getWaitingMsgText=Pi;a.getWaitingMsgInfo=Qi;a.getWaitingMsgTimeRemain=Ri;e(function(){var a;a=(new Date).getTime();var e=Math.max(.001,(a-b.lastUpdateTime)/1E3);c&&86400<e&&(oj(e,c),e=.1);var u;eb&&Ka?(u=La,Ka=
eb=!1,La=0):u=!1;!1!==u&&(e=u);b.lastUpdateTime=a;a=e;e=Math.ceil(a/1);u=100<e?a/100:1;do{u>a&&(u=a);var e=u,h=void 0,h=!1,k=void 0,q=void 0;for(q in L)L.hasOwnProperty(q)&&0<b.boost.timers[q]&&(!h||b.boost.timers[q]<h)&&(h=b.boost.timers[q],k=q);(h=h?{key:k,time:h}:null)&&h.time<u&&(u=h.time);h=re();h<u&&(u=h);for(var h=u,q=k=void 0,l=0;l<Oe;l++)for(;;)if(k=X[l],0==k.levelMax||b.achievementsLevel[l]<k.levelMax)if(q=af(X[l],"reqValueDC",b.achievementsLevel[l]),null!==k.updateStatDCFnc&&(b.achievementStatsDC[l]=
k.updateStatDCFnc()),b.achievementStatsDC[l].gte(q)){b.achievementsMult[l]*=k.mult;b.achievementsLevel[l]++;if(null!==k.onLevelUpFnc)k.onLevelUpFnc();Jb=!0;b.premium.premiumMoney++;W(!0);b.achievementsLevel[l]>=X[l].trackLevel&&x("Get","Achievement",k.name+" "+b.achievementsLevel[l])}else break;else break;k=new Date;q=b.boost.daily.nextDay.y+"."+b.boost.daily.nextDay.m+"."+b.boost.daily.nextDay.d;q in ze||(ze[q]=new Date(b.boost.daily.nextDay.y,b.boost.daily.nextDay.m,b.boost.daily.nextDay.d));k>
ze[q]&&(k=new Date,k.getFullYear()==b.boost.daily.nextDay.y&&k.getMonth()==b.boost.daily.nextDay.m&&k.getDate()==b.boost.daily.nextDay.d?b.boost.daily.daysInRow++:b.boost.daily.daysInRow=1,b.statistics.daysInRowMax<b.boost.daily.daysInRow&&(b.statistics.daysInRowMax=b.boost.daily.daysInRow),k=new Date,k=new Date(k.getFullYear(),k.getMonth(),k.getDate()+1),b.boost.daily.nextDay.d=k.getDate(),b.boost.daily.nextDay.m=k.getMonth(),b.boost.daily.nextDay.y=k.getFullYear(),b.boost.daily.isDailyBoostGenerated=
!1,cb(!1,!1,!1));R(zd().mul(h));q=void 0;for(k=0;6>k;k++)if(b.balls[k].active){var q=k,p=h,l={bounceCnt:0,bounceEnergyDC:new g(0),totalDropHeightDC:new g(0)},n=b.balls[q],v=new g(0),$c=Ba(q),V=!1,B=!1,y=(-n.v+Math.sqrt(n.v*n.v+2*b.gravity*(n.y-n.r)))/b.gravity;if(y>p){var z=b.gravity*p*p/2+n.v*p;0<z&&$c&&(n.tmpDropHeight+=z,n.heightTotalDC=n.heightTotalDC.add(z));n.y-=z;n.v+=b.gravity*p}else{z=void 0;p-=y;z=n.height-n.r;if(1<z||0<b.abilities[q].autoJumpKoef)1<z&&(l.bounceCnt=1,l.totalDropHeightDC=
new g(z),b.abilities[q].energyMultDC.gt(1)&&(v=l.totalDropHeightDC.mul(b.abilities[q].energyMultDC.sub(1)),b.abilities[q].energyMultDC=new g(1),B=!0)),n.height=n.bounceKoefDC.mul(z).toNumber()+n.r,0<b.abilities[q].autoJumpKoef&&(z=(b.tubes[q].height-2*n.r)*b.abilities[q].autoJumpKoef+n.r,n.height<z&&(n.height=z,b.abilities[q].autoJumpKoef=0,V=!0)),z=n.height-n.r,n.v=-Math.sqrt(2*b.gravity*z);1>=z&&(n.v=0,n.height=n.r,Mc[q]=0);n.y=n.r;Zd(q);z=n.height-n.r;if(1<z){var y=Cg(q,z),t=Math.sqrt(8*z/b.gravity),
r=n.bounceKoefDC.sqrt().toNumber(),oa=Math.floor(sd(p,t,r)),F=!0;if(isNaN(oa)||Infinity==oa||y<oa)oa=y,F=!1;1<=oa&&(F&&(p-=E(t,r,oa).toNumber()),l.bounceCnt+=oa,l.totalDropHeightDC=l.totalDropHeightDC.add(E(z,n.bounceKoefDC,oa)),n.height=g.pow(n.bounceKoefDC,oa).mul(z).toNumber()+n.r,n.v=-Math.sqrt(2*b.gravity*(n.height-n.r)));F?(n.y-=b.gravity*p*p/2+n.v*p,n.v+=b.gravity*p):(n.v=0,n.height=n.r,n.y=n.r)}}ee(q);l.bounceEnergyDC=Nc(q,l.totalDropHeightDC.add(v));$c?l.totalDropHeightDC.gt(0)&&(n.heightTotalDC=
n.heightTotalDC.add(l.totalDropHeightDC).sub(n.tmpDropHeight),n.tmpDropHeight=0):(n.heightTotalDC=new g(0),n.tmpDropHeight=0);1==l.bounceCnt&&(b.showBounceEnergy&&(v=n=p=void 0,0==q?(p=D[q].x,n="left",v=15*Math.random()):5==q?(p=D[q].right,n="right",v=15*-Math.random()):(p=Y[q].x,n="center",v=30*Math.random()-15),$c=J(l.bounceEnergyDC,2,1),z=T().bounceTextColorRGBA.slice(),y=T().bounceTextShadow,S.push({type:"text",text:$c,x:p,y:Y[q].y,font:B?"bold 24px Arial":"bold 12px Arial",isFillText:!0,fillStrokeStyle:z||
[0,0,0,1],hAlign:n||"start",vAlign:"bottom",shadowColor:y||"#fff",shadowOffsX:1,shadowOffsY:1,shadowBlur:2,vx:v||0,vy:-70,ax:0,ay:-100,vAlpha:0,aAlpha:-2,time:1,callback:void 0})),C("bounce"),B=b.abilities[q].preventWeakBubbleKoef,ma||(p=g.mul(l.bounceEnergyDC,b.reset.bubbleCapMult*b.boost.bubbleCapMult),(0==B||p.gte(Jd().mul(B)))&&Math.random()<b.reset.bubbleProb+b.boost.bubbleProbInc&&(ma=!0,Ca=Ua=!1,m.opacity=0,m.size=wb,m.fontSize=Rc,m.valueDC=p,m.v=ek,m.hv=0,Ig(ad+Math.random()*fk,ah),m.startY=
ah,m.hrzAccFluct=gk,m.hrzAccFluctSpeed=hk,b.statistics.bubble++)));!V||0!=l.bounceCnt&&1!=l.bounceCnt||(pb[q]=!0);q=l;0<q.bounceCnt&&(R(q.bounceEnergyDC),b.statistics.bounce+=q.bounceCnt,b.achievementStatsDC[P.achBouncer]=b.achievementStatsDC[P.achBouncer].add(q.bounceCnt))}V=l=q=k=void 0;for(k=0;6>k;k++)if(Ba(k)&&(q=b.abilities[k],l=b.balls[k],V=q.queue[q.currentAbility],l.heightTotalDC.gte(q.levels[V].heightDC)&&(l.heightTotalDC.gt(q.levels[V].heightDC.mul(2*q.queueSizeMax))?l.heightTotalDC=l.heightTotalDC.mod(q.levels[V].heightDC):
l.heightTotalDC=l.heightTotalDC.sub(q.levels[V].heightDC),w[V].onActivateFnc(k,q.levels[V].effectMultDC),q.currentAbility=(q.currentAbility+1)%b.abilities[k].queue.length,Zd(k),q=k,b.showAbilityEffects))){for(l=D[q].x;l<D[q].right;l+=2)V=T().abilityProgressColorRGBA.slice(),S.push({type:"rect",isStroke:!1,x:l,y:D[q].bottom-1-Xf,width:Dc,height:Dc,color:V||[0,0,0,1],vx:60*Math.random()-30||0,vy:-100*Math.random()-50||0,ax:0,ay:150,vAlpha:0,aAlpha:-.5,time:2,callback:void 0});C("ability")}q=k=void 0;
for(q in S)if(S.hasOwnProperty(q))if(k=S[q],k.time<=h)k.callback&&k.callback(),S.splice(q,1);else{k.time-=h;k.x+=k.vx*h+k.ax*h*h/2;k.vx+=k.ax*h;k.y+=k.vy*h+k.ay*h*h/2;k.vy+=k.ay*h;var A;"text"==k.type?A=k.fillStrokeStyle[3]:"img"==k.type?A=k.opacity:"rect"==k.type&&(A=k.color[3]);A+=k.vAlpha*h+k.aAlpha*h*h/2;k.vAlpha+=k.aAlpha*h;A=Math.min(1,Math.max(0,A));"text"==k.type?k.fillStrokeStyle[3]=A:"img"==k.type?k.opacity=A:"rect"==k.type&&(k.color[3]=A)}k=void 0;for(k in L)L.hasOwnProperty(k)&&0<b.boost.timers[k]&&
(b.boost.timers[k]=Math.max(0,b.boost.timers[k]-h),He(k));if(ma)if(Ca)0<m.opacity&&(m.opacity=Math.max(0,m.opacity-ik*h)),0==m.opacity&&(ma=!1);else if(Ua)m.fontSize+=jk*h,0<m.opacity&&(m.opacity=Math.max(0,m.opacity-kk*h)),0==m.opacity&&(ma=!1);else if(!lb()&&m.posY<=Ae)Ca=!0,C("pop");else if(lb()&&m.posY+m.size<=Ae)ma=!1;else{k=h*h/2;m.hrzAccFluct+=m.hrzAccFluctSpeed*h+bh*k;m.hrzAccFluctSpeed+=bh*h;q=m.hrzAccFluct*(Math.random()-.5);Ig(m.centerX+m.hv*h+q*k,m.centerY-m.v*h-ch*k);m.v+=ch*h;m.hv+=
q*h;k=Math.max(0,m.centerY-lk)/m.startY;m.size=Be-k*mk;m.fontSize=dh-k*nk;if(m.posX+m.size>ok&&0<m.hv||m.posX<pk&&0>m.hv)m.hv=-m.hv;1>m.opacity&&(m.opacity=Math.min(1,m.opacity+qk*h));m.valueDC=m.valueDC.add(m.valueDC.mul(rk).mul(b.achievementsMult[P.achBubbleGrow]).mul(h))}Xa()&&(b.idleEnergyTimer+=h,!ha()&&b.idleEnergyBonusDC.gt(0)&&(Bb+=h,Bb>=sk&&(h=g.min(b.idleEnergyBonusDC,b.idleEnergyTransferSpeedDC.mul(Bb)),b.idleEnergyBonusDC=b.idleEnergyBonusDC.sub(h),R(h),Bb=0)));h=(new Date).getTime();
0<Ce&&(b.statistics.time+=Math.max(0,h-Ce));Ce=h;Eb();W(!1);ca()&&(h=(new Date).getTime(),h>eh&&(N.stats.submit("Energy",og(b.statistics.energyDC)),N.stats.submit("Bounces",pg(b.statistics.bounce)),N.stats.submit("BubblesClicked",pg(b.statistics.bubbleClicked)),eh=h+tk));qd();Fi()&&(b.musicEnabled?-1!=Ia&&G[ja].playing||(Ia=(Ia+1)%Kf,ja="music"+Ia,C(ja)):-1<Ia&&(ja&&G[ja].playing&&(G[ja].audio.pause(),G[ja].audio.currentTime=0,G[ja].playing=!1),ja="",Ia=-1));a-=u;u=e}while(0<a)},20);a.isDebugEnabled=
!1;a.init=1}]);H.controller("IdleEnergyController",function(){this.isIdleEnergyAvailable=Xa;this.showIdleTimer=function(){return Kg()||ha()};this.getIdleTimerHtml=function(){return Kg()?'<span class="glyphicon glyphicon-hourglass"></span>'+hb(re()):ha()?'<span class="glyphicon glyphicon-time"></span>'+hb(ha()?b.idleEnergyTimer:0):""};this.showIdleEnergy=function(){return ha()||b.idleEnergyBonusDC.gt(0)};this.getIdleEnergyHtml=function(){return ha()?'Idle <span class="glyphicon glyphicon-flash"></span><b>'+
J(b.idleEnergyDC.mul(pe()),1,1)+'</b> (<span class="glyphicon glyphicon-flash"></span>'+J(b.idleEnergyDC,1,1)+" &times; "+J(pe(),2,1)+")":b.idleEnergyBonusDC.gt(0)?'<span class="glyphicon glyphicon-arrow-up"></span> <span class="glyphicon glyphicon-flash"></span><b>'+J(b.idleEnergyBonusDC,1,1)+'</b> <span class="glyphicon glyphicon-arrow-up"></span>':""}});H.controller("PremiumController",function(){this.premiumMoney=function(){return b.premium.premiumMoney};this.premiumEnergyMult=function(){return b.premium.premiumEnergyMult};
this.premiumBounceMult=function(){return b.premium.premiumBounceMult};this.premiumEnergyPerc=function(){return Math.floor(100*(b.premium.premiumEnergyMult-1))};this.premiumBouncePerc=function(){return Math.floor(100*(b.premium.premiumBounceMult-1))};this.premiumGravityPerc=function(){return Math.floor(100*(b.premium.premiumGravityMult-1))};this.premiumIdleMultPerc=function(){return Math.floor(100*(b.premium.premiumIdleMult-1))};this.premiumIdleMultTimePerc=function(){return Math.floor(100*(b.premium.premiumIdleMultTime-
1))};this.premiumEnergyGeneratorStr=function(){var a="+"+b.premium.premiumEnergyGeneratorInc;b.premium.premiumEnergyGeneratorInc&&(a+=" tube");1<b.premium.premiumEnergyGeneratorInc&&(a+="s");return a};this.isPremiumPackAvailable=wd;this.isAnyPremiumSpecialPackAvailable=fi;this.isPremiumPackTimeLimited=function(a){return!1!==vd(a)};this.getPremiumPackTimeRemain=function(a){return rd(vd(a))};this.premiumPackList=K;this.showPremiumDialog=ci;this.hidePremiumDialog=di;this.isPremiumDialogVisible=ei;this.buyPremiumPack=
cf;this.buyPremiumPackFromEventMsg=function(a){Ma=!1;cf(a)};this.premiumItemList=ka;this.showPremiumConfirmDialog=df;this.hidePremiumConfirmDialog=hi;this.clickYesPremiumConfirmDialog=function(){Pb=!1;ef()?ff():kb=!0};this.isPremiumConfirmDialogVisible=ii;this.getPremiumSelectedItem=function(){return ka[pa]};this.canBuyPremiumSelectedItem=ef;this.premiumMoneyToBuySelectedItem=function(){return!1===pa?0:this.getPremiumSelectedItem().price-b.premium.premiumMoney};this.buyPremiumSelectedItem=ff});H.controller("ResetController",
function(){this.getActive=function(){return b.reset.active};this.canProcessReset=Qb;this.showResetSystemDialog=ri;this.getEnergyToStartAccumulateMetaDC=pi;this.isShowEnergyRemain=function(){return b.reset.inactive<mf};this.getBonusMult=lf;this.getTotalBonusMultPerc=function(){return 100*(b.reset.totalMult-1)};this.getResetCnt=function(){return b.statistics.reset};this.isAnyResetUpgradeBought=Sb;this.getResetEnergyExtLevel=Tb;this.getEnergyExtCapacityMult=function(){return 100*b.reset.energyExtCapacityMult};
this.getResetEnergyExtUpgradeInc=function(){var a=l(),a=dc(a);return 100*(b.reset.energyExtCapacityMult*Math.pow(fh,a)-b.reset.energyExtCapacityMult)};this.getResetEnergyExtUpgradePrice=function(){return Ub(l())};this.isResetEnergyExtUpgradeable=function(){return pf(l())};this.upgradeResetEnergyExt=function(){B();C("upgrade");var a=l();if(pf(a)){var e=dc(a);fa(Ub(a));b.reset.energyExtLevel+=e;b.reset.energyExtUpgPrice*=Math.pow(ec,e);b.reset.energyExtCapacityMult*=Math.pow(fh,e);x("Upgrade","ResetSystem",
"Extender",b.reset.energyExtLevel)}};this.getBounceMult=function(){return b.reset.bounceMult};this.getResetBounceUpgradeInc=function(){var a=l(),a=fc(a);return b.reset.bounceMult*Math.pow(gh,a)-b.reset.bounceMult};this.getResetBounceUpgradePrice=function(){return Vb(l())};this.isResetBounceUpgradeable=function(){return qf(l())};this.upgradeResetBounce=function(){B();C("upgrade");var a=l();if(qf(a)){var e=fc(a);fa(Vb(a));b.reset.bounceLevel+=e;b.reset.bounceUpgPrice*=Math.pow(gc,e);b.reset.bounceMult*=
Math.pow(gh,e);M();x("Upgrade","ResetSystem","Bounce",b.reset.bounceLevel)}};this.getDensityMult=function(){return b.reset.densityMult};this.getResetDensityUpgradeInc=function(){var a=l(),a=hc(a);return b.reset.densityMult*Math.pow(hh,a)-b.reset.densityMult};this.getResetDensityUpgradePrice=function(){return Wb(l())};this.isResetDensityUpgradeable=function(){return rf(l())};this.upgradeResetDensity=function(){B();C("upgrade");var a=l();if(rf(a)){var e=hc(a);fa(Wb(a));b.reset.densityLevel+=e;b.reset.densityUpgPrice*=
Math.pow(ic,e);b.reset.densityMult*=Math.pow(hh,e);x("Upgrade","ResetSystem","Density",b.reset.densityLevel)}};this.getGravityMult=function(){return b.reset.gravityMult};this.getResetGravityUpgradeInc=function(){var a=l(),a=jc(a);return 100*(b.reset.gravityMult*Math.pow(ih,a)-b.reset.gravityMult)};this.getResetGravityUpgradePrice=function(){return Xb(l())};this.isResetGravityUpgradeable=function(){return sf(l())};this.upgradeResetGravity=function(){B();C("upgrade");var a=l();if(sf(a)){var e=jc(a);
fa(Xb(a));b.reset.gravityLevel+=e;b.reset.gravityUpgPrice*=Math.pow(kc,e);b.reset.gravityMult*=Math.pow(ih,e);Q();x("Upgrade","ResetSystem","Gravity",b.reset.gravityLevel)}};this.getBubbleProb=function(){return 100*b.reset.bubbleProb};this.getResetBubbleProbUpgradeInc=function(){var a=l(),a=lc(a);return 100*(b.reset.bubbleProb+jh*a-b.reset.bubbleProb)};this.getResetBubbleProbUpgradePrice=function(){return Yb(l())};this.isResetBubbleProbUpgradeable=function(){return tf(l())};this.upgradeResetBubbleProb=
function(){B();C("upgrade");var a=l();if(tf(a)){var e=lc(a);fa(Yb(a));b.reset.bubbleProbLevel+=e;b.reset.bubbleProbUpgPrice*=Math.pow(mc,e);b.reset.bubbleProb+=jh*e;x("Upgrade","ResetSystem","BubbleProbability",b.reset.bubbleProbLevel)}};this.getBubbleCapMult=function(){return b.reset.bubbleCapMult};this.getResetBubbleCapUpgradeInc=function(){var a=l(),a=nc(a);return b.reset.bubbleCapMult*Math.pow(kh,a)-b.reset.bubbleCapMult};this.getResetBubbleCapUpgradePrice=function(){return Zb(l())};this.isResetBubbleCapUpgradeable=
function(){return uf(l())};this.upgradeResetBubbleCap=function(){B();C("upgrade");var a=l();if(uf(a)){var e=nc(a);fa(Zb(a));b.reset.bubbleCapLevel+=e;b.reset.bubbleCapUpgPrice*=Math.pow(oc,e);b.reset.bubbleCapMult*=Math.pow(kh,e);x("Upgrade","ResetSystem","BubbleCapacity",b.reset.bubbleCapLevel)}};this.getResetRemoveSpikesPrice=zi;this.isResetRemoveSpikesBought=lb;this.isResetRemoveSpikeUpgradeable=vf;this.upgradeResetRemoveSpikes=function(){B();vf()&&(b.reset.removeSpikes=!0,fa($b),x("Upgrade","ResetSystem",
"RemoveSpikes"));C("upgrade")};this.getIdleMult=function(){return b.reset.idleMult-1};this.getResetIdleMultUpgradeInc=function(){var a=l(),a=pc(a);return b.reset.idleMult*Math.pow(lh,a)-b.reset.idleMult};this.getResetIdleMultUpgradePrice=function(){return ac(l())};this.isResetIdleMultUpgradeable=function(){return wf(l())};this.upgradeResetIdleMult=function(){B();C("upgrade");var a=l();if(wf(a)){var e=pc(a);fa(ac(a));na();b.reset.idleMultLevel+=e;b.reset.idleMultUpgPrice*=Math.pow(qc,e);b.reset.idleMult*=
Math.pow(lh,e);x("Upgrade","ResetSystem","IdleMult",b.reset.idleMultLevel)}};this.getIdleMultTime=function(){return b.reset.idleMultTime};this.getResetIdleMultTimeUpgradeInc=function(){var a=l(),a=rc(a);return b.reset.idleMultTime+mh*a-b.reset.idleMultTime};this.getResetIdleMultTimeUpgradePrice=function(){return bc(l())};this.isResetIdleMultTimeUpgradeable=function(){return xf(l())};this.upgradeResetIdleMultTime=function(){B();C("upgrade");var a=l();if(xf(a)){var e=rc(a);fa(bc(a));b.reset.idleMultTimeLevel+=
e;b.reset.idleMultTimeUpgPrice*=Math.pow(sc,e);b.reset.idleMultTime+=mh*e;x("Upgrade","ResetSystem","IdleMultTime",b.reset.idleMultTimeLevel)}};this.isResetEnergyGeneratorAvailable=yf;this.getResetEnergyGeneratorLevel=ta;this.getResetEnergyGeneratorNextTubeImproveLevel=Ci;this.getResetEnergyGeneratorLevelMax=zf;this.getResetEnergyGeneratorValueDC=zd;this.getResetEnergyGeneratorLevelUpgradeInc=function(){return nb(l())};this.getResetEnergyGeneratorVisualValueAfterUpgradeDC=function(){var a=l(),a=nb(a);
return Bf(ta()+a)};this.getResetEnergyGeneratorUpgradePrice=function(){return cc(l())};this.isResetEnergyGeneratorUpgradeable=function(){return Df(l())};this.upgradeResetEnergyGenerator=function(){B();C("upgrade");var a=l();if(Df(a)){var e=nb(a);fa(cc(a));b.reset.energyGeneratorUpgPrice*=Math.pow(uc,e);b.reset.energyGeneratorLevel+=e;x("Upgrade","ResetSystem","EnergyGenerator",ta())}}});H.controller("SettingsController",["$timeout",function(a){this.getNumNotation=function(){return b.numberNotation};
this.setNumNotation=ai;this.sfxEnabled=!0;this.getSfxEnabled=function(){this.sfxEnabled=b.sfxEnabled};this.setSfxEnabled=function(){b.sfxEnabled=this.sfxEnabled};this.sfxVolume=1;this.getSfxVolume=function(){this.sfxVolume=Math.floor(100*b.sfxVolume)};this.setSfxVolume=function(){var a=this.sfxVolume/100;a!=b.sfxVolume&&(b.sfxVolume=a);b.sfxEnabled=0<this.sfxVolume;this.getSfxEnabled()};this.musicEnabled=!0;this.getMusicEnabled=function(){this.musicEnabled=b.musicEnabled};this.setMusicEnabled=function(){b.musicEnabled=
this.musicEnabled};this.musicVolume=1;this.getMusicVolume=function(){this.musicVolume=Math.floor(100*b.musicVolume)};this.setMusicVolume=function(){var a=this.musicVolume/100;a!=b.musicVolume&&(b.musicVolume=a,-1<Ia&&(G[ja].audio.volume=a));b.musicEnabled=0<this.musicVolume;this.getMusicEnabled()};this.fullscreen=!1;this.getFullScreen=function(){this.fullscreen=b.fullscreen};this.setFullScreen=function(){b.fullscreen=this.fullscreen};this.keepWindowSize=!1;this.getKeepWindowSize=function(){this.keepWindowSize=
b.keepWindowSize};this.setKeepWindowSize=function(){b.keepWindowSize=this.keepWindowSize};this.showBounceEnergy=!0;this.getShowBounceEnergy=function(){this.showBounceEnergy=b.showBounceEnergy};this.setShowBounceEnergy=function(){b.showBounceEnergy=this.showBounceEnergy};this.coloredUpgrades=!1;this.getColoredUpgrades=function(){this.coloredUpgrades=b.coloredUpgrades};this.setColoredUpgrades=function(){b.coloredUpgrades=this.coloredUpgrades};this.showUpgradeCntInTab=!0;this.getShowUpgradeCntInTab=
function(){this.showUpgradeCntInTab=b.showUpgradeCntInTab};this.setShowUpgradeCntInTab=function(){b.showUpgradeCntInTab=this.showUpgradeCntInTab};this.showAbilityEffects=!0;this.getShowAbilityEffects=function(){this.showAbilityEffects=b.showAbilityEffects};this.setShowAbilityEffects=function(){b.showAbilityEffects=this.showAbilityEffects};this.showBallStyles=function(){return b.isAnyTubeImproved};this.getBallStyle=Cc;this.setBallStyle=Mj;this.ballStyleList=Bc;this.bgStyles=["off","red","blue","azure",
"night"];this.getBgStyle=function(){return b.bgStyle};this.setBgStyle=function(a){b.bgStyle=a};this.showSaveResultTimeout=0;this.saveResultOK=!1;this.saveGame=function(){W(!1,!0);this.saveResultOK=yc;this.showSaveResultTimeout=(new Date).getTime()+3E3};this.isSaveResultVisible=function(){return(new Date).getTime()<this.showSaveResultTimeout};this.getSaveButtonText=function(){return this.isSaveResultVisible()?this.saveResultOK?"Success":"ERROR!":"Local save game"};this.getSaveButtonStyle=function(){return this.isSaveResultVisible()?
this.saveResultOK?"btn-success":"btn-danger":"btn-default"};this.cloudAutoSaveEnabled=!0;this.getCloudAutoSaveEnabled=function(){this.cloudAutoSaveEnabled=b.cloudAutoSaveEnabled};this.setCloudAutoSaveEnabled=function(){b.cloudAutoSaveEnabled=this.cloudAutoSaveEnabled};this.getCloudAutoSaveStatus=nj;this.getCloudAutoSaveTimeRemain=function(){};this.showCloudDialog=ij;this.showHardResetDlg=!1;this.hardResetDlg=function(){this.showHardResetDlg=!0};this.hardResetConfirm=function(a){a&&(Hb(!0),x("HardReset",
"Settings"));this.showHardResetDlg=!1};this.selectedTheme=ob();this.onThemeChanged=function(){Lf(this.selectedTheme)};this.themeList=Mf;this.getTheme=ob;this.setTheme=Lf;this.isShowImportWarning=function(){return""!=b.kongUserId||""!=b.kongUser};this.selectOnClick=function(a){a.target.select()};this.serializedSaveStr="";this.saveStrOk=!0;this.updateSaveStr=function(){this.serializedSaveStr=Cd(JSON.stringify(b));this.saveStrOk=!0};this.buttonLoadFromStr=function(){this.serializedSaveStr&&"ok"==jd(this.serializedSaveStr,
!0)?(this.saveStrOk=!0,x("ImportOK","Settings"),Hb(!1,this.serializedSaveStr),this.getSfxEnabled(),this.getSfxVolume(),this.getFullScreen(),this.getKeepWindowSize(),this.getMusicEnabled(),this.getMusicVolume(),this.getShowBounceEnergy(),this.getColoredUpgrades(),this.getShowUpgradeCntInTab(),this.getShowAbilityEffects(),this.getCloudAutoSaveEnabled(),this.selectedTheme=ob()):(this.saveStrOk=!1,x("ImportFail","Settings"))};this.isBuyAmountStepPosRight=ab;this.setBuyAmountStepPosRight=zh}]);H.controller("StatisticsController",
function(){this.statisticsList=function(){return Kb};this.statistics=function(){return b.statistics};this.getActiveTime=function(){return $e(Math.floor(b.statistics.time/1E3))};this.getBigValueDCRank=og;this.getTotalEnergyMult=function(){return(new g(b.gravity/Oc)).mul(b.reset.densityMult).mul(b.reset.totalMult).mul(b.premium.premiumEnergyMult*b.events.eventEnergyMult*b.boost.energyMult)};this.getTotalGravityMult=function(){return b.gravity/Oc};this.getTotalBounceMult=function(){return b.reset.bounceMult*
b.premium.premiumBounceMult*b.events.eventBounceMult};this.getIdleEnergyMultTotal=function(){return Ya()-1};this.getIdleEnergyMultTimeTotal=qe;this.getIdleEnergyMultMaxDC=Qj;this.isBoostDailyActive=gd;this.getBoostDailyType=Ph;this.getBoostDailyTotalValue=function(){return 100*b.boost.daily.selectedDailyValue};this.getBoostDailyDuration=function(){return rd(b.boost.timers.dailyBoost)};this.getDaysPlayedInRow=Le});var aa="Main";H.controller("TabsController",function(){De(aa);this.select=De;this.isSelected=
function(a){"Achievements"==aa&&(Jb=0);return aa==a}});var F="Main";H.controller("TabsUpgradeController",function(){ya(F);this.select=ya;this.isSelected=Ch});H.controller("UpgradeController",function(){this.getUpgradeColorStyle=function(a){return b.coloredUpgrades?{"background-color":Id[a],color:Bg[a]}:{}};this.showUpgradeCntInTab=function(){return b.showUpgradeCntInTab};this.getCapacityLevel=function(){return b.energyLevelDC};this.canUpgradeCapacity=function(){return me(l())};this.canUpgradeCapacityAmount=
function(a){return me(Z(a,l().step))};this.getUpgradeCapacityPriceDC=function(){return le(l())};this.capacityUpgradeIncDC=function(){var a=l();return Sc(a)};this.upgradeCapacity=function(){Sd(l())};this.upgradeCapacityAmount=function(a){Sd(Z(a,l().step))};this.getTubeBuyPriceDC=Rj;this.canBuyTube=Vc;this.buyTube=function(a){B();te(a);C("upgrade")};this.isTubeImproveButtonVisible=function(a){if(Ga)a=Xc(a);else{var e=0==a?5:a-1;yb[a]||(yb[a]=0==a&&b.tubes[e].active&&b.tubes[a].improvementLevel<=b.tubes[e].improvementLevel||
0<a&&b.tubes[e].active&&b.tubes[a].improvementLevel<=b.tubes[e].improvementLevel-1||.95<b.energyMaxDC.e/b.tubes[a].improvePriceDC.e);a=yb[a]}return a};this.getTubeImprovePriceDC=Wc;this.canImproveTube=function(a){return Ga?Xc(a):Ab(a)};this.improveTube=function(a){B();ue(a,Ga);C("upgrade")};this.getImproveText=function(a){return Ga&&Xc(a)?"Regress":Ab(a)?"Improve":'<span class="glyphicon glyphicon-flash"></span>'+J(Wc(a))};this.setShowAmplifierValueAsMult=Sj;this.isShowAmplifierValueAsMult=function(){return b.showAmplifierLevelAsMult};
this.getAmplifierPrefix=function(){return this.isShowAmplifierValueAsMult()?"&times;":'<span class="glyphicon glyphicon-flash"></span>'};this.getTubeAmplifierLevel=Qg;this.getTubeAmplifierLevelsFromPrevSuperUpgrade=Vj;this.getTubeAmplifierLevelSuperUpgradeStep=Uj;this.getTubeAmplifierNextSuperMult=Wj;this.getTubeAmplifierLevelUpgradeInc=function(a){return $a(a,l())};this.getTubeAmplifierValue=function(a){return this.isShowAmplifierValueAsMult()?b.tubes[a].amplifierDC:Nc(a,b.tubes[a].height-2*b.balls[a].r)};
this.getTubeAmplifierIncDC=function(a){if(this.isShowAmplifierValueAsMult()){var e=l();a=xe(a,$a(a,e)).amplDC.sub(b.tubes[a].amplifierDC)}else{var e=l(),c=Nc(a,b.tubes[a].height-2*b.balls[a].r);a=xe(a,$a(a,e)).amplDC.div(b.tubes[a].amplifierDC).mul(c).sub(c)}return a};this.getTubeAmplifierUpgradePriceDC=function(a){return we(a,l())};this.isTubeAmplifierUpgradeable=function(a){return Rg(a,l())};this.upgradeTubeAmplifier=ig;this.getTubeHeightMax=function(){return Za};this.isTubeHeightMax=Sg;this.getTubeHeightUpgradeInc=
function(a){return Zc(a,l())};this.getTubeHeightUpgradePriceDC=function(a){return ye(a,l())};this.isTubeHeightUpgradeable=function(a){return Tg(a,l())};this.upgradeTubeHeight=lg;this.getBallSizeMax=fe;this.isBallSizeMax=Eg;this.getBallSizeUpgradeInc=function(a){return Pc(a,l())};this.getBallSizeUpgradePriceDC=function(a){return ge(a,l())};this.isBallSizeUpgradeable=function(a){return Gg(a,l())};this.upgradeBallSize=kg;this.getBallBounceCnt=function(a){return b.balls[a].bounceCnt*de()};this.getBallBounceUpgradeInc=
function(a){return Qc(a,l())*de()};this.getBallBounceUpgradePriceDC=function(a){return ie(a,l())};this.isBallBounceUpgradeable=function(a){return Hg(a,l())};this.upgradeBallBounce=jg;this.getBallBounceTime=function(a){var e;e=b.balls[a];var c=b.tubes[a].height-2*e.r;a=Cg(a,c);c=Math.sqrt(8*c/b.gravity);e=e.bounceKoefDC.sqrt().toNumber();e=E(c,e,a).toNumber();return hb(e)};this.isAbilitiesTabVisible=function(){return b.isAnyTubeImproved};this.getEnergyUpsAvail=function(){var a=F;F="Main";for(var e=
0,c=0;6>c;c++)(b.tubes[c].active&&this.isTubeAmplifierUpgradeable(c)||0<c&&!b.tubes[c].active&&b.tubes[c-1].active&&this.canBuyTube(c))&&e++;F=a;return e};this.getBounceUpsAvail=function(){var a=F;F="BallBounce";for(var e=0,c=0;6>c;c++)b.balls[c].active&&this.isBallBounceUpgradeable(c)&&e++;F=a;return e};this.getBallSizeUpsAvail=function(){var a=F;F="BallSize";for(var e=0,c=0;6>c;c++)b.balls[c].active&&this.isBallSizeUpgradeable(c)&&e++;F=a;return e};this.getTubeHeightUpsAvail=function(){var a=F;
F="TubeHeight";for(var e=0,c=0;6>c;c++)b.tubes[c].active&&this.isTubeHeightUpgradeable(c)&&e++;F=a;return e}});var Dh=0,Eh=2,Ee="K M B T Qa Qt Sx Sp Oc Nn Dc UDc DDc TDc QaDc QtDc SxDc SpDc OcDc NnDc Vi UVi DVi TVi QaVi QtVi SxVi SpVi OcVi NnVi Tg UTg DTg TTg QaTg QtTg SxTg SpTg OcTg NnTg Qd UQd DQd TQd QaQd QtQd SxQd SpQd OcQd NnQd Qq UQq DQq TQq QaQq QtQq SxQq SpQq OcQq NnQq Sg USg DSg TSg QaSg QiSg SxSg SpSg OcSg NnSg St USt DSt TSt QaSt QtSt SxSt SpSt OcSt NnSt Og UOg DOg TOg QaOg QtOg SxOg SpOg OcOg NnOg".split(" "),
Fh=Ee.length;H.filter("bignum",function(){function a(a,b,d){return J(a,b,d)}a.$stateful=!0;return a});var Hh=.1,Gh=5,Fb=-1,Jh=5,Ih=10,Ge=7,ze={},Gb=!1,hd=!1,A="",lj="January February March April May June July August September October November December".split(" "),ib=[],td=0,jb=[],ud=0,Gj="idle-bouncer",ld=!1,Mb=new g(0),Xe=0,Ma=!1,$g=!1,ve=!1,Bd=!1,b={gameId:"IdleBouncer",saveVer:29,numberNotation:"suffix",showBounceEnergy:!0,coloredUpgrades:!1,showUpgradeCntInTab:!0,showAbilityEffects:!0,isAnyTubeImproved:!1,
ballStyle:"ball",bgStyle:"off",theme:"default",buyAmountStepPosRight:!0,musicEnabled:!0,sfxEnabled:!0,musicVolume:.3,sfxVolume:1,fullscreen:!1,keepWindowSize:!1,windowWidth:0,windowHeight:0,windowMaximized:!1,balls:[],tubes:[],showAmplifierLevelAsMult:!0,virtTubeIdMax:0,firstStartTime:(new Date).getTime(),lastUpdateTime:(new Date).getTime(),premium:{},kongUserId:"",kongUser:"",events:{eventEnergyMult:1,eventBounceMult:1,eventGravityMult:1,eventIdleMult:1,eventIdleMultTime:1,eventMetaBonusInc:0,eventItems:[],
eventBoughtItems:[],stvAchLevels:[]},achievementsLevel:[],achievementsMult:[],achievementStatsDC:[],tutorial:{},statistics:{},cloudAutoSaveEnabled:!0,saveTimestamp:0,cloudSaveTimestamp:0,uniqueSaveGameId:0},Jb=0,kb=!1,Pb=!1,pa=!1,nf=Math.pow(10,15),mf=.005,ji=1,ec=1.1,ti=Math.log(ec),fh=1.1,ki=5,kc=1.27,wi=Math.log(kc),ih=1.1,li=4,ic=1.27,vi=Math.log(ic),hh=2,mi=2,gc=2,ui=Math.log(gc),gh=2,ni=10,mc=2,xi=Math.log(mc),jh=.01,oi=10,oc=1.17,yi=Math.log(oc),kh=2,$b=10,hf=2,qc=1.18,Ai=Math.log(qc),lh=1.5,
jf=4,sc=1.05,Bi=Math.log(sc),mh=1,yd=1,uc=1.07,Ei=Math.log(uc),Di=1E25,tc=3,Cf=7-tc,Rb=!1,wc=(new Date).getTime()+6E4,Ed=(new Date).getTime()+2E3,xc=(new Date).getTime()+6E4,yc=!0,G={},ja="",Ia=-1,Jf=!1,Kb,Ce=0,Ib=!1,Uf="Waiting...",Hd="",Sa=0,zc=null,Dc=3,Xf=Math.floor(Dc/2),Aa=400,ra=566,gb=null,qa,Nb,pd,S=[],Ta=453,Ui=1,Yg=!1,Zg=!1;new g(0);var bk=[1,2,5,10,60,120,360,720,1440,3600,1E4],ck=[.1,.2,.5,1,2,5,10,60,600,3600,28800,86400],Ug=0,Vg=0,Wg=0,Xg=0,Zj=0,ak=0,wa=[{eventCode:"stval",title:"Quiver",
img:"imgs/events/stvalentine/quiver.png",imgIcon:"imgs/events/stvalentine/quiver.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"stval",title:"Bouncy Arrow",img:"imgs/events/stvalentine/arrow01.png",imgIcon:"imgs/events/stvalentine/arrow01.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;M()}},{eventCode:"stval",title:"Gravity Arrow",img:"imgs/events/stvalentine/arrow02.png",
imgIcon:"imgs/events/stvalentine/arrow02.png",desc:'Add <span class="num">+10%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.1;Q()}},{eventCode:"stval",title:"Idle Arrow",img:"imgs/events/stvalentine/arrow03.png",imgIcon:"imgs/events/stvalentine/arrow03.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){na();b.events.eventIdleMult+=1}},{eventCode:"stval",title:"Energy Arrow",img:"imgs/events/stvalentine/arrow04.png",imgIcon:"imgs/events/stvalentine/arrow04.png",
desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"stval",title:"Meta Arrow",img:"imgs/events/stvalentine/arrow05.png",imgIcon:"imgs/events/stvalentine/arrow05.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}},{eventCode:"easter",title:"Basket",img:"imgs/events/easter/basket.png",imgIcon:"imgs/events/easter/basket.png",desc:'Add <span class="num">+20%</span> to received energy',
order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"easter",title:"Bouncy Egg",img:"imgs/events/easter/basket1.png",imgIcon:"imgs/events/easter/basket1_icon.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;M()}},{eventCode:"easter",title:"Gravity Egg",img:"imgs/events/easter/basket2.png",imgIcon:"imgs/events/easter/basket2_icon.png",desc:'Add <span class="num">+20%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=
.2;Q()}},{eventCode:"easter",title:"Idle Egg",img:"imgs/events/easter/basket3.png",imgIcon:"imgs/events/easter/basket3_icon.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){na();b.events.eventIdleMult+=1}},{eventCode:"easter",title:"Energy Egg",img:"imgs/events/easter/basket4.png",imgIcon:"imgs/events/easter/basket4_icon.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"easter",
title:"Meta Egg",img:"imgs/events/easter/basket5.png",imgIcon:"imgs/events/easter/basket5_icon.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}},{eventCode:"halloween",title:"Bucket",img:"imgs/events/halloween/bucket.png",imgIcon:"imgs/events/halloween/bucket.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"halloween",title:"Bouncy Candy",
img:"imgs/events/halloween/candy1.png",imgIcon:"imgs/events/halloween/candy1_icon.png",desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;M()}},{eventCode:"halloween",title:"Gravity Candy",img:"imgs/events/halloween/candy2.png",imgIcon:"imgs/events/halloween/candy2_icon.png",desc:'Add <span class="num">+20%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.2;Q()}},{eventCode:"halloween",title:"Idle Candy",img:"imgs/events/halloween/candy3.png",
imgIcon:"imgs/events/halloween/candy3_icon.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',order:3,addFnc:function(){na();b.events.eventIdleMult+=1}},{eventCode:"halloween",title:"Energy Candy",img:"imgs/events/halloween/candy4.png",imgIcon:"imgs/events/halloween/candy4_icon.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"halloween",title:"Meta Candy",img:"imgs/events/halloween/candy5.png",
imgIcon:"imgs/events/halloween/candy5_icon.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,addFnc:function(){b.events.eventMetaBonusInc+=.1}},{eventCode:"stval2",title:"Quiver",img:"imgs/events/stvalentine/quiver.png",imgIcon:"imgs/events/stvalentine/quiver.png",desc:'Add <span class="num">+20%</span> to received energy',order:0,addFnc:function(){b.events.eventEnergyMult+=.2}},{eventCode:"stval2",title:"Bouncy Arrow",img:"imgs/events/stvalentine/arrow01.png",imgIcon:"imgs/events/stvalentine/arrow01.png",
desc:'Add <span class="num">+100%</span> to bounce',order:1,addFnc:function(){b.events.eventBounceMult+=1;M()}},{eventCode:"stval2",title:"Gravity Arrow",img:"imgs/events/stvalentine/arrow02.png",imgIcon:"imgs/events/stvalentine/arrow02.png",desc:'Add <span class="num">+10%</span> to the gravity',order:2,addFnc:function(){b.events.eventGravityMult+=.1;Q()}},{eventCode:"stval2",title:"Idle Arrow",img:"imgs/events/stvalentine/arrow03.png",imgIcon:"imgs/events/stvalentine/arrow03.png",desc:'Add <span class="num">+100%</span> to idle bonus multiplier',
order:3,addFnc:function(){na();b.events.eventIdleMult+=1}},{eventCode:"stval2",title:"Energy Arrow",img:"imgs/events/stvalentine/arrow04.png",imgIcon:"imgs/events/stvalentine/arrow04.png",desc:'Add <span class="num">+30%</span> to received energy',order:4,addFnc:function(){b.events.eventEnergyMult+=.3}},{eventCode:"stval2",title:"Meta Arrow",img:"imgs/events/stvalentine/arrow05.png",imgIcon:"imgs/events/stvalentine/arrow05.png",desc:'Add <span class="num">+10%</span> to meta-energy bonus',order:5,
addFnc:function(){b.events.eventMetaBonusInc+=.1}}],sb=wa.length,rb=[{code:"stval2",title:"Saint Valentine Event",page:"stval2.html",itemStartId:18,itemsCnt:6,finishTime:(new Date(2018,1,24)).getTime()},{code:"halloween",title:"Halloween Event",page:"halloween.html",itemStartId:12,itemsCnt:6,finishTime:(new Date(2017,10,21)).getTime()},{code:"easter",title:"Easter Event",page:"event.html",itemStartId:6,itemsCnt:6,finishTime:(new Date(2017,4,1)).getTime()},{code:"stval",title:"Saint Valentine Event",
page:"stval.html",itemStartId:0,itemsCnt:6,finishTime:(new Date(2017,1,24)).getTime()}],Yi=!1,Fc=0,w={powerfulBounce:{name:"Powerful bounce",descFnc:function(a){return'Next bounce energy will be multiplied by <span class="num">'+this.visualiseEffectFnc(a)+"</span>"},passiveAbility:!1,imprLvlMin:1,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(7E3+4E3*(a-1))},effectMultDCFnc:function(a){return new g(50*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return"&times;"+
J(a,0,0)},onActivateFnc:function(a,e){b.abilities[a].energyMultDC=b.abilities[a].energyMultDC.eq(1)?new g(e):b.abilities[a].energyMultDC.add(e)}},autoJump:{name:"Auto jump",descFnc:function(a){return a.lt(1)?'Throws the ball to <span class="num">'+this.visualiseEffectFnc(a)+"</span> of the maximum height":"Throws the ball to the maximum height"},passiveAbility:!1,imprLvlMin:2,ptsPrice:1,ptsPriceRate:1,levelMax:5,allowChangeLevel:!0,heightDCFnc:function(a){return new g(1E4*a)},effectMultDCFnc:function(a){return new g(.0625*
Math.pow(2,a-1))},visualiseEffectFnc:function(a){return a.mul(100).toString()+"%"},onActivateFnc:function(a,e){b.abilities[a].autoJumpKoef=Math.max(b.abilities[a].autoJumpKoef,e.toNumber())}},powerfulBounceAll:{name:"Mass powerful bounce",descFnc:function(a){return'Next bounce energy for all balls will be multiplied by <span class="num">'+this.visualiseEffectFnc(a)+"</span>"},passiveAbility:!1,imprLvlMin:3,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(4E4+
16E3*(a-1))},effectMultDCFnc:function(a){return new g(50*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return"&times;"+J(a,0,0)},onActivateFnc:function(a,e){for(var c=0;6>c;c++)b.abilities[c].energyMultDC=b.abilities[c].energyMultDC.eq(1)?new g(e):b.abilities[c].energyMultDC.add(e)}},autoJumpAll:{name:"Mass auto jump",descFnc:function(a){return a.lt(1)?'Throws all balls to <span class="num">'+this.visualiseEffectFnc(a)+"</span> of the maximum height":"Throws all balls to the maximum height"},passiveAbility:!1,
imprLvlMin:4,ptsPrice:1,ptsPriceRate:1,levelMax:5,allowChangeLevel:!0,heightDCFnc:function(a){return new g(3E4*a)},effectMultDCFnc:function(a){return new g(.0625*Math.pow(2,a-1))},visualiseEffectFnc:function(a){return a.mul(100).toString()+"%"},onActivateFnc:function(a,e){for(var c=0;6>c;c++)b.abilities[c].autoJumpKoef=Math.max(b.abilities[c].autoJumpKoef,e.toNumber())}},bounceAutoUpgrade:{name:"Bounce auto upgrade",descFnc:function(a){return'Buy bounce upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+
this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:5,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1E4+5E3*(a-1))},effectMultDCFnc:function(a){return new g(Math.pow(.8,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){je(a,.01,b.toNumber())}},ballSizeAutoUpgrade:{name:"Ball size auto upgrade",descFnc:function(a){return'Buy ball size upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+
this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:6,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(2E4+6E3*(a-1))},effectMultDCFnc:function(a){return new g(Math.pow(.8,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){he(a,.01,b.toNumber())}},tubeHeightAutoUpgrade:{name:"Height auto upgrade",descFnc:function(a){return'Buy height upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+
this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:7,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1E4+5E3*a)},effectMultDCFnc:function(a){return new g(Math.pow(.7,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){Uc(a,.01,b.toNumber())}},amplAutoUpgrade:{name:"Amplifier auto upgrade",descFnc:function(a){return'Buy amplifier upgrades for this tube spending no more than <span class="num">1%</span> of current energy for <span class="num">'+
this.visualiseEffectFnc(a)+"</span> of normal price"},passiveAbility:!1,imprLvlMin:8,ptsPrice:1,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(8E4+4E4*(a-1))},effectMultDCFnc:function(a){return new g(Math.pow(.8,a))},visualiseEffectFnc:function(a){return J(a.mul(100),2)+"%"},onActivateFnc:function(a,b){Yc(a,.01,b.toNumber())}},freeAmplAutoUpgrade:{name:"Free amplifier auto upgrade",descFnc:function(a){return'Do <span class="num">'+this.visualiseEffectFnc(a)+"</span> amplifier upgrade"+
(a.gt(1)?"s":"")+" for this tube for free"},passiveAbility:!1,imprLvlMin:9,ptsPrice:1,ptsPriceRate:1,levelMax:10,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1E5+5E4*(a-1))},effectMultDCFnc:function(a){return new g(a)},visualiseEffectFnc:function(a){return a.toString()},onActivateFnc:function(a,b){Yc(a,b.toNumber(),0)}},queueInc:{name:"Increase queue",descFnc:function(a){return'Increase queue size up to <span class="num">'+this.visualiseEffectFnc(a)+"</span> abilities"},passiveAbility:!0,
imprLvlMin:10,ptsPrice:2,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1)},initEffectMultDC:new g(1),effectMultDCFnc:function(a){return new g(a+1)},visualiseEffectFnc:function(a){return a.toString()},onActivateFnc:function(a,e){b.abilities[a].queueSizeMax=e.toNumber()}},preventWeakBubble:{name:"Prevent weak bubble",descFnc:function(a){return'Excludes this tube from bubble generation if generated bubble contains less than <span class="num">'+this.visualiseEffectFnc(a)+
"</span> of the current energy per second."},passiveAbility:!0,imprLvlMin:11,ptsPrice:2,ptsPriceRate:1,levelMax:0,allowChangeLevel:!1,heightDCFnc:function(a){return new g(1)},effectMultDCFnc:function(a){return new g(Math.pow(100,a-1)/100)},visualiseEffectFnc:function(a){return J(a.mul(100),0)+"%"},onActivateFnc:function(a,e){b.abilities[a].preventWeakBubbleKoef=e.toNumber()}}},P={achBouncer:0,achEnergyStorage:1,achBubbleGrow:2},X=[{name:"Super bouncer",descr:'It makes your balls bounce upgrade <span class="num">20%</span> cheaper at each achievement level. Continue bouncing to get this achievement.',
trackLevel:5,reqValueDC:[],reqValueDCFnc:function(a){return new g(100*(Math.pow(3,a+1)-2))},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:function(){for(var a=0;6>a;a++)b.balls[a].bounceUpgPriceDC=b.balls[a].bounceUpgPriceDC.mul(X[P.achBouncer].mult)},mult:.8,multDecDigits:3},{name:"Energy storage",descr:'It makes your energy capacity upgrade <span class="num">30%</span> cheaper at each achievement level. Continue spending the energy to get this achievement. Get <i>Auto-capacity extender</i> on level <span class="num">5</span> of this achievement.',
trackLevel:7,reqValueDC:[],reqValueDCFnc:function(a){var b=new g(1);b.e=Math.pow(2,a);return b},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:function(){b.energyUpgPrice*=X[P.achEnergyStorage].mult;5==b.achievementsLevel[P.achEnergyStorage]&&(0==b.reset.energyExtLevel?b.reset.energyExtLevel=1:b.reset.active++)},mult:.7,multDecDigits:5},{name:"Bubble buster",descr:'It makes a bubble grow <span class="num">20%</span> faster at each achievement level. Continue popping bubbles to get this achievement.',
trackLevel:5,reqValueDC:[],reqValueDCFnc:function(a){return new g(5*(Math.pow(2,a+1)-1))},levelMax:0,updateStatDCFnc:null,onLevelUpFnc:null,mult:1.2,multDecDigits:3}],Oe=X.length,Bc={ball:{name:"Ball",type:"vector",drawFnc:function(a,b,c,d,f,g,h){p(a,c,d,f,h)},colors:"#ff0 #0f0 #0ff #05f #00c #222".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},figure:{name:"Figure",type:"vector",drawFnc:function(a,b,c,d,f,g,h){0==g?p(a,c,d,f,h):1==g?(p(a,c,d+.4*f,.6*f,h),p(a,c,d-.6*f,.4*f,h)):
(b=2,g>=b++&&(p(a,c,d+.5*f,.5*f,h),p(a,c,d-.3*f,.3*f,h),p(a,c,d-.8*f,.2*f,h)),g>=b++&&(p(a,c+.07*f,d-.88*f,.03*f,h),p(a,c-.07*f,d-.88*f,.03*f,h)),g>=b++&&p(a,c,d-.78*f,.02*f,h),g>=b++&&p(a,c+.4*f,d-.4*f,.12*f,h),g>=b++&&p(a,c-.4*f,d-.4*f,.12*f,h),g>=b++&&p(a,c-.5*f,d+.85*f,.15*f,h),g>=b++&&p(a,c+.5*f,d+.85*f,.15*f,h),g>=b++&&p(a,c,d-.45*f,.02*f,h),g>=b++&&p(a,c,d-.3*f,.02*f,h),g>=b++&&p(a,c,d-.15*f,.02*f,h))},colors:"#ff0 #0f0 #0ff #05f #00c #222".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},
pack:{name:"Pack",type:"vector",drawFnc:function(a,b,c,d,f,g,h){switch(g){case 0:p(a,c,d,f,h);break;case 1:p(a,c,d+.5*f,.5*f,h);p(a,c,d-.5*f,.5*f,h);break;case 2:p(a,c+.5*f,d+.5*f,.5*f,h);p(a,c-.5*f,d+.5*f,.5*f,h);p(a,c,d-.45*f,.55*f,h);break;case 3:p(a,c+.5*f,d+.5*f,.5*f,h);p(a,c-.5*f,d+.5*f,.5*f,h);p(a,c+.5*f,d-.5*f,.5*f,h);p(a,c-.5*f,d-.5*f,.5*f,h);break;case 4:p(a,c+.5*f,d+.5*f,.5*f,h);p(a,c-.5*f,d+.5*f,.5*f,h);p(a,c+.3*f,d-.28*f,.3*f,h);p(a,c-.3*f,d-.28*f,.3*f,h);p(a,c,d-.75*f,.25*f,h);break;
case 5:p(a,c,d+4*f/6,1*f/3,h);p(a,c-4*f/6,d+4*f/6,1*f/3,h);p(a,c+4*f/6,d+4*f/6,1*f/3,h);p(a,c-1*f/3,d+.06*f,1*f/3,h);p(a,c+1*f/3,d+.06*f,1*f/3,h);p(a,c,d-.6*f,.4*f,h);break;case 6:p(a,c,d+4*f/6,1*f/3,h);p(a,c-4*f/6,d+4*f/6,1*f/3,h);p(a,c+4*f/6,d+4*f/6,1*f/3,h);p(a,c,d,1*f/3,h);p(a,c-4*f/6,d,1*f/3,h);p(a,c+4*f/6,d,1*f/3,h);p(a,c,d-4*f/6,1*f/3,h);break;case 7:p(a,c,d+4*f/6,1*f/3,h);p(a,c-4*f/6,d+4*f/6,1*f/3,h);p(a,c+4*f/6,d+4*f/6,1*f/3,h);p(a,c,d,1*f/3,h);p(a,c-4*f/6,d,1*f/3,h);p(a,c+4*f/6,d,1*f/3,
h);p(a,c-1*f/3,d-.64*f,.36*f,h);p(a,c+1*f/3,d-.64*f,.36*f,h);break;default:p(a,c,d+4*f/6,1*f/3,h),p(a,c-4*f/6,d+4*f/6,1*f/3,h),p(a,c+4*f/6,d+4*f/6,1*f/3,h),p(a,c,d,1*f/3,h),p(a,c-4*f/6,d,1*f/3,h),p(a,c+4*f/6,d,1*f/3,h),p(a,c,d-2*f/3,1*f/3,h),p(a,c-4*f/6,d-2*f/3,1*f/3,h),p(a,c+4*f/6,d-2*f/3,1*f/3,h)}},colors:"#ff0 #0f0 #0ff #05f #00c #222".split(" "),textColors:"#000 #000 #000 #fff #fff #fff".split(" ")},classic:{name:"Classic",type:"bitmap",drawFnc:function(a,b,c,d,f,g,h){ae&&(g=2*f,a.drawImage(Tc[b],
c-f,d-f,g,g))},colors:"#ff0 #0f0 #00b3ef #fb6b6a #0070ef #f800e4".split(" "),textColors:"#000 #000 #fff #fff #fff #fff".split(" ")}},za=[{title:"Bounce",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.bounceMult*=a+1;M()},onDeactivateFnc:function(a){b.boost.bounceMult/=a+1;M()}},{title:"Gravity",valueMin:.1,valueMax:.4,onActivateFnc:function(a){b.boost.gravityMult*=a+1;Q()},onDeactivateFnc:function(a){b.boost.gravityMult/=a+1;Q()}},{title:"Energy",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.energyMult*=
a+1},onDeactivateFnc:function(a){b.boost.energyMult/=a+1}},{title:"Density",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.densityMult*=a+1},onDeactivateFnc:function(a){b.boost.densityMult/=a+1}},{title:"Bubble probability",valueMin:.01,valueMax:.03,onActivateFnc:function(a){b.boost.bubbleProbInc+=a},onDeactivateFnc:function(a){b.boost.bubbleProbInc-=a}},{title:"Bubble capacity",valueMin:.5,valueMax:2,onActivateFnc:function(a){b.boost.bubbleCapMult*=a+1},onDeactivateFnc:function(a){b.boost.bubbleCapMult/=
a+1}}],Kh=za.length,L={bounce:{title:function(){return'Increase bounce <span class="num">x10</span> for <span class="num">10</span> minutes'},dlgText:function(){return'increase bounce <span class="num">x10</span> for <span class="num">10</span> minutes'},available:function(){return!0},unavailableText:"",reward:function(){b.boost.bounceMult*=10;M()},rewardTime:600,rewardEnd:function(){b.boost.bounceMult/=10;M()}},gravity:{title:function(){return'Increase gravity <span class="num">+50%</span> for <span class="num">5</span> minutes'},
dlgText:function(){return'increase gravity <span class="num">x50</span> for <span class="num">5</span> minutes'},available:function(){return!0},unavailableText:"",reward:function(){b.boost.gravityMult*=1.5;Q()},rewardTime:300,rewardEnd:function(){b.boost.gravityMult/=1.5;Q()}},time:{title:function(){return'Time warp <span class="num">15</span> minutes'},dlgText:function(){return'jump into the future by <span class="num">15</span> minutes'},available:function(){return Dg()},unavailableText:"All balls are in the idle state. Start bouncing to activate time warp.",
reward:function(){va(900,!0)},rewardTime:0,rewardEnd:null},dblOffline:{hidden:!0,title:function(){return"Double offline energy"},dlgText:function(){return'increase offline energy <span class="num">x2</span>'},available:function(){return b.energyDC.gt(Mb)},unavailableText:"",reward:function(){R(b.energyDC.sub(Mb))},rewardTime:0,rewardEnd:null},dailyBoost:{hidden:!0,title:function(){return""},dlgText:function(){return""},available:function(){return!1},unavailableText:"",reward:function(){za[b.boost.daily.selectedDailyBoost].onActivateFnc(b.boost.daily.selectedDailyValue)},
rewardTime:86400,rewardEnd:function(){za[b.boost.daily.selectedDailyBoost].onDeactivateFnc(b.boost.daily.selectedDailyValue)}}},vb=[1,10,50,100,500,1E3],bb=vb.length,bf=Math.max(2E9,1E6*vb[bb-1]),Lc=[{value:0,text:"exact"},{value:-1,text:"min"},{value:.1,text:"10%"},{value:.5,text:"50%"},{value:1,text:"max"}],Db=Lc.length,mg=bb+Db,K={packstv2:{title:'Special Valentine\'s Event Pack.<br/><i>Bonus: All Valentine\'s Event Items.<br/>For any Event Item you already own you get additional <img src="imgs/theme-default/premium.svg" class="premium-crystal"/>25.</i>',
buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,finishTime:(new Date(2018,2,6)).getTime(),onBuyFnc:function(){for(var a=0;a<sb;a++)"stval2"==wa[a].eventCode&&(Da(a)?b.events.eventBoughtItems[a]||(b.premium.premiumMoney+=25):Gc(a,!0))}},packspec:{title:"Special Deal for first time buyers.<br/><i>Bonus: +100% to bounce included!</i>",buyOnce:!0,price:39,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){b.premium.premiumBounceMult+=1;M()}},
packidle:{title:'Special Deal for idle players.<br/>SALE: Only <img src="imgs/kred_single.png" class="premium-crystal-list-item"/> 69 if you buy before Valentine\'s Day.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>',hide:!0,buyOnce:!0,price:69,oldPrice:109,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){na();b.premium.premiumIdleMult+=5;b.premium.premiumIdleMultTime+=5;b.premium.premiumBounceMult+=5;M()}},pack1:{title:"",
buyOnce:!1,price:49,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},pack2:{title:"",buyOnce:!1,price:99,premiumMoneyBase:200,premiumMoney:220,premiumBonusPercent:10},pack3:{title:"",buyOnce:!1,price:199,premiumMoneyBase:400,premiumMoney:480,premiumBonusPercent:20},pack4:{title:"",buyOnce:!1,price:499,premiumMoneyBase:1E3,premiumMoney:1300,premiumBonusPercent:30},pack5:{title:"",buyOnce:!1,price:999,premiumMoneyBase:2E3,premiumMoney:3E3,premiumBonusPercent:50},packidlen:{title:"Special Deal for idle players.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>",
buyOnce:!0,price:109,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){na();b.premium.premiumIdleMult+=5;b.premium.premiumIdleMultTime+=5;b.premium.premiumBounceMult+=5;M()}},packstv:{title:'Special Valentine\'s Event Pack.<br/><i>Bonus: All Valentine\'s Event Items.<br/>For any Event Item you already own you get additional <img src="imgs/theme-default/premium.svg" class="premium-crystal"/>25.</i>',hide:!0,buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,
onBuyFnc:function(){for(var a=0;a<sb;a++)"stval"==wa[a].eventCode&&(Da(a)?b.events.eventBoughtItems[a]||(b.premium.premiumMoney+=25):Gc(a,!0))}},easterpackspec:{title:"One-Time deal for Easter Event players.<br/><i>Bonus: +50% Energy included!</i>",hide:!0,buyOnce:!0,price:39,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},easterpackactive:{title:"Special Deal: Active Easter.<br/><i>Double chance of all bonus eggs drop (both gray and yellow).<br/>Bonus eggs drop speed reduced by x2.</i>",
hide:!0,buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},easterpackidle:{title:"Special Deal: Idle Easter.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>",hide:!0,buyOnce:!0,price:69,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},easterpackquick:{title:"Special Deal: Quick Easter.<br/><i>Bonus: +100% Gravity included!</i>",hide:!0,buyOnce:!0,price:129,premiumMoneyBase:200,premiumMoney:200,premiumBonusPercent:0},
packeaster:{title:'Special Easter Event Pack.<br/><i>Bonus: All Easter Event Items.<br/>For any Event Item you already own you get additional <img src="imgs/theme-default/premium.svg" class="premium-crystal"/>25.</i>',hide:!0,buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){for(var a=0;a<sb;a++)"easter"==wa[a].eventCode&&(Da(a)?b.events.eventBoughtItems[a]||(b.premium.premiumMoney+=25):Gc(a,!0))}},halpackspec:{title:"One-Time deal for Halloween Event players.<br/><i>Bonus: +50% Energy included!</i>",
hide:!0,buyOnce:!0,price:39,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},halpackidle:{title:"Special Deal: Idle Halloween.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>",hide:!0,buyOnce:!0,price:69,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},halpackquick:{title:"Special Deal: Quick Halloween.<br/><i>Bonus: +100% Gravity included!</i>",hide:!0,buyOnce:!0,price:129,premiumMoneyBase:200,premiumMoney:200,premiumBonusPercent:0},
packhalloween:{title:'Special Halloween Event Pack.<br/><i>Bonus: All Halloween Event Items.<br/>For any Event Item you already own you get additional <img src="imgs/theme-default/premium.svg" class="premium-crystal"/>25.</i>',hide:!0,buyOnce:!0,price:59,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0,onBuyFnc:function(){for(var a=0;a<sb;a++)"halloween"==wa[a].eventCode&&(Da(a)?b.events.eventBoughtItems[a]||(b.premium.premiumMoney+=25):Gc(a,!0))}},stv2packspec:{title:"One-Time deal for Saint Valentine Event players.<br/><i>Bonus: +50% Energy included!</i>",
hide:!0,buyOnce:!0,price:39,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},stv2packidle:{title:"Special Deal: Idle Saint Valentine.<br/><i>Bonus: +500% to idle bonus multiplier, +500% to idle time and +500% to bounce included!</i>",hide:!0,buyOnce:!0,price:69,premiumMoneyBase:100,premiumMoney:100,premiumBonusPercent:0},stv2packquick:{title:"Special Deal: Quick Saint Valentine.<br/><i>Bonus: +100% Gravity included!</i>",hide:!0,buyOnce:!0,price:129,premiumMoneyBase:200,premiumMoney:200,
premiumBonusPercent:0}},ka=[{name:"Re-roll reward value",desc:"Re-roll reward value.",descInactive:"",price:1,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){cb(!1,!0,!1)}},{name:"Re-roll reward duration",desc:"Re-roll reward duration.",descInactive:"",price:1,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){cb(!1,!1,!0)}},{name:"Re-roll reward type and value",desc:"Re-roll reward type and value.",descInactive:"",price:2,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){cb(!0,
!0,!1)}},{name:"Re-roll reward type, value and duration",desc:"Re-roll reward type, value and duration.",descInactive:"",price:3,active:function(){return!1},hideInactive:!0,onBuyFnc:function(){cb(!0,!0,!0)}},{name:"Meta-energy converter",desc:"Immediately activate inactive meta-energy and keep all your tubes, upgrades etc.",descInactive:"You should have inactive meta-energy to use meta-energy converter.",price:10,active:function(){return Qb()},hideInactive:!1,onBuyFnc:function(){kf()}},{name:"FREE Meta-energy refund",
desc:"Refunds all meta-energy upgrades to be able to re-distribute meta-energy.",descInactive:"You should have meta-energy upgrades to use meta-energy refund.",price:0,availCntFnc:function(){return b.reset.freeRefundCnt},active:function(){return 0<b.reset.freeRefundCnt&&Sb()},hideInactive:!0,onBuyFnc:function(){of()}},{name:"Meta-energy refund",desc:"Refunds all meta-energy upgrades to be able to re-distribute meta-energy.",descInactive:"You should have meta-energy upgrades to use meta-energy refund.",
price:1,active:function(){return 0>=b.reset.freeRefundCnt&&Sb()},hideInactive:!0,onBuyFnc:function(){of()}},{name:"FREE abilities refund",desc:"Refunds all ability upgrades to be able to re-distribute ability points.",descInactive:"",price:0,availCntFnc:function(){return b.abilitiesFreeRefundCnt},active:function(){return 0<b.abilitiesFreeRefundCnt&&Xd()},hideInactive:!0,onBuyFnc:function(){sg()}},{name:"Abilities refund",desc:"Refunds all ability upgrades to be able to re-distribute ability points.",
descInactive:"",price:1,active:function(){return 0>=b.abilitiesFreeRefundCnt&&Xd()},hideInactive:!0,onBuyFnc:function(){sg()}},{name:"Quick Upgrade",desc:"Fill your energy storage and do all upgrades you can afford for everything at no cost.",price:10,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){var a,e=new g(b.energyMaxDC),c=Z(1,1);b.energyDC=new g(e);Jg(c);b.energyDC=new g(e);for(a=0;6>a;a++)if(!b.tubes[a].active&&Vc(a)&&(te(a),b.energyDC=new g(e)),b.tubes[a].active){for(;Ab(a);)ue(a),
b.energyDC=new g(e);he(a,c);b.energyDC=new g(e);Yc(a,c);b.energyDC=new g(e);Uc(a,c);b.energyDC=new g(e);je(a,c);b.energyDC=new g(e)}}},{name:"Capacity & Energy",desc:'Increase your energy storage capacity <span class="num">&times;10</span> and fill it with energy.',price:10,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.energyMaxDC=b.energyMaxDC.mul(10);b.energyDC=new g(b.energyMaxDC)}},{name:"Bounce +100%",desc:'Add permanent <span class="num">+100%</span> to bounce. Stacks additively.',
price:20,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumBounceMult+=1;M()}},{name:"Bounce +500%",desc:'Add permanent <span class="num">+500%</span> to bounce. Stacks additively.',price:60,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumBounceMult+=5;M()}},{name:"Gravity +10%",desc:'Add permanent <span class="num">+10%</span> to the gravity. Stacks additively.',price:30,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumGravityMult+=
.1;Q()}},{name:"Gravity +50%",desc:'Add permanent <span class="num">+50%</span> to the gravity. Stacks additively.',price:90,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumGravityMult+=.5;Q()}},{name:"Energy Multiplier +100%",desc:'Add permanent <span class="num">+100%</span> to received energy. Stacks additively.',price:100,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyMult+=1}},{name:"Energy Multiplier +500%",desc:'Add permanent <span class="num">+500%</span> to received energy. Stacks additively.',
price:300,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyMult+=5}},{name:"Idle Bonus Multiplier +100%",desc:'Add permanent <span class="num">+100%</span> to idle bonus multiplier. Stacks additively.',price:30,active:function(){return!0},hideInactive:!1,onBuyFnc:function(){na();b.premium.premiumIdleMult+=1},onHelpFnc:ne},{name:"Idle Bonus Multiplier +500%",desc:'Add permanent <span class="num">+500%</span> to idle bonus multiplier. Stacks additively.',price:90,
active:function(){return!0},hideInactive:!1,onBuyFnc:function(){na();b.premium.premiumIdleMult+=5},onHelpFnc:ne},{name:"Idle Time +100%",desc:'Add permanent <span class="num">+100%</span> to idle multiplier growth time. Stacks additively.',descInactive:'You should have <i>Idle bonus multiplier</i> greater than <span class="num">zero</span>.',price:30,active:function(){return 1<Ya()},hideInactive:!1,onBuyFnc:function(){b.premium.premiumIdleMultTime+=1}},{name:"Idle Time +500%",desc:'Add permanent <span class="num">+500%</span> to idle multiplier growth time. Stacks additively.',
price:90,active:function(){return 1<Ya()},hideInactive:!0,onBuyFnc:function(){b.premium.premiumIdleMultTime+=5}},{name:"Energy Generator Improver",desc:"Improve <i>Energy generator</i> to generate energy enough to improve +1 tube more. Stacks additively (max: 35).",descInactive:"You should have <i>Energy generator</i> to buy this upgrade. Stacks additively (max: 35).",price:30,availCntFnc:xd,active:function(){return ta()&&0<xd()},hideInactive:!1,onBuyFnc:function(){b.premium.premiumEnergyGeneratorInc++}},
{name:"Energy Generator Improver x5",desc:"Improve <i>Energy generator</i> to generate energy enough to improve +5 tubes more. Stacks additively (max: 35).",descInactive:"",price:90,availCntFnc:gf,active:function(){return ta()&&0<gf()},hideInactive:!0,onBuyFnc:function(){b.premium.premiumEnergyGeneratorInc+=5}},{name:"Time Travel 1 Hour",desc:'Jump into the future by <span class="num">1</span> hour.',descInactive:'You should have <i>Auto-capacity extender</i> to jump into the future by <span class="num">1</span> hour.',
price:10,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!1,onBuyFnc:function(){Wa();va(3600,!0)}},{name:"Time Travel 4 Hours",desc:'Jump into the future by <span class="num">4</span> hours.',descInactive:"",price:20,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Wa();va(14400,!0)}},{name:"Time Travel 12 Hours",desc:'Jump into the future by <span class="num">12</span> hours.',descInactive:"",price:30,active:function(){return 0<b.reset.energyExtLevel},
hideInactive:!0,onBuyFnc:function(){Wa();va(43200,!0)}},{name:"Time Travel 1 Day",desc:'Jump into the future by <span class="num">1</span> day.',descInactive:"",price:40,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Wa();va(86400,!0)}},{name:"Time Travel 3 Days",desc:'Jump into the future by <span class="num">3</span> days.',descInactive:"",price:60,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Wa();va(259200,!0)}},
{name:"Time Travel 7 Days",desc:'Jump into the future by <span class="num">7</span> days.',descInactive:"",price:100,active:function(){return 0<b.reset.energyExtLevel},hideInactive:!0,onBuyFnc:function(){Wa();va(604800,!0)}}],db={bounce:{file:"ball_bounce.ogg",isSFX:!0},pop:{file:"bubble_pop.ogg",isSFX:!0},ability:{file:"firework.ogg",isSFX:!0},click:{file:"click.wav",isSFX:!0},upgrade:{file:"upgrade.ogg",isSFX:!0},music0:{file:"breezy-ukulele-pop.ogg",isSFX:!1},music1:{file:"happy-place.ogg",isSFX:!1},
music2:{file:"lets-go-to-happy-land.ogg",isSFX:!1}},Kf=3,nh=[255,0,0,1],oh=[0,0,0,1],ph=[0,0,0,1],qh=[0,0,0,1],rh=[255,0,0,1],sh=[238,238,238,1],th=[255,255,255,1],uh=[238,238,238,1],vh=[255,0,0,1],wh=[131,131,128,1],xh=[255,255,255,1],yh=[131,131,128,1],Mf={"default":{name:"Default",file:"",imgDir:"theme-default",circleStrokeColor:"#000",tubeRectColor:"#000",abilityProgressColor:"#f00",abilityProgressColorRGBA:nh,bounceTextColorRGBA:oh,bounceTextShadow:"#aaa",qteTextColorRGBA:ph,tutorialTextColorRGBA:qh},
bootstrap3d:{name:"3D",file:"bootstrap-theme.min.css",imgDir:"theme-default",circleStrokeColor:"#000",tubeRectColor:"#000",abilityProgressColor:"#f00",abilityProgressColorRGBA:nh,bounceTextColorRGBA:oh,bounceTextShadow:"#aaa",qteTextColorRGBA:ph,tutorialTextColorRGBA:qh},dark:{name:"Dark",file:"theme-dark.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#eee",abilityProgressColor:"#f00",abilityProgressColorRGBA:rh,bounceTextColorRGBA:sh,bounceTextShadow:"#555",qteTextColorRGBA:th,
tutorialTextColorRGBA:uh},dark3d:{name:"Dark 3D",file:"theme-dark-3d.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#eee",abilityProgressColor:"#f00",abilityProgressColorRGBA:rh,bounceTextColorRGBA:sh,bounceTextShadow:"#555",qteTextColorRGBA:th,tutorialTextColorRGBA:uh},night:{name:"Night",file:"theme-night.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#838380",abilityProgressColor:"#f00",abilityProgressColorRGBA:vh,bounceTextColorRGBA:wh,bounceTextShadow:"#555",
qteTextColorRGBA:xh,tutorialTextColorRGBA:yh},aqua:{name:"Aqua",file:"theme-aqua.min.css",imgDir:"theme-dark",circleStrokeColor:"#555",tubeRectColor:"#838380",abilityProgressColor:"#f00",abilityProgressColorRGBA:vh,bounceTextColorRGBA:wh,bounceTextShadow:"#555",qteTextColorRGBA:xh,tutorialTextColorRGBA:yh}},vc=[[1,189,13537],[1,459,27486],[1,1006,40152],[1,2942,55719],[2,4722,58930],[12,5092,110763]],Ra=[{name:"start",activeTabName:!1,activateFnc:function(){return!0},activateOnce:!0,continueButton:!1,
finishFnc:function(){return Dg()},text:"",hidePanel:!0,highlightElements:!1}],Rf=Ra.length,da=null,sa=!1,Lb=!1,kd=0,bg,Qd=0,Fa="",U="",Kc="",la={},ub=!1,qj=3600,pj="https://api.almostidle.com/timestamp.php",eb=!1,Ka=!1,Rd=0,La=0,gg=!1,Ga=!1,tk=5E3,Dj=.0644,N=null,ba=!1,Ne=!1,Ja=!1,Wh=5E3,uj=3E4,xj=1E3,I={isGuest:!0,userId:!1,userName:"",token:"",adsAvailable:!1},eh=0,Aj=Math.log(1.00000002),Bj=Math.log(1.0000004),Vd=!1,Td=!1,Ud=!1,Fj="https://api.almostidle.com/info.php?game=",v=-1,Tc=[],$d=[],ae=
!1,be=!1,zg=Math.log(100),Nj=Math.log(1.03),Id,Bg,Mc=[],pb=[],ch=20,ek=50,gk=1E3,hk=0,bh=50,qk=.4,kk=.8,ik=4,Rc=5,dh=12,nk=dh-Rc,jk=10,wb=30,Be=100,mk=Be-wb,rk=.3,ad=wb/2,fk=Aa-ad-ad,ah=ra-ad,pk=0,ok=Aa-1,Ae=0,lk=Ae+Be/2,ma=!1,Ua=!1,Ca=!1,m={posX:0,posY:0,size:wb,fontSize:Rc,opacity:0,valueDC:new g(0)},qb,Nd=!1,ke=!1,Ec=100,Si=3,Oc=500,Ad=120,Pj=Ad/2,Oj=5,sk=.5,oe=!1,Bb=0,Za,Mg=Aa-2-30,Y,D,ua=1,Ng=Math.log(1.1),Tj=Math.log(1.15),ia=[{level:10,mult:2},{level:50,mult:5},{level:100,mult:20},{level:500,
mult:1E6},{level:1E3,mult:1E9},{level:2E3,mult:1E13},{level:3E3,mult:1E13},{level:5E3,mult:1E13},{level:7E3,mult:1E13},{level:11E3,mult:1E14}],Og=ia.length-1,zb=[],Ha=0,xb,yb,xa,dk="",cg="https://api.almostidle.com/",Ea=!1,tb=null,Oa=function(){function a(a,b){if(!c[a]){c[a]={};for(var d=0;d<a.length;d++)c[a][a.charAt(d)]=d}return c[a][b]}var b=String.fromCharCode,c={},d={compressToBase64:function(a){if(null==a)return"";a=d._compress(a,6,function(a){return"abcdefghqEPQRSTrstuvwxyzijklmnFGHIJKLMNOop0147852963ABCDUVWXYZ+/=".charAt(a)});
switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:d._decompress(b.length,32,function(c){return a("abcdefghqEPQRSTrstuvwxyzijklmnFGHIJKLMNOop0147852963ABCDUVWXYZ+/=",b.charAt(c))})},compressToUTF16:function(a){return null==a?"":d._compress(a,15,function(a){return b(a+32)})+" "},decompressFromUTF16:function(a){return null==a?"":""==a?null:d._decompress(a.length,16384,function(b){return a.charCodeAt(b)-
32})},compressToUint8Array:function(a){a=d.compress(a);for(var b=new Uint8Array(2*a.length),c=0,e=a.length;c<e;c++){var g=a.charCodeAt(c);b[2*c]=g>>>8;b[2*c+1]=g%256}return b},decompressFromUint8Array:function(a){if(null===a||void 0===a)return d.decompress(a);for(var c=Array(a.length/2),g=0,k=c.length;g<k;g++)c[g]=256*a[2*g]+a[2*g+1];var q=[];c.forEach(function(a){q.push(b(a))});return d.decompress(q.join(""))},compressToEncodedURIComponent:function(a){return null==a?"":d._compress(a,6,function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(a)})},
decompressFromEncodedURIComponent:function(b){if(null==b)return"";if(""==b)return null;b=b.replace(/ /g,"+");return d._decompress(b.length,32,function(c){return a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",b.charAt(c))})},compress:function(a){return d._compress(a,16,function(a){return b(a)})},_compress:function(a,b,c){if(null==a)return"";var d,e,g={},l={},n="",p="",m="",v=2,x=3,y=2,z=[],t=0,r=0,w;for(w=0;w<a.length;w+=1)if(n=a.charAt(w),Object.prototype.hasOwnProperty.call(g,
n)||(g[n]=x++,l[n]=!0),p=m+n,Object.prototype.hasOwnProperty.call(g,p))m=p;else{if(Object.prototype.hasOwnProperty.call(l,m)){if(256>m.charCodeAt(0)){for(d=0;d<y;d++)t<<=1,r==b-1?(r=0,z.push(c(t)),t=0):r++;e=m.charCodeAt(0);for(d=0;8>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}else{e=1;for(d=0;d<y;d++)t=t<<1|e,r==b-1?(r=0,z.push(c(t)),t=0):r++,e=0;e=m.charCodeAt(0);for(d=0;16>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}v--;0==v&&(v=Math.pow(2,y),y++);delete l[m]}else for(e=
g[m],d=0;d<y;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1;v--;0==v&&(v=Math.pow(2,y),y++);g[p]=x++;m=String(n)}if(""!==m){if(Object.prototype.hasOwnProperty.call(l,m)){if(256>m.charCodeAt(0)){for(d=0;d<y;d++)t<<=1,r==b-1?(r=0,z.push(c(t)),t=0):r++;e=m.charCodeAt(0);for(d=0;8>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}else{e=1;for(d=0;d<y;d++)t=t<<1|e,r==b-1?(r=0,z.push(c(t)),t=0):r++,e=0;e=m.charCodeAt(0);for(d=0;16>d;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1}v--;
0==v&&(v=Math.pow(2,y),y++);delete l[m]}else for(e=g[m],d=0;d<y;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1;v--;0==v&&y++}e=2;for(d=0;d<y;d++)t=t<<1|e&1,r==b-1?(r=0,z.push(c(t)),t=0):r++,e>>=1;for(;;)if(t<<=1,r==b-1){z.push(c(t));break}else r++;return z.join("")},decompress:function(a){return null==a?"":""==a?null:d._decompress(a.length,32768,function(b){return a.charCodeAt(b)})},_decompress:function(a,c,d){var g=[],l=4,m=4,p=3,n="",v=[],w,x,A,y,z,t=d(0),r=c,B=1;for(w=0;3>w;w+=1)g[w]=w;
n=0;A=Math.pow(2,2);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=d(B++)),n|=(0<x?1:0)*y,y<<=1;switch(n){case 0:n=0;A=Math.pow(2,8);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=d(B++)),n|=(0<x?1:0)*y,y<<=1;z=b(n);break;case 1:n=0;A=Math.pow(2,16);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=d(B++)),n|=(0<x?1:0)*y,y<<=1;z=b(n);break;case 2:return""}w=g[3]=z;for(v.push(z);;){if(B>a)return"";n=0;A=Math.pow(2,p);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=d(B++)),n|=(0<x?1:0)*y,y<<=1;switch(z=n){case 0:n=0;A=Math.pow(2,8);for(y=
1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=d(B++)),n|=(0<x?1:0)*y,y<<=1;g[m++]=b(n);z=m-1;l--;break;case 1:n=0;A=Math.pow(2,16);for(y=1;y!=A;)x=t&r,r>>=1,0==r&&(r=c,t=d(B++)),n|=(0<x?1:0)*y,y<<=1;g[m++]=b(n);z=m-1;l--;break;case 2:return v.join("")}0==l&&(l=Math.pow(2,p),p++);if(g[z])n=g[z];else if(z===m)n=w+w.charAt(0);else return null;v.push(n);g[m++]=w+n.charAt(0);l--;w=n;0==l&&(l=Math.pow(2,p),p++)}}};return d}();H.directive("mPreventDefault",function(){return function(a,b,c){b.on("click",function(a){a.preventDefault()})}});
angular.module("ui.bootstrap.m",["ui.bootstrap.m.tpls","ui.bootstrap.m.progressbar"]);angular.module("ui.bootstrap.m.tpls",["uibm/template/progressbar/progressbar.html"]);angular.module("ui.bootstrap.m.progressbar",[]).constant("uibmProgressConfig",{animate:!0,max:new g(100)}).controller("UibmProgressController",["$scope","$attrs","uibmProgressConfig",function(a,b,c){function d(){return angular.isDefined(a.maxParam)?new g(a.maxParam):new g(c.max)}var f=this,l=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):
c.animate;this.bars=[];a.max=d();this.addBar=function(a,b,c){l||b.css({transition:"none"});this.bars.push(a);a.max=d();a.title=c&&angular.isDefined(c.title)?c.title:"progressbar";a.$watch("value",function(b){a.recalculatePercentage()});a.recalculatePercentage=function(){var b=f.bars.reduce(function(a,b){b.percent=g.mul(100,b.value).div(b.max).toFixed(2);return a+b.percent},0);100<b&&(a.percent-=b-100)};a.$on("$destroy",function(){b=null;f.removeBar(a)})};this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),
1);this.bars.forEach(function(a){a.recalculatePercentage()})};a.$watch("maxParam",function(a){f.bars.forEach(function(a){a.max=d();a.recalculatePercentage()})})}]).directive("uibmProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibmProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uibm/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}});angular.module("uibm/template/progressbar/progressbar.html",
[]).run(["$templateCache",function(a){a.put("uibm/template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}"></div><div class="progress-text" ng-transclude></div></div>\n')}])})();
